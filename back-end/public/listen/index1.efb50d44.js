function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}function n(e,t){return Object.keys(t).forEach(function(n){"default"===n||"__esModule"===n||e.hasOwnProperty(n)||Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})}),e}var r,o,i,a,s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},l={},u={},c=s.parcelRequire94c2;null==c&&((c=function(e){if(e in l)return l[e].exports;if(e in u){var t=u[e];delete u[e];var n={id:e,exports:{}};return l[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){u[e]=t},s.parcelRequire94c2=c),c.register("cjuLU",function(t,n){e(t.exports,"Fragment",()=>r,e=>r=e),e(t.exports,"jsx",()=>o,e=>o=e),e(t.exports,"jsxs",()=>i,e=>i=e);var r,o,i,a=c("fYo6y"),s=Symbol.for("react.element"),l=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,f=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function p(e,t,n){var r,o={},i=null,a=null;for(r in void 0!==n&&(i=""+n),void 0!==t.key&&(i=""+t.key),void 0!==t.ref&&(a=t.ref),t)u.call(t,r)&&!d.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:s,type:e,key:i,ref:a,props:o,_owner:f.current}}r=l,o=p,i=p}),c.register("fYo6y",function(e,t){e.exports=c("ha5xJ")}),c.register("ha5xJ",function(t,n){e(t.exports,"Children",()=>r,e=>r=e),e(t.exports,"Component",()=>o,e=>o=e),e(t.exports,"Fragment",()=>i,e=>i=e),e(t.exports,"Profiler",()=>a,e=>a=e),e(t.exports,"PureComponent",()=>s,e=>s=e),e(t.exports,"StrictMode",()=>l,e=>l=e),e(t.exports,"Suspense",()=>u,e=>u=e),e(t.exports,"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED",()=>c,e=>c=e),e(t.exports,"cloneElement",()=>f,e=>f=e),e(t.exports,"createContext",()=>d,e=>d=e),e(t.exports,"createElement",()=>p,e=>p=e),e(t.exports,"createFactory",()=>h,e=>h=e),e(t.exports,"createRef",()=>g,e=>g=e),e(t.exports,"forwardRef",()=>m,e=>m=e),e(t.exports,"isValidElement",()=>y,e=>y=e),e(t.exports,"lazy",()=>v,e=>v=e),e(t.exports,"memo",()=>b,e=>b=e),e(t.exports,"startTransition",()=>_,e=>_=e),e(t.exports,"unstable_act",()=>w,e=>w=e),e(t.exports,"useCallback",()=>S,e=>S=e),e(t.exports,"useContext",()=>k,e=>k=e),e(t.exports,"useDebugValue",()=>C,e=>C=e),e(t.exports,"useDeferredValue",()=>O,e=>O=e),e(t.exports,"useEffect",()=>E,e=>E=e),e(t.exports,"useId",()=>R,e=>R=e),e(t.exports,"useImperativeHandle",()=>A,e=>A=e),e(t.exports,"useInsertionEffect",()=>x,e=>x=e),e(t.exports,"useLayoutEffect",()=>T,e=>T=e),e(t.exports,"useMemo",()=>I,e=>I=e),e(t.exports,"useReducer",()=>P,e=>P=e),e(t.exports,"useRef",()=>M,e=>M=e),e(t.exports,"useState",()=>L,e=>L=e),e(t.exports,"useSyncExternalStore",()=>N,e=>N=e),e(t.exports,"useTransition",()=>D,e=>D=e),e(t.exports,"version",()=>U,e=>U=e);var r,o,i,a,s,l,u,c,f,d,p,h,g,m,y,v,b,_,w,S,k,C,O,E,R,A,x,T,I,P,M,L,N,D,U,B=Symbol.for("react.element"),j=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),q=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),$=Symbol.for("react.memo"),Q=Symbol.for("react.lazy"),K=Symbol.iterator,J={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,Y={};function Z(e,t,n){this.props=e,this.context=t,this.refs=Y,this.updater=n||J}function ee(){}function et(e,t,n){this.props=e,this.context=t,this.refs=Y,this.updater=n||J}Z.prototype.isReactComponent={},Z.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},Z.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},ee.prototype=Z.prototype;var en=et.prototype=new ee;en.constructor=et,X(en,Z.prototype),en.isPureReactComponent=!0;var er=Array.isArray,eo=Object.prototype.hasOwnProperty,ei={current:null},ea={key:!0,ref:!0,__self:!0,__source:!0};function es(e,t,n){var r,o={},i=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(i=""+t.key),t)eo.call(t,r)&&!ea.hasOwnProperty(r)&&(o[r]=t[r]);var s=arguments.length-2;if(1===s)o.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];o.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===o[r]&&(o[r]=s[r]);return{$$typeof:B,type:e,key:i,ref:a,props:o,_owner:ei.current}}function el(e){return"object"==typeof e&&null!==e&&e.$$typeof===B}var eu=/\/+/g;function ec(e,t){var n,r;return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return r[e]})):t.toString(36)}function ef(e,t,n){if(null==e)return e;var r=[],o=0;return function e(t,n,r,o,i){var a,s,l,u=typeof t;("undefined"===u||"boolean"===u)&&(t=null);var c=!1;if(null===t)c=!0;else switch(u){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case B:case j:c=!0}}if(c)return i=i(c=t),t=""===o?"."+ec(c,0):o,er(i)?(r="",null!=t&&(r=t.replace(eu,"$&/")+"/"),e(i,n,r,"",function(e){return e})):null!=i&&(el(i)&&(a=i,s=r+(!i.key||c&&c.key===i.key?"":(""+i.key).replace(eu,"$&/")+"/")+t,i={$$typeof:B,type:a.type,key:s,ref:a.ref,props:a.props,_owner:a._owner}),n.push(i)),1;if(c=0,o=""===o?".":o+":",er(t))for(var f=0;f<t.length;f++){var d=o+ec(u=t[f],f);c+=e(u,n,r,d,i)}else if("function"==typeof(d=null===(l=t)||"object"!=typeof l?null:"function"==typeof(l=K&&l[K]||l["@@iterator"])?l:null))for(t=d.call(t),f=0;!(u=t.next()).done;)d=o+ec(u=u.value,f++),c+=e(u,n,r,d,i);else if("object"===u)throw Error("Objects are not valid as a React child (found: "+("[object Object]"===(n=String(t))?"object with keys {"+Object.keys(t).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return c}(e,r,"","",function(e){return t.call(n,e,o++)}),r}function ed(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){(0===e._status||-1===e._status)&&(e._status=1,e._result=t)},function(t){(0===e._status||-1===e._status)&&(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var ep={current:null},eh={transition:null};r={map:ef,forEach:function(e,t,n){ef(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ef(e,function(){t++}),t},toArray:function(e){return ef(e,function(e){return e})||[]},only:function(e){if(!el(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},o=Z,i=F,a=G,s=et,l=z,u=W,c={ReactCurrentDispatcher:ep,ReactCurrentBatchConfig:eh,ReactCurrentOwner:ei},f=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=X({},e.props),o=e.key,i=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,a=ei.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)eo.call(t,l)&&!ea.hasOwnProperty(l)&&(r[l]=void 0===t[l]&&void 0!==s?s[l]:t[l])}var l=arguments.length-2;if(1===l)r.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:B,type:e.type,key:o,ref:i,props:r,_owner:a}},d=function(e){return(e={$$typeof:q,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:H,_context:e},e.Consumer=e},p=es,h=function(e){var t=es.bind(null,e);return t.type=e,t},g=function(){return{current:null}},m=function(e){return{$$typeof:V,render:e}},y=el,v=function(e){return{$$typeof:Q,_payload:{_status:-1,_result:e},_init:ed}},b=function(e,t){return{$$typeof:$,type:e,compare:void 0===t?null:t}},_=function(e){var t=eh.transition;eh.transition={};try{e()}finally{eh.transition=t}},w=function(){throw Error("act(...) is not supported in production builds of React.")},S=function(e,t){return ep.current.useCallback(e,t)},k=function(e){return ep.current.useContext(e)},C=function(){},O=function(e){return ep.current.useDeferredValue(e)},E=function(e,t){return ep.current.useEffect(e,t)},R=function(){return ep.current.useId()},A=function(e,t,n){return ep.current.useImperativeHandle(e,t,n)},x=function(e,t){return ep.current.useInsertionEffect(e,t)},T=function(e,t){return ep.current.useLayoutEffect(e,t)},I=function(e,t){return ep.current.useMemo(e,t)},P=function(e,t,n){return ep.current.useReducer(e,t,n)},M=function(e){return ep.current.useRef(e)},L=function(e){return ep.current.useState(e)},N=function(e,t,n){return ep.current.useSyncExternalStore(e,t,n)},D=function(){return ep.current.useTransition()},U="18.2.0"}),c.register("gAtBI",function(t,n){e(t.exports,"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED",()=>H,e=>H=e),e(t.exports,"createPortal",()=>q,e=>q=e),e(t.exports,"createRoot",()=>V,e=>V=e),e(t.exports,"findDOMNode",()=>W,e=>W=e),e(t.exports,"flushSync",()=>$,e=>$=e),e(t.exports,"hydrate",()=>Q,e=>Q=e),e(t.exports,"hydrateRoot",()=>K,e=>K=e),e(t.exports,"render",()=>J,e=>J=e),e(t.exports,"unmountComponentAtNode",()=>X,e=>X=e),e(t.exports,"unstable_batchedUpdates",()=>Y,e=>Y=e),e(t.exports,"unstable_renderSubtreeIntoContainer",()=>Z,e=>Z=e),e(t.exports,"version",()=>ee,e=>ee=e);var r,o,i,a,s,l,u=c("fYo6y"),f=c("6qr1r");function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p=new Set,h={};function g(e,t){m(e,t),m(e+"Capture",t)}function m(e,t){for(h[e]=t,e=0;e<t.length;e++)p.add(t[e])}var y=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),v=Object.prototype.hasOwnProperty,b=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},w={};function S(e,t,n,r,o,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){k[e]=new S(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];k[t]=new S(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){k[e]=new S(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){k[e]=new S(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){k[e]=new S(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){k[e]=new S(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){k[e]=new S(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){k[e]=new S(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){k[e]=new S(e,5,!1,e.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function O(e){return e[1].toUpperCase()}function E(e,t,n,r){var o,i=k.hasOwnProperty(t)?k[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":if(r)return!1;if(null!==n)return!n.acceptsBooleans;return"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e;default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?(o=t,(!!v.call(w,o)||!v.call(_,o)&&(b.test(o)?w[o]=!0:(_[o]=!0,!1)))&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n))):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(C,O);k[t]=new S(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(C,O);k[t]=new S(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(C,O);k[t]=new S(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){k[e]=new S(e,1,!1,e.toLowerCase(),null,!1,!1)}),k.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){k[e]=new S(e,1,!1,e.toLowerCase(),null,!0,!0)});var R=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),x=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),L=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),j=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var F=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var z=Symbol.iterator;function G(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=z&&e[z]||e["@@iterator"])?e:null}var H,q,V,W,$,Q,K,J,X,Y,Z,ee,et,en=Object.assign;function er(e){if(void 0===et)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);et=t&&t[1]||""}return"\n"+et+e}var eo=!1;function ei(e,t){if(!e||eo)return"";eo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t){if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var o=t.stack.split("\n"),i=r.stack.split("\n"),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(1!==a||1!==s)do if(a--,0>--s||o[a]!==i[s]){var l="\n"+o[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=s)break}}}finally{eo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?er(e):""}function ea(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function es(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function el(e){e._valueTracker||(e._valueTracker=function(e){var t=es(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function eu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=es(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ec(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function ef(e,t){var n=t.checked;return en({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ed(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ea(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function ep(e,t){null!=(t=t.checked)&&E(e,"checked",t,!1)}function eh(e,t){ep(e,t);var n=ea(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r){e.removeAttribute("value");return}t.hasOwnProperty("value")?em(e,t.type,n):t.hasOwnProperty("defaultValue")&&em(e,t.type,ea(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function eg(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function em(e,t,n){("number"!==t||ec(e.ownerDocument)!==e)&&(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ey=Array.isArray;function ev(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(o=0,n=""+ea(n),t=null;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function eb(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(d(91));return en({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function e_(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(d(92));if(ey(n)){if(1<n.length)throw Error(d(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ea(n)}}function ew(e,t){var n=ea(t.value),r=ea(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function eS(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ek(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function eC(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ek(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var eO,eE,eR=(eO=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((eE=eE||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=eE.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return eO(e,t,n,r)})}:eO);function eA(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType){n.nodeValue=t;return}}e.textContent=t}var ex={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eT=["Webkit","ms","Moz","O"];function eI(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||ex.hasOwnProperty(e)&&ex[e]?(""+t).trim():t+"px"}function eP(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=eI(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(ex).forEach(function(e){eT.forEach(function(t){ex[t=t+e.charAt(0).toUpperCase()+e.substring(1)]=ex[e]})});var eM=en({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eL(e,t){if(t){if(eM[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(d(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(d(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(d(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(d(62))}}function eN(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eD=null;function eU(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var eB=null,ej=null,eF=null;function ez(e){if(e=rK(e)){if("function"!=typeof eB)throw Error(d(280));var t=e.stateNode;t&&(t=rX(t),eB(e.stateNode,e.type,t))}}function eG(e){ej?eF?eF.push(e):eF=[e]:ej=e}function eH(){if(ej){var e=ej,t=eF;if(eF=ej=null,ez(e),t)for(e=0;e<t.length;e++)ez(t[e])}}function eq(e,t){return e(t)}function eV(){}var eW=!1;function e$(e,t,n){if(eW)return e(t,n);eW=!0;try{return eq(e,t,n)}finally{eW=!1,(null!==ej||null!==eF)&&(eV(),eH())}}function eQ(e,t){var n=e.stateNode;if(null===n)return null;var r=rX(n);if(null===r)return null;switch(n=r[t],t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(d(231,t,typeof n));return n}var eK=!1;if(y)try{var eJ={};Object.defineProperty(eJ,"passive",{get:function(){eK=!0}}),window.addEventListener("test",eJ,eJ),window.removeEventListener("test",eJ,eJ)}catch(e){eK=!1}function eX(e,t,n,r,o,i,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}var eY=!1,eZ=null,e0=!1,e1=null,e2={onError:function(e){eY=!0,eZ=e}};function e4(e,t,n,r,o,i,a,s,l){eY=!1,eZ=null,eX.apply(e2,arguments)}function e3(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do 0!=(4098&(t=e).flags)&&(n=t.return),e=t.return;while(e)}return 3===t.tag?n:null}function e6(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function e8(e){if(e3(e)!==e)throw Error(d(188))}function e5(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=e3(e)))throw Error(d(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(r=o.return)){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return e8(o),e;if(i===r)return e8(o),t;i=i.sibling}throw Error(d(188))}if(n.return!==r.return)n=o,r=i;else{for(var a=!1,s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a){for(s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a)throw Error(d(189))}}if(n.alternate!==r)throw Error(d(190))}if(3!==n.tag)throw Error(d(188));return n.stateNode.current===n?e:t}(e))?function e(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var n=e(t);if(null!==n)return n;t=t.sibling}return null}(e):null}var e9=f.unstable_scheduleCallback,e7=f.unstable_cancelCallback,te=f.unstable_shouldYield,tt=f.unstable_requestPaint,tn=f.unstable_now,tr=f.unstable_getCurrentPriorityLevel,to=f.unstable_ImmediatePriority,ti=f.unstable_UserBlockingPriority,ta=f.unstable_NormalPriority,ts=f.unstable_LowPriority,tl=f.unstable_IdlePriority,tu=null,tc=null,tf=Math.clz32?Math.clz32:function(e){return 0==(e>>>=0)?32:31-(td(e)/tp|0)|0},td=Math.log,tp=Math.LN2,th=64,tg=4194304;function tm(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ty(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~o;0!==s?r=tm(s):0!=(i&=a)&&(r=tm(i))}else 0!=(a=n&~o)?r=tm(a):0!==i&&(r=tm(i));if(0===r)return 0;if(0!==t&&t!==r&&0==(t&o)&&((o=r&-r)>=(i=t&-t)||16===o&&0!=(4194240&i)))return t;if(0!=(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-tf(t)),r|=e[n],t&=~o;return r}function tv(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function tb(){var e=th;return 0==(4194240&(th<<=1))&&(th=64),e}function t_(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function tw(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-tf(t)]=n}function tS(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-tf(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var tk=0;function tC(e){return 1<(e&=-e)?4<e?0!=(268435455&e)?16:536870912:4:1}var tO,tE,tR,tA,tx,tT=!1,tI=[],tP=null,tM=null,tL=null,tN=new Map,tD=new Map,tU=[],tB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function tj(e,t){switch(e){case"focusin":case"focusout":tP=null;break;case"dragenter":case"dragleave":tM=null;break;case"mouseover":case"mouseout":tL=null;break;case"pointerover":case"pointerout":tN.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":tD.delete(t.pointerId)}}function tF(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&null!==(t=rK(t))&&tE(t)):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o)),e}function tz(e){var t=rQ(e.target);if(null!==t){var n=e3(t);if(null!==n){if(13===(t=n.tag)){if(null!==(t=e6(n))){e.blockedOn=t,tx(e.priority,function(){tR(n)});return}}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=3===n.tag?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tG(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=tZ(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=rK(n))&&tE(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);eD=r,n.target.dispatchEvent(r),eD=null,t.shift()}return!0}function tH(e,t,n){tG(e)&&n.delete(t)}function tq(){tT=!1,null!==tP&&tG(tP)&&(tP=null),null!==tM&&tG(tM)&&(tM=null),null!==tL&&tG(tL)&&(tL=null),tN.forEach(tH),tD.forEach(tH)}function tV(e,t){e.blockedOn===t&&(e.blockedOn=null,tT||(tT=!0,f.unstable_scheduleCallback(f.unstable_NormalPriority,tq)))}function tW(e){function t(t){return tV(t,e)}if(0<tI.length){tV(tI[0],e);for(var n=1;n<tI.length;n++){var r=tI[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==tP&&tV(tP,e),null!==tM&&tV(tM,e),null!==tL&&tV(tL,e),tN.forEach(t),tD.forEach(t),n=0;n<tU.length;n++)(r=tU[n]).blockedOn===e&&(r.blockedOn=null);for(;0<tU.length&&null===(n=tU[0]).blockedOn;)tz(n),null===n.blockedOn&&tU.shift()}var t$=R.ReactCurrentBatchConfig,tQ=!0;function tK(e,t,n,r){var o=tk,i=t$.transition;t$.transition=null;try{tk=1,tX(e,t,n,r)}finally{tk=o,t$.transition=i}}function tJ(e,t,n,r){var o=tk,i=t$.transition;t$.transition=null;try{tk=4,tX(e,t,n,r)}finally{tk=o,t$.transition=i}}function tX(e,t,n,r){if(tQ){var o=tZ(e,t,n,r);if(null===o)r_(e,t,r,tY,n),tj(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return tP=tF(tP,e,t,n,r,o),!0;case"dragenter":return tM=tF(tM,e,t,n,r,o),!0;case"mouseover":return tL=tF(tL,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return tN.set(i,tF(tN.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,tD.set(i,tF(tD.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(tj(e,r),4&t&&-1<tB.indexOf(e)){for(;null!==o;){var i=rK(o);if(null!==i&&tO(i),null===(i=tZ(e,t,n,r))&&r_(e,t,r,tY,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else r_(e,t,r,null,n)}}var tY=null;function tZ(e,t,n,r){if(tY=null,null!==(e=rQ(e=eU(r)))){if(null===(t=e3(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=e6(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}return tY=e,null}function t0(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tr()){case to:return 1;case ti:return 4;case ta:case ts:return 16;case tl:return 536870912;default:return 16}default:return 16}}var t1=null,t2=null,t4=null;function t3(){if(t4)return t4;var e,t,n=t2,r=n.length,o="value"in t1?t1.value:t1.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return t4=o.slice(e,1<t?1-t:void 0)}function t6(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function t8(){return!0}function t5(){return!1}function t9(e){function t(t,n,r,o,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?t8:t5,this.isPropagationStopped=t5,this}return en(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=t8)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=t8)},persist:function(){},isPersistent:t8}),t}var t7,ne,nt,nn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nr=t9(nn),no=en({},nn,{view:0,detail:0}),ni=t9(no),na=en({},no,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ny,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nt&&(nt&&"mousemove"===e.type?(t7=e.screenX-nt.screenX,ne=e.screenY-nt.screenY):ne=t7=0,nt=e),t7)},movementY:function(e){return"movementY"in e?e.movementY:ne}}),ns=t9(na),nl=t9(en({},na,{dataTransfer:0})),nu=t9(en({},no,{relatedTarget:0})),nc=t9(en({},nn,{animationName:0,elapsedTime:0,pseudoElement:0})),nf=t9(en({},nn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),nd=t9(en({},nn,{data:0})),np={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ng={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=ng[e])&&!!t[e]}function ny(){return nm}var nv=t9(en({},no,{key:function(e){if(e.key){var t=np[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=t6(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?nh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ny,charCode:function(e){return"keypress"===e.type?t6(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?t6(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),nb=t9(en({},na,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),n_=t9(en({},no,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ny})),nw=t9(en({},nn,{propertyName:0,elapsedTime:0,pseudoElement:0})),nS=t9(en({},na,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),nk=[9,13,27,32],nC=y&&"CompositionEvent"in window,nO=null;y&&"documentMode"in document&&(nO=document.documentMode);var nE=y&&"TextEvent"in window&&!nO,nR=y&&(!nC||nO&&8<nO&&11>=nO),nA=!1;function nx(e,t){switch(e){case"keyup":return -1!==nk.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nT(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var nI=!1,nP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nM(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!nP[e.type]:"textarea"===t}function nL(e,t,n,r){eG(r),0<(t=rS(t,"onChange")).length&&(n=new nr("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var nN=null,nD=null;function nU(e){rh(e,0)}function nB(e){if(eu(rJ(e)))return e}function nj(e,t){if("change"===e)return t}var nF=!1;if(y){if(y){var nz="oninput"in document;if(!nz){var nG=document.createElement("div");nG.setAttribute("oninput","return;"),nz="function"==typeof nG.oninput}r=nz}else r=!1;nF=r&&(!document.documentMode||9<document.documentMode)}function nH(){nN&&(nN.detachEvent("onpropertychange",nq),nD=nN=null)}function nq(e){if("value"===e.propertyName&&nB(nD)){var t=[];nL(t,nD,e,eU(e)),e$(nU,t)}}function nV(e,t,n){"focusin"===e?(nH(),nN=t,nD=n,nN.attachEvent("onpropertychange",nq)):"focusout"===e&&nH()}function nW(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return nB(nD)}function n$(e,t){if("click"===e)return nB(t)}function nQ(e,t){if("input"===e||"change"===e)return nB(t)}var nK="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function nJ(e,t){if(nK(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!v.call(t,o)||!nK(e[o],t[o]))return!1}return!0}function nX(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nY(e,t){var n,r=nX(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=nX(r)}}function nZ(){for(var e=window,t=ec();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(n)e=t.contentWindow;else break;t=ec(e.document)}return t}function n0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var n1=y&&"documentMode"in document&&11>=document.documentMode,n2=null,n4=null,n3=null,n6=!1;function n8(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;n6||null==n2||n2!==ec(r)||(r="selectionStart"in(r=n2)&&n0(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},n3&&nJ(n3,r)||(n3=r,0<(r=rS(n4,"onSelect")).length&&(t=new nr("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=n2)))}function n5(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var n9={animationend:n5("Animation","AnimationEnd"),animationiteration:n5("Animation","AnimationIteration"),animationstart:n5("Animation","AnimationStart"),transitionend:n5("Transition","TransitionEnd")},n7={},re={};function rt(e){if(n7[e])return n7[e];if(!n9[e])return e;var t,n=n9[e];for(t in n)if(n.hasOwnProperty(t)&&t in re)return n7[e]=n[t];return e}y&&(re=document.createElement("div").style,"AnimationEvent"in window||(delete n9.animationend.animation,delete n9.animationiteration.animation,delete n9.animationstart.animation),"TransitionEvent"in window||delete n9.transitionend.transition);var rn=rt("animationend"),rr=rt("animationiteration"),ro=rt("animationstart"),ri=rt("transitionend"),ra=new Map,rs="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rl(e,t){ra.set(e,t),g(t,[e])}for(var ru=0;ru<rs.length;ru++){var rc=rs[ru];rl(rc.toLowerCase(),"on"+(rc[0].toUpperCase()+rc.slice(1)))}rl(rn,"onAnimationEnd"),rl(rr,"onAnimationIteration"),rl(ro,"onAnimationStart"),rl("dblclick","onDoubleClick"),rl("focusin","onFocus"),rl("focusout","onBlur"),rl(ri,"onTransitionEnd"),m("onMouseEnter",["mouseout","mouseover"]),m("onMouseLeave",["mouseout","mouseover"]),m("onPointerEnter",["pointerout","pointerover"]),m("onPointerLeave",["pointerout","pointerover"]),g("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),g("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),g("onBeforeInput",["compositionend","keypress","textInput","paste"]),g("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rd=new Set("cancel close invalid load scroll toggle".split(" ").concat(rf));function rp(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,i,a,s,l){if(e4.apply(this,arguments),eY){if(eY){var u=eZ;eY=!1,eZ=null}else throw Error(d(198));e0||(e0=!0,e1=u)}}(r,t,void 0,e),e.currentTarget=null}function rh(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==i&&o.isPropagationStopped())break e;rp(o,s,u),i=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,u=s.currentTarget,s=s.listener,l!==i&&o.isPropagationStopped())break e;rp(o,s,u),i=l}}}if(e0)throw e=e1,e0=!1,e1=null,e}function rg(e,t){var n=t[rV];void 0===n&&(n=t[rV]=new Set);var r=e+"__bubble";n.has(r)||(rb(t,e,2,!1),n.add(r))}function rm(e,t,n){var r=0;t&&(r|=4),rb(n,e,r,t)}var ry="_reactListening"+Math.random().toString(36).slice(2);function rv(e){if(!e[ry]){e[ry]=!0,p.forEach(function(t){"selectionchange"!==t&&(rd.has(t)||rm(t,!1,e),rm(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[ry]||(t[ry]=!0,rm("selectionchange",!1,t))}}function rb(e,t,n,r){switch(t0(t)){case 1:var o=tK;break;case 4:o=tJ;break;default:o=tX}n=o.bind(null,t,n,e),o=void 0,eK&&("touchstart"===t||"touchmove"===t||"wheel"===t)&&(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function r_(e,t,n,r,o){var i=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===o||8===l.nodeType&&l.parentNode===o))return;a=a.return}for(;null!==s;){if(null===(a=rQ(s)))return;if(5===(l=a.tag)||6===l){r=i=a;continue e}s=s.parentNode}}r=r.return}e$(function(){var r=i,o=eU(n),a=[];e:{var s=ra.get(e);if(void 0!==s){var l=nr,u=e;switch(e){case"keypress":if(0===t6(n))break e;case"keydown":case"keyup":l=nv;break;case"focusin":u="focus",l=nu;break;case"focusout":u="blur",l=nu;break;case"beforeblur":case"afterblur":l=nu;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=ns;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=nl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=n_;break;case rn:case rr:case ro:l=nc;break;case ri:l=nw;break;case"scroll":l=ni;break;case"wheel":l=nS;break;case"copy":case"cut":case"paste":l=nf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=nb}var c=0!=(4&t),f=!c&&"scroll"===e,d=c?null!==s?s+"Capture":null:s;c=[];for(var p,h=r;null!==h;){var g=(p=h).stateNode;if(5===p.tag&&null!==g&&(p=g,null!==d&&null!=(g=eQ(h,d))&&c.push(rw(h,g,p))),f)break;h=h.return}0<c.length&&(s=new l(s,u,null,n,o),a.push({event:s,listeners:c}))}}if(0==(7&t)){if(s="mouseover"===e||"pointerover"===e,l="mouseout"===e||"pointerout"===e,!(s&&n!==eD&&(u=n.relatedTarget||n.fromElement)&&(rQ(u)||u[rq]))&&(l||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,l?(u=n.relatedTarget||n.toElement,l=r,null!==(u=u?rQ(u):null)&&(f=e3(u),u!==f||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=ns,g="onMouseLeave",d="onMouseEnter",h="mouse",("pointerout"===e||"pointerover"===e)&&(c=nb,g="onPointerLeave",d="onPointerEnter",h="pointer"),f=null==l?s:rJ(l),p=null==u?s:rJ(u),(s=new c(g,h+"leave",l,n,o)).target=f,s.relatedTarget=p,g=null,rQ(o)===r&&((c=new c(d,h+"enter",u,n,o)).target=p,c.relatedTarget=f,g=c),f=g,l&&u)t:{for(c=l,d=u,h=0,p=c;p;p=rk(p))h++;for(p=0,g=d;g;g=rk(g))p++;for(;0<h-p;)c=rk(c),h--;for(;0<p-h;)d=rk(d),p--;for(;h--;){if(c===d||null!==d&&c===d.alternate)break t;c=rk(c),d=rk(d)}c=null}else c=null;null!==l&&rC(a,s,l,c,!1),null!==u&&null!==f&&rC(a,f,u,c,!0)}e:{if("select"===(l=(s=r?rJ(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m,y=nj;else if(nM(s)){if(nF)y=nQ;else{y=nW;var v=nV}}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=n$);if(y&&(y=y(e,r))){nL(a,y,n,o);break e}v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&em(s,"number",s.value)}switch(v=r?rJ(r):window,e){case"focusin":(nM(v)||"true"===v.contentEditable)&&(n2=v,n4=r,n3=null);break;case"focusout":n3=n4=n2=null;break;case"mousedown":n6=!0;break;case"contextmenu":case"mouseup":case"dragend":n6=!1,n8(a,n,o);break;case"selectionchange":if(n1)break;case"keydown":case"keyup":n8(a,n,o)}if(nC)t:{switch(e){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else nI?nx(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(nR&&"ko"!==n.locale&&(nI||"onCompositionStart"!==b?"onCompositionEnd"===b&&nI&&(m=t3()):(t2="value"in(t1=o)?t1.value:t1.textContent,nI=!0)),0<(v=rS(r,b)).length&&(b=new nd(b,e,null,n,o),a.push({event:b,listeners:v}),m?b.data=m:null!==(m=nT(n))&&(b.data=m))),(m=nE?function(e,t){switch(e){case"compositionend":return nT(t);case"keypress":if(32!==t.which)return null;return nA=!0," ";case"textInput":return" "===(e=t.data)&&nA?null:e;default:return null}}(e,n):function(e,t){if(nI)return"compositionend"===e||!nC&&nx(e,t)?(e=t3(),t4=t2=t1=null,nI=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return nR&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=rS(r,"onBeforeInput")).length&&(o=new nd("onBeforeInput","beforeinput",null,n,o),a.push({event:o,listeners:r}),o.data=m)}rh(a,t)})}function rw(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rS(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=eQ(e,n))&&r.unshift(rw(e,i,o)),null!=(i=eQ(e,t))&&r.push(rw(e,i,o))),e=e.return}return r}function rk(e){if(null===e)return null;do e=e.return;while(e&&5!==e.tag)return e||null}function rC(e,t,n,r,o){for(var i=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,o?null!=(l=eQ(n,i))&&a.unshift(rw(n,l,s)):o||null!=(l=eQ(n,i))&&a.push(rw(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var rO=/\r\n?/g,rE=/\u0000|\uFFFD/g;function rR(e){return("string"==typeof e?e:""+e).replace(rO,"\n").replace(rE,"")}function rA(e,t,n){if(t=rR(t),rR(e)!==t&&n)throw Error(d(425))}function rx(){}var rT=null,rI=null;function rP(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rM="function"==typeof setTimeout?setTimeout:void 0,rL="function"==typeof clearTimeout?clearTimeout:void 0,rN="function"==typeof Promise?Promise:void 0,rD="function"==typeof queueMicrotask?queueMicrotask:void 0!==rN?function(e){return rN.resolve(null).then(e).catch(rU)}:rM;function rU(e){setTimeout(function(){throw e})}function rB(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType){if("/$"===(n=o.data)){if(0===r){e.removeChild(o),tW(t);return}r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++}n=o}while(n)tW(t)}function rj(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function rF(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var rz=Math.random().toString(36).slice(2),rG="__reactFiber$"+rz,rH="__reactProps$"+rz,rq="__reactContainer$"+rz,rV="__reactEvents$"+rz,rW="__reactListeners$"+rz,r$="__reactHandles$"+rz;function rQ(e){var t=e[rG];if(t)return t;for(var n=e.parentNode;n;){if(t=n[rq]||n[rG]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=rF(e);null!==e;){if(n=e[rG])return n;e=rF(e)}return t}n=(e=n).parentNode}return null}function rK(e){return(e=e[rG]||e[rq])&&(5===e.tag||6===e.tag||13===e.tag||3===e.tag)?e:null}function rJ(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(d(33))}function rX(e){return e[rH]||null}var rY=[],rZ=-1;function r0(e){return{current:e}}function r1(e){0>rZ||(e.current=rY[rZ],rY[rZ]=null,rZ--)}function r2(e,t){rY[++rZ]=e.current,e.current=t}var r4={},r3=r0(r4),r6=r0(!1),r8=r4;function r5(e,t){var n=e.type.contextTypes;if(!n)return r4;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function r9(e){return null!=(e=e.childContextTypes)}function r7(){r1(r6),r1(r3)}function oe(e,t,n){if(r3.current!==r4)throw Error(d(168));r2(r3,t),r2(r6,n)}function ot(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(d(108,function(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return function e(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case T:return"Fragment";case x:return"Portal";case P:return"Profiler";case I:return"StrictMode";case D:return"Suspense";case U:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case L:return(t.displayName||"Context")+".Consumer";case M:return(t._context.displayName||"Context")+".Provider";case N:var n=t.render;return(t=t.displayName)||(t=""!==(t=n.displayName||n.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case B:return null!==(n=t.displayName||null)?n:e(t.type)||"Memo";case j:n=t._payload,t=t._init;try{return e(t(n))}catch(e){}}return null}(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}(e)||"Unknown",o));return en({},n,r)}function on(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||r4,r8=r3.current,r2(r3,e),r2(r6,r6.current),!0}function or(e,t,n){var r=e.stateNode;if(!r)throw Error(d(169));n?(e=ot(e,t,r8),r.__reactInternalMemoizedMergedChildContext=e,r1(r6),r1(r3),r2(r3,e)):r1(r6),r2(r6,n)}var oo=null,oi=!1,oa=!1;function os(e){null===oo?oo=[e]:oo.push(e)}function ol(){if(!oa&&null!==oo){oa=!0;var e=0,t=tk;try{var n=oo;for(tk=1;e<n.length;e++){var r=n[e];do r=r(!0);while(null!==r)}oo=null,oi=!1}catch(t){throw null!==oo&&(oo=oo.slice(e+1)),e9(to,ol),t}finally{tk=t,oa=!1}}return null}var ou=[],oc=0,of=null,od=0,op=[],oh=0,og=null,om=1,oy="";function ov(e,t){ou[oc++]=od,ou[oc++]=of,of=e,od=t}function ob(e,t,n){op[oh++]=om,op[oh++]=oy,op[oh++]=og,og=e;var r=om;e=oy;var o=32-tf(r)-1;r&=~(1<<o),n+=1;var i=32-tf(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,om=1<<32-tf(t)+o|n<<o|r,oy=i+e}else om=1<<i|n<<o|r,oy=e}function o_(e){null!==e.return&&(ov(e,1),ob(e,1,0))}function ow(e){for(;e===of;)of=ou[--oc],ou[oc]=null,od=ou[--oc],ou[oc]=null;for(;e===og;)og=op[--oh],op[oh]=null,oy=op[--oh],op[oh]=null,om=op[--oh],op[oh]=null}var oS=null,ok=null,oC=!1,oO=null;function oE(e,t){var n=s9(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oR(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,oS=e,ok=rj(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,oS=e,ok=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==og?{id:om,overflow:oy}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=s9(18,null,null,0)).stateNode=t,n.return=e,e.child=n,oS=e,ok=null,!0);default:return!1}}function oA(e){return 0!=(1&e.mode)&&0==(128&e.flags)}function ox(e){if(oC){var t=ok;if(t){var n=t;if(!oR(e,t)){if(oA(e))throw Error(d(418));t=rj(n.nextSibling);var r=oS;t&&oR(e,t)?oE(r,n):(e.flags=-4097&e.flags|2,oC=!1,oS=e)}}else{if(oA(e))throw Error(d(418));e.flags=-4097&e.flags|2,oC=!1,oS=e}}}function oT(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;oS=e}function oI(e){if(e!==oS)return!1;if(!oC)return oT(e),oC=!0,!1;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!rP(e.type,e.memoizedProps)),t&&(t=ok)){if(oA(e))throw oP(),Error(d(418));for(;t;)oE(e,t),t=rj(t.nextSibling)}if(oT(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(d(317));e:{for(t=0,e=e.nextSibling;e;){if(8===e.nodeType){var t,n=e.data;if("/$"===n){if(0===t){ok=rj(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ok=null}}else ok=oS?rj(e.stateNode.nextSibling):null;return!0}function oP(){for(var e=ok;e;)e=rj(e.nextSibling)}function oM(){ok=oS=null,oC=!1}function oL(e){null===oO?oO=[e]:oO.push(e)}var oN=R.ReactCurrentBatchConfig;function oD(e,t){if(e&&e.defaultProps)for(var n in t=en({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var oU=r0(null),oB=null,oj=null,oF=null;function oz(){oF=oj=oB=null}function oG(e){var t=oU.current;r1(oU),e._currentValue=t}function oH(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function oq(e,t){oB=e,oF=oj=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(aw=!0),e.firstContext=null)}function oV(e){var t=e._currentValue;if(oF!==e){if(e={context:e,memoizedValue:t,next:null},null===oj){if(null===oB)throw Error(d(308));oj=e,oB.dependencies={lanes:0,firstContext:e}}else oj=oj.next=e}return t}var oW=null;function o$(e){null===oW?oW=[e]:oW.push(e)}function oQ(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,o$(t)):(n.next=o.next,o.next=n),t.interleaved=n,oK(e,r)}function oK(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var oJ=!1;function oX(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oY(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function oZ(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function o0(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!=(2&sl)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,oK(e,n)}return null===(o=r.interleaved)?(t.next=t,o$(r)):(t.next=o.next,o.next=t),r.interleaved=t,oK(e,n)}function o1(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!=(4194240&n))){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,tS(e,n)}}function o2(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?o=i=a:i=i.next=a,n=n.next}while(null!==n)null===i?o=i=t:i=i.next=t}else o=i=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function o4(e,t,n,r){var o=e.updateQueue;oJ=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var l=s,u=l.next;l.next=null,null===a?i=u:a.next=u,a=l;var c=e.alternate;null!==c&&(s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l)}if(null!==i){var f=o.baseState;for(a=0,c=u=l=null,s=i;;){var d=s.lane,p=s.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var h=e,g=s;switch(d=t,p=n,g.tag){case 1:if("function"==typeof(h=g.payload)){f=h.call(p,f,d);break e}f=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null==(d="function"==typeof(h=g.payload)?h.call(p,f,d):h))break e;f=en({},f,d);break e;case 2:oJ=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=o.effects)?o.effects=[s]:d.push(s))}else p={eventTime:p,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=p,l=f):c=c.next=p,a|=d;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(d=s).next,d.next=null,o.lastBaseUpdate=d,o.shared.pending=null}}if(null===c&&(l=f),o.baseState=l,o.firstBaseUpdate=u,o.lastBaseUpdate=c,null!==(t=o.shared.interleaved)){o=t;do a|=o.lane,o=o.next;while(o!==t)}else null===i&&(o.shared.lanes=0);sm|=a,e.lanes=a,e.memoizedState=f}}function o3(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!=typeof o)throw Error(d(191,o));o.call(r)}}}var o6=(new u.Component).refs;function o8(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:en({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var o5={isMounted:function(e){return!!(e=e._reactInternals)&&e3(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=sL(),o=sN(e),i=oZ(r,o);i.payload=t,null!=n&&(i.callback=n),null!==(t=o0(e,i,o))&&(sD(t,e,o,r),o1(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=sL(),o=sN(e),i=oZ(r,o);i.tag=1,i.payload=t,null!=n&&(i.callback=n),null!==(t=o0(e,i,o))&&(sD(t,e,o,r),o1(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=sL(),r=sN(e),o=oZ(n,r);o.tag=2,null!=t&&(o.callback=t),null!==(t=o0(e,o,r))&&(sD(t,e,r,n),o1(t,e,r))}};function o9(e,t,n,r,o,i,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||!nJ(n,r)||!nJ(o,i)}function o7(e,t,n){var r=!1,o=r4,i=t.contextType;return"object"==typeof i&&null!==i?i=oV(i):(o=r9(t)?r8:r3.current,i=(r=null!=(r=t.contextTypes))?r5(e,o):r4),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=o5,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function ie(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&o5.enqueueReplaceState(t,t.state,null)}function it(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=o6,oX(e);var i=t.contextType;"object"==typeof i&&null!==i?o.context=oV(i):(i=r9(t)?r8:r3.current,o.context=r5(e,i)),o.state=e.memoizedState,"function"==typeof(i=t.getDerivedStateFromProps)&&(o8(e,t,i,n),o.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(t=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&o5.enqueueReplaceState(o,o.state,null),o4(e,n,o,r),o.state=e.memoizedState),"function"==typeof o.componentDidMount&&(e.flags|=4194308)}function ir(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(d(309));var r=n.stateNode}if(!r)throw Error(d(147,e));var o=r,i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=o.refs;t===o6&&(t=o.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(d(284));if(!n._owner)throw Error(d(290,e))}return e}function io(e,t){throw Error(d(31,"[object Object]"===(e=Object.prototype.toString.call(t))?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ii(e){return(0,e._init)(e._payload)}function ia(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=le(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return(t.index=r,e)?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?(t=lo(n,e.mode,r)).return=e:(t=o(t,n)).return=e,t}function l(e,t,n,r){var i=n.type;return i===T?c(e,t,n.props.children,r,n.key):(null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===j&&ii(i)===t.type)?(r=o(t,n.props)).ref=ir(e,t,n):(r=lt(n.type,n.key,n.props,null,e.mode,r)).ref=ir(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=li(n,e.mode,r)).return=e:(t=o(t,n.children||[])).return=e,t}function c(e,t,n,r,i){return null===t||7!==t.tag?(t=ln(n,e.mode,r,i)).return=e:(t=o(t,n)).return=e,t}function f(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=lo(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case A:return(n=lt(t.type,t.key,t.props,null,e.mode,n)).ref=ir(e,null,t),n.return=e,n;case x:return(t=li(t,e.mode,n)).return=e,t;case j:return f(e,(0,t._init)(t._payload),n)}if(ey(t)||G(t))return(t=ln(t,e.mode,n,null)).return=e,t;io(e,t)}return null}function p(e,t,n,r){var o=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==o?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case A:return n.key===o?l(e,t,n,r):null;case x:return n.key===o?u(e,t,n,r):null;case j:return p(e,t,(o=n._init)(n._payload),r)}if(ey(n)||G(n))return null!==o?null:c(e,t,n,r,null);io(e,n)}return null}function h(e,t,n,r,o){if("string"==typeof r&&""!==r||"number"==typeof r)return s(t,e=e.get(n)||null,""+r,o);if("object"==typeof r&&null!==r){switch(r.$$typeof){case A:return l(t,e=e.get(null===r.key?n:r.key)||null,r,o);case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case j:return h(e,t,n,(0,r._init)(r._payload),o)}if(ey(r)||G(r))return c(t,e=e.get(n)||null,r,o,null);io(t,r)}return null}return function s(l,u,c,g){if("object"==typeof c&&null!==c&&c.type===T&&null===c.key&&(c=c.props.children),"object"==typeof c&&null!==c){switch(c.$$typeof){case A:e:{for(var m=c.key,y=u;null!==y;){if(y.key===m){if((m=c.type)===T){if(7===y.tag){n(l,y.sibling),(u=o(y,c.props.children)).return=l,l=u;break e}}else if(y.elementType===m||"object"==typeof m&&null!==m&&m.$$typeof===j&&ii(m)===y.type){n(l,y.sibling),(u=o(y,c.props)).ref=ir(l,y,c),u.return=l,l=u;break e}n(l,y);break}t(l,y),y=y.sibling}c.type===T?((u=ln(c.props.children,l.mode,g,c.key)).return=l,l=u):((g=lt(c.type,c.key,c.props,null,l.mode,g)).ref=ir(l,u,c),g.return=l,l=g)}return a(l);case x:e:{for(y=c.key;null!==u;){if(u.key===y){if(4===u.tag&&u.stateNode.containerInfo===c.containerInfo&&u.stateNode.implementation===c.implementation){n(l,u.sibling),(u=o(u,c.children||[])).return=l,l=u;break e}n(l,u);break}t(l,u),u=u.sibling}(u=li(c,l.mode,g)).return=l,l=u}return a(l);case j:return s(l,u,(y=c._init)(c._payload),g)}if(ey(c))return function(o,a,s,l){for(var u=null,c=null,d=a,g=a=0,m=null;null!==d&&g<s.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var y=p(o,d,s[g],l);if(null===y){null===d&&(d=m);break}e&&d&&null===y.alternate&&t(o,d),a=i(y,a,g),null===c?u=y:c.sibling=y,c=y,d=m}if(g===s.length)return n(o,d),oC&&ov(o,g),u;if(null===d){for(;g<s.length;g++)null!==(d=f(o,s[g],l))&&(a=i(d,a,g),null===c?u=d:c.sibling=d,c=d);return oC&&ov(o,g),u}for(d=r(o,d);g<s.length;g++)null!==(m=h(d,o,g,s[g],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),a=i(m,a,g),null===c?u=m:c.sibling=m,c=m);return e&&d.forEach(function(e){return t(o,e)}),oC&&ov(o,g),u}(l,u,c,g);if(G(c))return function(o,a,s,l){var u=G(s);if("function"!=typeof u)throw Error(d(150));if(null==(s=u.call(s)))throw Error(d(151));for(var c=u=null,g=a,m=a=0,y=null,v=s.next();null!==g&&!v.done;m++,v=s.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=p(o,g,v.value,l);if(null===b){null===g&&(g=y);break}e&&g&&null===b.alternate&&t(o,g),a=i(b,a,m),null===c?u=b:c.sibling=b,c=b,g=y}if(v.done)return n(o,g),oC&&ov(o,m),u;if(null===g){for(;!v.done;m++,v=s.next())null!==(v=f(o,v.value,l))&&(a=i(v,a,m),null===c?u=v:c.sibling=v,c=v);return oC&&ov(o,m),u}for(g=r(o,g);!v.done;m++,v=s.next())null!==(v=h(g,o,m,v.value,l))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),a=i(v,a,m),null===c?u=v:c.sibling=v,c=v);return e&&g.forEach(function(e){return t(o,e)}),oC&&ov(o,m),u}(l,u,c,g);io(l,c)}return"string"==typeof c&&""!==c||"number"==typeof c?(c=""+c,null!==u&&6===u.tag?(n(l,u.sibling),(u=o(u,c)).return=l):(n(l,u),(u=lo(c,l.mode,g)).return=l),a(l=u)):n(l,u)}}var is=ia(!0),il=ia(!1),iu={},ic=r0(iu),id=r0(iu),ip=r0(iu);function ih(e){if(e===iu)throw Error(d(174));return e}function ig(e,t){switch(r2(ip,t),r2(id,e),r2(ic,iu),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:eC(null,"");break;default:t=eC(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}r1(ic),r2(ic,t)}function im(){r1(ic),r1(id),r1(ip)}function iy(e){ih(ip.current);var t=ih(ic.current),n=eC(t,e.type);t!==n&&(r2(id,e),r2(ic,n))}function iv(e){id.current===e&&(r1(ic),r1(id))}var ib=r0(0);function i_(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var iw=[];function iS(){for(var e=0;e<iw.length;e++)iw[e]._workInProgressVersionPrimary=null;iw.length=0}var ik=R.ReactCurrentDispatcher,iC=R.ReactCurrentBatchConfig,iO=0,iE=null,iR=null,iA=null,ix=!1,iT=!1,iI=0,iP=0;function iM(){throw Error(d(321))}function iL(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!nK(e[n],t[n]))return!1;return!0}function iN(e,t,n,r,o,i){if(iO=i,iE=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ik.current=null===e||null===e.memoizedState?al:au,e=n(r,o),iT){i=0;do{if(iT=!1,iI=0,25<=i)throw Error(d(301));i+=1,iA=iR=null,t.updateQueue=null,ik.current=ac,e=n(r,o)}while(iT)}if(ik.current=as,t=null!==iR&&null!==iR.next,iO=0,iA=iR=iE=null,ix=!1,t)throw Error(d(300));return e}function iD(){var e=0!==iI;return iI=0,e}function iU(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===iA?iE.memoizedState=iA=e:iA=iA.next=e,iA}function iB(){if(null===iR){var e=iE.alternate;e=null!==e?e.memoizedState:null}else e=iR.next;var t=null===iA?iE.memoizedState:iA.next;if(null!==t)iA=t,iR=e;else{if(null===e)throw Error(d(310));e={memoizedState:(iR=e).memoizedState,baseState:iR.baseState,baseQueue:iR.baseQueue,queue:iR.queue,next:null},null===iA?iE.memoizedState=iA=e:iA=iA.next=e}return iA}function ij(e,t){return"function"==typeof t?t(e):t}function iF(e){var t=iB(),n=t.queue;if(null===n)throw Error(d(311));n.lastRenderedReducer=e;var r=iR,o=r.baseQueue,i=n.pending;if(null!==i){if(null!==o){var a=o.next;o.next=i.next,i.next=a}r.baseQueue=o=i,n.pending=null}if(null!==o){i=o.next,r=r.baseState;var s=a=null,l=null,u=i;do{var c=u.lane;if((iO&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(s=l=f,a=r):l=l.next=f,iE.lanes|=c,sm|=c}u=u.next}while(null!==u&&u!==i)null===l?a=r:l.next=s,nK(r,t.memoizedState)||(aw=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do i=o.lane,iE.lanes|=i,sm|=i,o=o.next;while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function iz(e){var t=iB(),n=t.queue;if(null===n)throw Error(d(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(null!==o){n.pending=null;var a=o=o.next;do i=e(i,a.action),a=a.next;while(a!==o)nK(i,t.memoizedState)||(aw=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function iG(){}function iH(e,t){var n=iE,r=iB(),o=t(),i=!nK(r.memoizedState,o);if(i&&(r.memoizedState=o,aw=!0),r=r.queue,i1(iW.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==iA&&1&iA.memoizedState.tag){if(n.flags|=2048,iJ(9,iV.bind(null,n,r,o,t),void 0,null),null===su)throw Error(d(349));0!=(30&iO)||iq(n,t,o)}return o}function iq(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=iE.updateQueue)?(t={lastEffect:null,stores:null},iE.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function iV(e,t,n,r){t.value=n,t.getSnapshot=r,i$(t)&&iQ(e)}function iW(e,t,n){return n(function(){i$(t)&&iQ(e)})}function i$(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!nK(e,n)}catch(e){return!0}}function iQ(e){var t=oK(e,1);null!==t&&sD(t,e,1,-1)}function iK(e){var t=iU();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ij,lastRenderedState:e},t.queue=e,e=e.dispatch=ar.bind(null,iE,e),[t.memoizedState,e]}function iJ(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=iE.updateQueue)?(t={lastEffect:null,stores:null},iE.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function iX(){return iB().memoizedState}function iY(e,t,n,r){var o=iU();iE.flags|=e,o.memoizedState=iJ(1|t,n,void 0,void 0===r?null:r)}function iZ(e,t,n,r){var o=iB();r=void 0===r?null:r;var i=void 0;if(null!==iR){var a=iR.memoizedState;if(i=a.destroy,null!==r&&iL(r,a.deps)){o.memoizedState=iJ(t,n,i,r);return}}iE.flags|=e,o.memoizedState=iJ(1|t,n,i,r)}function i0(e,t){return iY(8390656,8,e,t)}function i1(e,t){return iZ(2048,8,e,t)}function i2(e,t){return iZ(4,2,e,t)}function i4(e,t){return iZ(4,4,e,t)}function i3(e,t){return"function"==typeof t?(t(e=e()),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function i6(e,t,n){return n=null!=n?n.concat([e]):null,iZ(4,4,i3.bind(null,t,e),n)}function i8(){}function i5(e,t){var n=iB();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&iL(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function i9(e,t){var n=iB();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&iL(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function i7(e,t,n){return 0==(21&iO)?(e.baseState&&(e.baseState=!1,aw=!0),e.memoizedState=n):(nK(n,t)||(n=tb(),iE.lanes|=n,sm|=n,e.baseState=!0),t)}function ae(e,t){var n=tk;tk=0!==n&&4>n?n:4,e(!0);var r=iC.transition;iC.transition={};try{e(!1),t()}finally{tk=n,iC.transition=r}}function at(){return iB().memoizedState}function an(e,t,n){var r=sN(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ao(e)?ai(t,n):null!==(n=oQ(e,t,n,r))&&(sD(n,e,r,sL()),aa(n,t,r))}function ar(e,t,n){var r=sN(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ao(e))ai(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,nK(s,a)){var l=t.interleaved;null===l?(o.next=o,o$(t)):(o.next=l.next,l.next=o),t.interleaved=o;return}}catch(e){}finally{}null!==(n=oQ(e,t,o,r))&&(sD(n,e,r,o=sL()),aa(n,t,r))}}function ao(e){var t=e.alternate;return e===iE||null!==t&&t===iE}function ai(e,t){iT=ix=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function aa(e,t,n){if(0!=(4194240&n)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,tS(e,n)}}var as={readContext:oV,useCallback:iM,useContext:iM,useEffect:iM,useImperativeHandle:iM,useInsertionEffect:iM,useLayoutEffect:iM,useMemo:iM,useReducer:iM,useRef:iM,useState:iM,useDebugValue:iM,useDeferredValue:iM,useTransition:iM,useMutableSource:iM,useSyncExternalStore:iM,useId:iM,unstable_isNewReconciler:!1},al={readContext:oV,useCallback:function(e,t){return iU().memoizedState=[e,void 0===t?null:t],e},useContext:oV,useEffect:i0,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,iY(4194308,4,i3.bind(null,t,e),n)},useLayoutEffect:function(e,t){return iY(4194308,4,e,t)},useInsertionEffect:function(e,t){return iY(4,2,e,t)},useMemo:function(e,t){var n=iU();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=iU();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=an.bind(null,iE,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},iU().memoizedState=e},useState:iK,useDebugValue:i8,useDeferredValue:function(e){return iU().memoizedState=e},useTransition:function(){var e=iK(!1),t=e[0];return e=ae.bind(null,e[1]),iU().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=iE,o=iU();if(oC){if(void 0===n)throw Error(d(407));n=n()}else{if(n=t(),null===su)throw Error(d(349));0!=(30&iO)||iq(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,i0(iW.bind(null,r,i,e),[e]),r.flags|=2048,iJ(9,iV.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=iU(),t=su.identifierPrefix;if(oC){var n=oy,r=om;t=":"+t+"R"+(n=(r&~(1<<32-tf(r)-1)).toString(32)+n),0<(n=iI++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=iP++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},au={readContext:oV,useCallback:i5,useContext:oV,useEffect:i1,useImperativeHandle:i6,useInsertionEffect:i2,useLayoutEffect:i4,useMemo:i9,useReducer:iF,useRef:iX,useState:function(){return iF(ij)},useDebugValue:i8,useDeferredValue:function(e){return i7(iB(),iR.memoizedState,e)},useTransition:function(){return[iF(ij)[0],iB().memoizedState]},useMutableSource:iG,useSyncExternalStore:iH,useId:at,unstable_isNewReconciler:!1},ac={readContext:oV,useCallback:i5,useContext:oV,useEffect:i1,useImperativeHandle:i6,useInsertionEffect:i2,useLayoutEffect:i4,useMemo:i9,useReducer:iz,useRef:iX,useState:function(){return iz(ij)},useDebugValue:i8,useDeferredValue:function(e){var t=iB();return null===iR?t.memoizedState=e:i7(t,iR.memoizedState,e)},useTransition:function(){return[iz(ij)[0],iB().memoizedState]},useMutableSource:iG,useSyncExternalStore:iH,useId:at,unstable_isNewReconciler:!1};function af(e,t){try{var n="",r=t;do n+=function(e){switch(e.tag){case 5:return er(e.type);case 16:return er("Lazy");case 13:return er("Suspense");case 19:return er("SuspenseList");case 0:case 2:case 15:return e=ei(e.type,!1);case 11:return e=ei(e.type.render,!1);case 1:return e=ei(e.type,!0);default:return""}}(r),r=r.return;while(r)var o=n}catch(e){o="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:o,digest:null}}function ad(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ap(e,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var ah="function"==typeof WeakMap?WeakMap:Map;function ag(e,t,n){(n=oZ(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){sC||(sC=!0,sO=r),ap(e,t)},n}function am(e,t,n){(n=oZ(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){ap(e,t)}}var i=e.stateNode;return null!==i&&"function"==typeof i.componentDidCatch&&(n.callback=function(){ap(e,t),"function"!=typeof r&&(null===sE?sE=new Set([this]):sE.add(this));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}function ay(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ah;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=s4.bind(null,e,t,n),t.then(e,e))}function av(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e)return null}function ab(e,t,n,r,o){return 0==(1&e.mode)?e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=oZ(-1,1)).tag=2,o0(n,t,1))),n.lanes|=1):(e.flags|=65536,e.lanes=o),e}var a_=R.ReactCurrentOwner,aw=!1;function aS(e,t,n,r){t.child=null===e?il(t,null,n,r):is(t,e.child,n,r)}function ak(e,t,n,r,o){n=n.render;var i=t.ref;return(oq(t,o),r=iN(e,t,n,r,i,o),n=iD(),null===e||aw)?(oC&&n&&o_(t),t.flags|=1,aS(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,aG(e,t,o))}function aC(e,t,n,r,o){if(null===e){var i=n.type;return"function"!=typeof i||s7(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=lt(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,aO(e,t,i,r,o))}if(i=e.child,0==(e.lanes&o)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:nJ)(a,r)&&e.ref===t.ref)return aG(e,t,o)}return t.flags|=1,(e=le(i,r)).ref=t.ref,e.return=t,t.child=e}function aO(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(nJ(i,r)&&e.ref===t.ref){if(aw=!1,t.pendingProps=r=i,0==(e.lanes&o))return t.lanes=e.lanes,aG(e,t,o);0!=(131072&e.flags)&&(aw=!0)}}return aA(e,t,n,r,o)}function aE(e,t,n){var r=t.pendingProps,o=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0==(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r2(sp,sd),sd|=n;else{if(0==(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,r2(sp,sd),sd|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,r2(sp,sd),sd|=r}}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,r2(sp,sd),sd|=r;return aS(e,t,o,n),t.child}function aR(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function aA(e,t,n,r,o){var i=r9(n)?r8:r3.current;return(i=r5(t,i),oq(t,o),n=iN(e,t,n,r,i,o),r=iD(),null===e||aw)?(oC&&r&&o_(t),t.flags|=1,aS(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,aG(e,t,o))}function ax(e,t,n,r,o){if(r9(n)){var i=!0;on(t)}else i=!1;if(oq(t,o),null===t.stateNode)az(e,t),o7(t,n,r),it(t,n,r,o),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;u="object"==typeof u&&null!==u?oV(u):r5(t,u=r9(n)?r8:r3.current);var c=n.getDerivedStateFromProps,f="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;f||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==u)&&ie(t,a,r,u),oJ=!1;var d=t.memoizedState;a.state=d,o4(t,r,a,o),l=t.memoizedState,s!==r||d!==l||r6.current||oJ?("function"==typeof c&&(o8(t,n,c,r),l=t.memoizedState),(s=oJ||o9(t,n,s,r,d,l,u))?(f||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,oY(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:oD(t.type,s),a.props=u,f=t.pendingProps,d=a.context,l="object"==typeof(l=n.contextType)&&null!==l?oV(l):r5(t,l=r9(n)?r8:r3.current);var p=n.getDerivedStateFromProps;(c="function"==typeof p||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==f||d!==l)&&ie(t,a,r,l),oJ=!1,d=t.memoizedState,a.state=d,o4(t,r,a,o);var h=t.memoizedState;s!==f||d!==h||r6.current||oJ?("function"==typeof p&&(o8(t,n,p,r),h=t.memoizedState),(u=oJ||o9(t,n,u,r,d,h,l)||!1)?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,h,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,h,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=l,r=u):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return aT(e,t,n,r,i,o)}function aT(e,t,n,r,o,i){aR(e,t);var a=0!=(128&t.flags);if(!r&&!a)return o&&or(t,n,!1),aG(e,t,i);r=t.stateNode,a_.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=is(t,e.child,null,i),t.child=is(t,null,s,i)):aS(e,t,s,i),t.memoizedState=r.state,o&&or(t,n,!0),t.child}function aI(e){var t=e.stateNode;t.pendingContext?oe(e,t.pendingContext,t.pendingContext!==t.context):t.context&&oe(e,t.context,!1),ig(e,t.containerInfo)}function aP(e,t,n,r,o){return oM(),oL(o),t.flags|=256,aS(e,t,n,r),t.child}var aM={dehydrated:null,treeContext:null,retryLane:0};function aL(e){return{baseLanes:e,cachePool:null,transitions:null}}function aN(e,t,n){var r,o=t.pendingProps,i=ib.current,a=!1,s=0!=(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!=(2&i)),r?(a=!0,t.flags&=-129):(null===e||null!==e.memoizedState)&&(i|=1),r2(ib,1&i),null===e)return(ox(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated))?(0==(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=o.children,e=o.fallback,a?(o=t.mode,a=t.child,s={mode:"hidden",children:s},0==(1&o)&&null!==a?(a.childLanes=0,a.pendingProps=s):a=lr(s,o,0,null),e=ln(e,o,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=aL(n),t.memoizedState=aM,e):aD(t,s));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,n,r,o,i,a){if(n)return 256&t.flags?(t.flags&=-257,aU(e,t,a,r=ad(Error(d(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,o=t.mode,r=lr({mode:"visible",children:r.children},o,0,null),i=ln(i,o,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!=(1&t.mode)&&is(t,e.child,null,a),t.child.memoizedState=aL(a),t.memoizedState=aM,i);if(0==(1&t.mode))return aU(e,t,a,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var s=r.dgst;return r=s,aU(e,t,a,r=ad(i=Error(d(419)),r,void 0))}if(s=0!=(a&e.childLanes),aw||s){if(null!==(r=su)){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!=(o&(r.suspendedLanes|a))?0:o)&&o!==i.retryLane&&(i.retryLane=o,oK(e,o),sD(r,e,o,-1))}return sK(),aU(e,t,a,r=ad(Error(d(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=s6.bind(null,e),o._reactRetry=t,null):(e=i.treeContext,ok=rj(o.nextSibling),oS=t,oC=!0,oO=null,null!==e&&(op[oh++]=om,op[oh++]=oy,op[oh++]=og,om=e.id,oy=e.overflow,og=t),t=aD(t,r.children),t.flags|=4096,t)}(e,t,s,o,r,i,n);if(a){a=o.fallback,s=t.mode,r=(i=e.child).sibling;var l={mode:"hidden",children:o.children};return 0==(1&s)&&t.child!==i?((o=t.child).childLanes=0,o.pendingProps=l,t.deletions=null):(o=le(i,l)).subtreeFlags=14680064&i.subtreeFlags,null!==r?a=le(r,a):(a=ln(a,s,n,null),a.flags|=2),a.return=t,o.return=t,o.sibling=a,t.child=o,o=a,a=t.child,s=null===(s=e.child.memoizedState)?aL(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~n,t.memoizedState=aM,o}return e=(a=e.child).sibling,o=le(a,{mode:"visible",children:o.children}),0==(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function aD(e,t){return(t=lr({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function aU(e,t,n,r){return null!==r&&oL(r),is(t,e.child,null,n),e=aD(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function aB(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),oH(e.return,t,n)}function aj(e,t,n,r,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function aF(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(aS(e,t,r.children,n),0!=(2&(r=ib.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!=(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&aB(e,n,t);else if(19===e.tag)aB(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(r2(ib,r),0==(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(o=null,n=t.child;null!==n;)null!==(e=n.alternate)&&null===i_(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),aj(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===i_(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}aj(t,!0,n,null,i);break;case"together":aj(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function az(e,t){0==(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function aG(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),sm|=t.lanes,0==(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(d(153));if(null!==t.child){for(n=le(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=le(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function aH(e,t){if(!oC)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function aq(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}o=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},i=function(){},a=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,ih(ic.current);var i,a=null;switch(n){case"input":o=ef(e,o),r=ef(e,r),a=[];break;case"select":o=en({},o,{value:void 0}),r=en({},r,{value:void 0}),a=[];break;case"textarea":o=eb(e,o),r=eb(e,r),a=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(e.onclick=rx)}for(u in eL(n,r),n=null,o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u]){if("style"===u){var s=o[u];for(i in s)s.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(h.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null))}for(u in r){var l=r[u];if(s=null!=o?o[u]:void 0,r.hasOwnProperty(u)&&l!==s&&(null!=l||null!=s)){if("style"===u){if(s){for(i in s)!s.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&s[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(a||(a=[]),a.push(u,n)),n=l}else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,s=s?s.__html:void 0,null!=l&&s!==l&&(a=a||[]).push(u,l)):"children"===u?"string"!=typeof l&&"number"!=typeof l||(a=a||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(h.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&rg("scroll",e),a||s===l||(a=[])):(a=a||[]).push(u,l))}}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},s=function(e,t,n,r){n!==r&&(t.flags|=4)};var aV=!1,aW=!1,a$="function"==typeof WeakSet?WeakSet:Set,aQ=null;function aK(e,t){var n=e.ref;if(null!==n){if("function"==typeof n)try{n(null)}catch(n){s2(e,t,n)}else n.current=null}}function aJ(e,t,n){try{n()}catch(n){s2(e,t,n)}}var aX=!1;function aY(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,void 0!==i&&aJ(t,n,i)}o=o.next}while(o!==r)}}function aZ(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function a0(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function a1(e){return 5===e.tag||3===e.tag||4===e.tag}function a2(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||a1(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags||null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}var a4=null,a3=!1;function a6(e,t,n){for(n=n.child;null!==n;)a8(e,t,n),n=n.sibling}function a8(e,t,n){if(tc&&"function"==typeof tc.onCommitFiberUnmount)try{tc.onCommitFiberUnmount(tu,n)}catch(e){}switch(n.tag){case 5:aW||aK(n,t);case 6:var r=a4,o=a3;a4=null,a6(e,t,n),a4=r,a3=o,null!==a4&&(a3?(e=a4,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):a4.removeChild(n.stateNode));break;case 18:null!==a4&&(a3?(e=a4,n=n.stateNode,8===e.nodeType?rB(e.parentNode,n):1===e.nodeType&&rB(e,n),tW(e)):rB(a4,n.stateNode));break;case 4:r=a4,o=a3,a4=n.stateNode.containerInfo,a3=!0,a6(e,t,n),a4=r,a3=o;break;case 0:case 11:case 14:case 15:if(!aW&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){o=r=r.next;do{var i=o,a=i.destroy;i=i.tag,void 0!==a&&(0!=(2&i)?aJ(n,t,a):0!=(4&i)&&aJ(n,t,a)),o=o.next}while(o!==r)}a6(e,t,n);break;case 1:if(!aW&&(aK(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(e){s2(n,t,e)}a6(e,t,n);break;case 21:default:a6(e,t,n);break;case 22:1&n.mode?(aW=(r=aW)||null!==n.memoizedState,a6(e,t,n),aW=r):a6(e,t,n)}}function a5(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new a$),t.forEach(function(t){var r=s8.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function a9(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var i=t,a=i;e:for(;null!==a;){switch(a.tag){case 5:a4=a.stateNode,a3=!1;break e;case 3:case 4:a4=a.stateNode.containerInfo,a3=!0;break e}a=a.return}if(null===a4)throw Error(d(160));a8(e,i,o),a4=null,a3=!1;var s=o.alternate;null!==s&&(s.return=null),o.return=null}catch(e){s2(o,t,e)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)a7(t,e),t=t.sibling}function a7(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(a9(t,e),se(e),4&r){try{aY(3,e,e.return),aZ(3,e)}catch(t){s2(e,e.return,t)}try{aY(5,e,e.return)}catch(t){s2(e,e.return,t)}}break;case 1:a9(t,e),se(e),512&r&&null!==n&&aK(n,n.return);break;case 5:if(a9(t,e),se(e),512&r&&null!==n&&aK(n,n.return),32&e.flags){var o=e.stateNode;try{eA(o,"")}catch(t){s2(e,e.return,t)}}if(4&r&&null!=(o=e.stateNode)){var i=e.memoizedProps,a=null!==n?n.memoizedProps:i,s=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===s&&"radio"===i.type&&null!=i.name&&ep(o,i),eN(s,a);var u=eN(s,i);for(a=0;a<l.length;a+=2){var c=l[a],f=l[a+1];"style"===c?eP(o,f):"dangerouslySetInnerHTML"===c?eR(o,f):"children"===c?eA(o,f):E(o,c,f,u)}switch(s){case"input":eh(o,i);break;case"textarea":ew(o,i);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var h=i.value;null!=h?ev(o,!!i.multiple,h,!1):!!i.multiple!==p&&(null!=i.defaultValue?ev(o,!!i.multiple,i.defaultValue,!0):ev(o,!!i.multiple,i.multiple?[]:"",!1))}o[rH]=i}catch(t){s2(e,e.return,t)}}break;case 6:if(a9(t,e),se(e),4&r){if(null===e.stateNode)throw Error(d(162));o=e.stateNode,i=e.memoizedProps;try{o.nodeValue=i}catch(t){s2(e,e.return,t)}}break;case 3:if(a9(t,e),se(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{tW(t.containerInfo)}catch(t){s2(e,e.return,t)}break;case 4:default:a9(t,e),se(e);break;case 13:a9(t,e),se(e),8192&(o=e.child).flags&&(i=null!==o.memoizedState,o.stateNode.isHidden=i,i&&(null===o.alternate||null===o.alternate.memoizedState)&&(sw=tn())),4&r&&a5(e);break;case 22:if(c=null!==n&&null!==n.memoizedState,1&e.mode?(aW=(u=aW)||c,a9(t,e),aW=u):a9(t,e),se(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!c&&0!=(1&e.mode))for(aQ=e,c=e.child;null!==c;){for(f=aQ=c;null!==aQ;){switch(h=(p=aQ).child,p.tag){case 0:case 11:case 14:case 15:aY(4,p,p.return);break;case 1:aK(p,p.return);var g=p.stateNode;if("function"==typeof g.componentWillUnmount){r=p,n=p.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(e){s2(r,n,e)}}break;case 5:aK(p,p.return);break;case 22:if(null!==p.memoizedState){sn(f);continue}}null!==h?(h.return=p,aQ=h):sn(f)}c=c.sibling}e:for(c=null,f=e;;){if(5===f.tag){if(null===c){c=f;try{o=f.stateNode,u?(i=o.style,"function"==typeof i.setProperty?i.setProperty("display","none","important"):i.display="none"):(s=f.stateNode,a=null!=(l=f.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,s.style.display=eI("display",a))}catch(t){s2(e,e.return,t)}}}else if(6===f.tag){if(null===c)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(t){s2(e,e.return,t)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:a9(t,e),se(e),4&r&&a5(e);case 21:}}function se(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(a1(n)){var r=n;break e}n=n.return}throw Error(d(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(eA(o,""),r.flags&=-33);var i=a2(e);!function e(t,n,r){var o=t.tag;if(5===o||6===o)t=t.stateNode,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==o&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,i,o);break;case 3:case 4:var a=r.stateNode.containerInfo,s=a2(e);!function e(t,n,r){var o=t.tag;if(5===o||6===o)t=t.stateNode,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode).insertBefore(t,r):(n=r).appendChild(t),null!=(r=r._reactRootContainer)||null!==n.onclick||(n.onclick=rx));else if(4!==o&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,s,a);break;default:throw Error(d(161))}}catch(t){s2(e,e.return,t)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function st(e){for(;null!==aQ;){var t=aQ;if(0!=(8772&t.flags)){var n=t.alternate;try{if(0!=(8772&t.flags))switch(t.tag){case 0:case 11:case 15:aW||aZ(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!aW){if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:oD(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}}var i=t.updateQueue;null!==i&&o3(t,i,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}o3(t,a,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var c=u.memoizedState;if(null!==c){var f=c.dehydrated;null!==f&&tW(f)}}}break;default:throw Error(d(163))}aW||512&t.flags&&a0(t)}catch(e){s2(t,t.return,e)}}if(t===e){aQ=null;break}if(null!==(n=t.sibling)){n.return=t.return,aQ=n;break}aQ=t.return}}function sn(e){for(;null!==aQ;){var t=aQ;if(t===e){aQ=null;break}var n=t.sibling;if(null!==n){n.return=t.return,aQ=n;break}aQ=t.return}}function sr(e){for(;null!==aQ;){var t=aQ;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{aZ(4,t)}catch(e){s2(t,n,e)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(e){s2(t,o,e)}}var i=t.return;try{a0(t)}catch(e){s2(t,i,e)}break;case 5:var a=t.return;try{a0(t)}catch(e){s2(t,a,e)}}}catch(e){s2(t,t.return,e)}if(t===e){aQ=null;break}var s=t.sibling;if(null!==s){s.return=t.return,aQ=s;break}aQ=t.return}}var so=Math.ceil,si=R.ReactCurrentDispatcher,sa=R.ReactCurrentOwner,ss=R.ReactCurrentBatchConfig,sl=0,su=null,sc=null,sf=0,sd=0,sp=r0(0),sh=0,sg=null,sm=0,sy=0,sv=0,sb=null,s_=null,sw=0,sS=1/0,sk=null,sC=!1,sO=null,sE=null,sR=!1,sA=null,sx=0,sT=0,sI=null,sP=-1,sM=0;function sL(){return 0!=(6&sl)?tn():-1!==sP?sP:sP=tn()}function sN(e){return 0==(1&e.mode)?1:0!=(2&sl)&&0!==sf?sf&-sf:null!==oN.transition?(0===sM&&(sM=tb()),sM):0!==(e=tk)?e:e=void 0===(e=window.event)?16:t0(e.type)}function sD(e,t,n,r){if(50<sT)throw sT=0,sI=null,Error(d(185));tw(e,n,r),(0==(2&sl)||e!==su)&&(e===su&&(0==(2&sl)&&(sy|=n),4===sh&&sz(e,sf)),sU(e,r),1===n&&0===sl&&0==(1&t.mode)&&(sS=tn()+500,oi&&ol()))}function sU(e,t){var n,r,o,i=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-tf(i),s=1<<a,l=o[a];-1===l?(0==(s&n)||0!=(s&r))&&(o[a]=function(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return -1}}(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var a=ty(e,e===su?sf:0);if(0===a)null!==i&&e7(i),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(null!=i&&e7(i),1===t)0===e.tag?(o=sG.bind(null,e),oi=!0,os(o)):os(sG.bind(null,e)),rD(function(){0==(6&sl)&&ol()}),i=null;else{switch(tC(a)){case 1:i=to;break;case 4:i=ti;break;case 16:default:i=ta;break;case 536870912:i=tl}i=e9(i,sB.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function sB(e,t){if(sP=-1,sM=0,0!=(6&sl))throw Error(d(327));var n=e.callbackNode;if(s0()&&e.callbackNode!==n)return null;var r=ty(e,e===su?sf:0);if(0===r)return null;if(0!=(30&r)||0!=(r&e.expiredLanes)||t)t=sJ(e,r);else{t=r;var o=sl;sl|=2;var i=sQ();for((su!==e||sf!==t)&&(sk=null,sS=tn()+500,sW(e,t));;)try{(function(){for(;null!==sc&&!te();)sX(sc)})();break}catch(t){s$(e,t)}oz(),si.current=i,sl=o,null!==sc?t=0:(su=null,sf=0,t=sh)}if(0!==t){if(2===t&&0!==(o=tv(e))&&(r=o,t=sj(e,o)),1===t)throw n=sg,sW(e,0),sz(e,r),sU(e,tn()),n;if(6===t)sz(e,r);else{if(o=e.current.alternate,0==(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!nK(i(),o))return!1}catch(e){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=sJ(e,r))&&0!==(i=tv(e))&&(r=i,t=sj(e,i)),1===t))throw n=sg,sW(e,0),sz(e,r),sU(e,tn()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(d(345));case 2:case 5:sZ(e,s_,sk);break;case 3:if(sz(e,r),(130023424&r)===r&&10<(t=sw+500-tn())){if(0!==ty(e,0))break;if(((o=e.suspendedLanes)&r)!==r){sL(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=rM(sZ.bind(null,e,s_,sk),t);break}sZ(e,s_,sk);break;case 4:if(sz(e,r),(4194240&r)===r)break;for(o=-1,t=e.eventTimes;0<r;){var a=31-tf(r);i=1<<a,(a=t[a])>o&&(o=a),r&=~i}if(r=o,10<(r=(120>(r=tn()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*so(r/1960))-r)){e.timeoutHandle=rM(sZ.bind(null,e,s_,sk),r);break}sZ(e,s_,sk);break;default:throw Error(d(329))}}}return sU(e,tn()),e.callbackNode===n?sB.bind(null,e):null}function sj(e,t){var n=sb;return e.current.memoizedState.isDehydrated&&(sW(e,t).flags|=256),2!==(e=sJ(e,t))&&(t=s_,s_=n,null!==t&&sF(t)),e}function sF(e){null===s_?s_=e:s_.push.apply(s_,e)}function sz(e,t){for(t&=~sv,t&=~sy,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-tf(t),r=1<<n;e[n]=-1,t&=~r}}function sG(e){if(0!=(6&sl))throw Error(d(327));s0();var t=ty(e,0);if(0==(1&t))return sU(e,tn()),null;var n=sJ(e,t);if(0!==e.tag&&2===n){var r=tv(e);0!==r&&(t=r,n=sj(e,r))}if(1===n)throw n=sg,sW(e,0),sz(e,t),sU(e,tn()),n;if(6===n)throw Error(d(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,sZ(e,s_,sk),sU(e,tn()),null}function sH(e,t){var n=sl;sl|=1;try{return e(t)}finally{0===(sl=n)&&(sS=tn()+500,oi&&ol())}}function sq(e){null!==sA&&0===sA.tag&&0==(6&sl)&&s0();var t=sl;sl|=1;var n=ss.transition,r=tk;try{if(ss.transition=null,tk=1,e)return e()}finally{tk=r,ss.transition=n,0==(6&(sl=t))&&ol()}}function sV(){sd=sp.current,r1(sp)}function sW(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rL(n)),null!==sc)for(n=sc.return;null!==n;){var r=n;switch(ow(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&r7();break;case 3:im(),r1(r6),r1(r3),iS();break;case 5:iv(r);break;case 4:im();break;case 13:case 19:r1(ib);break;case 10:oG(r.type._context);break;case 22:case 23:sV()}n=n.return}if(su=e,sc=e=le(e.current,null),sf=sd=t,sh=0,sg=null,sv=sy=sm=0,s_=sb=null,null!==oW){for(t=0;t<oW.length;t++)if(null!==(r=(n=oW[t]).interleaved)){n.interleaved=null;var o=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=o,r.next=a}n.pending=r}oW=null}return e}function s$(e,t){for(;;){var n=sc;try{if(oz(),ik.current=as,ix){for(var r=iE.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}ix=!1}if(iO=0,iA=iR=iE=null,iT=!1,iI=0,sa.current=null,null===n||null===n.return){sh=1,sg=t,sc=null;break}e:{var i=e,a=n.return,s=n,l=t;if(t=sf,s.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l,c=s,f=c.tag;if(0==(1&c.mode)&&(0===f||11===f||15===f)){var p=c.alternate;p?(c.updateQueue=p.updateQueue,c.memoizedState=p.memoizedState,c.lanes=p.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=av(a);if(null!==h){h.flags&=-257,ab(h,a,s,i,t),1&h.mode&&ay(i,u,t),t=h,l=u;var g=t.updateQueue;if(null===g){var m=new Set;m.add(l),t.updateQueue=m}else g.add(l);break e}if(0==(1&t)){ay(i,u,t),sK();break e}l=Error(d(426))}else if(oC&&1&s.mode){var y=av(a);if(null!==y){0==(65536&y.flags)&&(y.flags|=256),ab(y,a,s,i,t),oL(af(l,s));break e}}i=l=af(l,s),4!==sh&&(sh=2),null===sb?sb=[i]:sb.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=ag(i,l,t);o2(i,v);break e;case 1:s=l;var b=i.type,_=i.stateNode;if(0==(128&i.flags)&&("function"==typeof b.getDerivedStateFromError||null!==_&&"function"==typeof _.componentDidCatch&&(null===sE||!sE.has(_)))){i.flags|=65536,t&=-t,i.lanes|=t;var w=am(i,s,t);o2(i,w);break e}}i=i.return}while(null!==i)}sY(n)}catch(e){t=e,sc===n&&null!==n&&(sc=n=n.return);continue}break}}function sQ(){var e=si.current;return si.current=as,null===e?as:e}function sK(){(0===sh||3===sh||2===sh)&&(sh=4),null===su||0==(268435455&sm)&&0==(268435455&sy)||sz(su,sf)}function sJ(e,t){var n=sl;sl|=2;var r=sQ();for((su!==e||sf!==t)&&(sk=null,sW(e,t));;)try{(function(){for(;null!==sc;)sX(sc)})();break}catch(t){s$(e,t)}if(oz(),sl=n,si.current=r,null!==sc)throw Error(d(261));return su=null,sf=0,sh}function sX(e){var t=l(e.alternate,e,sd);e.memoizedProps=e.pendingProps,null===t?sY(e):sc=t,sa.current=null}function sY(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(32768&t.flags)){if(null!==(n=function(e,t,n){var r=t.pendingProps;switch(ow(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return aq(t),null;case 1:case 17:return r9(t.type)&&r7(),aq(t),null;case 3:return r=t.stateNode,im(),r1(r6),r1(r3),iS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(null===e||null===e.child)&&(oI(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0==(256&t.flags)||(t.flags|=1024,null!==oO&&(sF(oO),oO=null))),i(e,t),aq(t),null;case 5:iv(t);var l=ih(ip.current);if(n=t.type,null!==e&&null!=t.stateNode)a(e,t,n,r,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(d(166));return aq(t),null}if(e=ih(ic.current),oI(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[rG]=t,r[rH]=u,e=0!=(1&t.mode),n){case"dialog":rg("cancel",r),rg("close",r);break;case"iframe":case"object":case"embed":rg("load",r);break;case"video":case"audio":for(l=0;l<rf.length;l++)rg(rf[l],r);break;case"source":rg("error",r);break;case"img":case"image":case"link":rg("error",r),rg("load",r);break;case"details":rg("toggle",r);break;case"input":ed(r,u),rg("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},rg("invalid",r);break;case"textarea":e_(r,u),rg("invalid",r)}for(var c in eL(n,u),l=null,u)if(u.hasOwnProperty(c)){var f=u[c];"children"===c?"string"==typeof f?r.textContent!==f&&(!0!==u.suppressHydrationWarning&&rA(r.textContent,f,e),l=["children",f]):"number"==typeof f&&r.textContent!==""+f&&(!0!==u.suppressHydrationWarning&&rA(r.textContent,f,e),l=["children",""+f]):h.hasOwnProperty(c)&&null!=f&&"onScroll"===c&&rg("scroll",r)}switch(n){case"input":el(r),eg(r,u,!0);break;case"textarea":el(r),eS(r);break;case"select":case"option":break;default:"function"==typeof u.onClick&&(r.onclick=rx)}r=l,t.updateQueue=r,null!==r&&(t.flags|=4)}else{c=9===l.nodeType?l:l.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ek(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script></script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[rG]=t,e[rH]=r,o(e,t,!1,!1),t.stateNode=e;e:{switch(c=eN(n,r),n){case"dialog":rg("cancel",e),rg("close",e),l=r;break;case"iframe":case"object":case"embed":rg("load",e),l=r;break;case"video":case"audio":for(l=0;l<rf.length;l++)rg(rf[l],e);l=r;break;case"source":rg("error",e),l=r;break;case"img":case"image":case"link":rg("error",e),rg("load",e),l=r;break;case"details":rg("toggle",e),l=r;break;case"input":ed(e,r),l=ef(e,r),rg("invalid",e);break;case"option":default:l=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=en({},r,{value:void 0}),rg("invalid",e);break;case"textarea":e_(e,r),l=eb(e,r),rg("invalid",e)}for(u in eL(n,l),f=l)if(f.hasOwnProperty(u)){var p=f[u];"style"===u?eP(e,p):"dangerouslySetInnerHTML"===u?null!=(p=p?p.__html:void 0)&&eR(e,p):"children"===u?"string"==typeof p?("textarea"!==n||""!==p)&&eA(e,p):"number"==typeof p&&eA(e,""+p):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(h.hasOwnProperty(u)?null!=p&&"onScroll"===u&&rg("scroll",e):null!=p&&E(e,u,p,c))}switch(n){case"input":el(e),eg(e,r,!1);break;case"textarea":el(e),eS(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ea(r.value));break;case"select":e.multiple=!!r.multiple,null!=(u=r.value)?ev(e,!!r.multiple,u,!1):null!=r.defaultValue&&ev(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof l.onClick&&(e.onclick=rx)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return aq(t),null;case 6:if(e&&null!=t.stateNode)s(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(d(166));if(n=ih(ip.current),ih(ic.current),oI(t)){if(r=t.stateNode,n=t.memoizedProps,r[rG]=t,(u=r.nodeValue!==n)&&null!==(e=oS))switch(e.tag){case 3:rA(r.nodeValue,n,0!=(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&rA(r.nodeValue,n,0!=(1&e.mode))}u&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[rG]=t,t.stateNode=r}return aq(t),null;case 13:if(r1(ib),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(oC&&null!==ok&&0!=(1&t.mode)&&0==(128&t.flags))oP(),oM(),t.flags|=98560,u=!1;else if(u=oI(t),null!==r&&null!==r.dehydrated){if(null===e){if(!u)throw Error(d(318));if(!(u=null!==(u=t.memoizedState)?u.dehydrated:null))throw Error(d(317));u[rG]=t}else oM(),0==(128&t.flags)&&(t.memoizedState=null),t.flags|=4;aq(t),u=!1}else null!==oO&&(sF(oO),oO=null),u=!0;if(!u)return 65536&t.flags?t:null}if(0!=(128&t.flags))return t.lanes=n,t;return(r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!=(1&t.mode)&&(null===e||0!=(1&ib.current)?0===sh&&(sh=3):sK())),null!==t.updateQueue&&(t.flags|=4),aq(t),null;case 4:return im(),i(e,t),null===e&&rv(t.stateNode.containerInfo),aq(t),null;case 10:return oG(t.type._context),aq(t),null;case 19:if(r1(ib),null===(u=t.memoizedState))return aq(t),null;if(r=0!=(128&t.flags),null===(c=u.rendering)){if(r)aH(u,!1);else{if(0!==sh||null!==e&&0!=(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=i_(e))){for(t.flags|=128,aH(u,!1),null!==(r=c.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)u=n,e=r,u.flags&=14680066,null===(c=u.alternate)?(u.childLanes=0,u.lanes=e,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,e=c.dependencies,u.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return r2(ib,1&ib.current|2),t.child}e=e.sibling}null!==u.tail&&tn()>sS&&(t.flags|=128,r=!0,aH(u,!1),t.lanes=4194304)}}else{if(!r){if(null!==(e=i_(c))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),aH(u,!0),null===u.tail&&"hidden"===u.tailMode&&!c.alternate&&!oC)return aq(t),null}else 2*tn()-u.renderingStartTime>sS&&1073741824!==n&&(t.flags|=128,r=!0,aH(u,!1),t.lanes=4194304)}u.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=u.last)?n.sibling=c:t.child=c,u.last=c)}if(null!==u.tail)return t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=tn(),t.sibling=null,n=ib.current,r2(ib,r?1&n|2:1&n),t;return aq(t),null;case 22:case 23:return sV(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!=(1&t.mode)?0!=(1073741824&sd)&&(aq(t),6&t.subtreeFlags&&(t.flags|=8192)):aq(t),null;case 24:case 25:return null}throw Error(d(156,t.tag))}(n,t,sd))){sc=n;return}}else{if(null!==(n=function(e,t){switch(ow(t),t.tag){case 1:return r9(t.type)&&r7(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return im(),r1(r6),r1(r3),iS(),0!=(65536&(e=t.flags))&&0==(128&e)?(t.flags=-65537&e|128,t):null;case 5:return iv(t),null;case 13:if(r1(ib),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(d(340));oM()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return r1(ib),null;case 4:return im(),null;case 10:return oG(t.type._context),null;case 22:case 23:return sV(),null;default:return null}}(n,t))){n.flags&=32767,sc=n;return}if(null!==e)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{sh=6,sc=null;return}}if(null!==(t=t.sibling)){sc=t;return}sc=t=e}while(null!==t)0===sh&&(sh=5)}function sZ(e,t,n){var r=tk,o=ss.transition;try{ss.transition=null,tk=1,function(e,t,n,r){do s0();while(null!==sA)if(0!=(6&sl))throw Error(d(327));n=e.finishedWork;var o=e.finishedLanes;if(null!==n){if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(d(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-tf(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}(e,i),e===su&&(sc=su=null,sf=0),0==(2064&n.subtreeFlags)&&0==(2064&n.flags)||sR||(sR=!0,a=ta,s=function(){return s0(),null},e9(a,s)),i=0!=(15990&n.flags),0!=(15990&n.subtreeFlags)||i){i=ss.transition,ss.transition=null;var a,s,l,u,c,f=tk;tk=1;var p=sl;sl|=4,sa.current=null,function(e,t){if(rT=tQ,n0(e=nZ())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o,i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(e){n=null;break e}var s=0,l=-1,u=-1,c=0,f=0,p=e,h=null;t:for(;;){for(;p!==n||0!==i&&3!==p.nodeType||(l=s+i),p!==a||0!==r&&3!==p.nodeType||(u=s+r),3===p.nodeType&&(s+=p.nodeValue.length),null!==(o=p.firstChild);)h=p,p=o;for(;;){if(p===e)break t;if(h===n&&++c===i&&(l=s),h===a&&++f===r&&(u=s),null!==(o=p.nextSibling))break;h=(p=h).parentNode}p=o}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(rI={focusedElem:e,selectionRange:n},tQ=!1,aQ=t;null!==aQ;)if(e=(t=aQ).child,0!=(1028&t.subtreeFlags)&&null!==e)e.return=t,aQ=e;else for(;null!==aQ;){t=aQ;try{var g=t.alternate;if(0!=(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:oD(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(d(163))}}catch(e){s2(t,t.return,e)}if(null!==(e=t.sibling)){e.return=t.return,aQ=e;break}aQ=t.return}g=aX,aX=!1}(e,n),a7(n,e),function(e){var t=nZ(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&function e(t,n){return!!t&&!!n&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(n.ownerDocument.documentElement,n)){if(null!==r&&n0(n)){if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=void 0===r.end?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=nY(n,i);var a=nY(n,r);o&&a&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}(rI),tQ=!!rT,rI=rT=null,e.current=n,l=n,u=e,c=o,aQ=l,function e(t,n,r){for(var o=0!=(1&t.mode);null!==aQ;){var i=aQ,a=i.child;if(22===i.tag&&o){var s=null!==i.memoizedState||aV;if(!s){var l=i.alternate,u=null!==l&&null!==l.memoizedState||aW;l=aV;var c=aW;if(aV=s,(aW=u)&&!c)for(aQ=i;null!==aQ;)u=(s=aQ).child,22===s.tag&&null!==s.memoizedState?sr(i):null!==u?(u.return=s,aQ=u):sr(i);for(;null!==a;)aQ=a,e(a,n,r),a=a.sibling;aQ=i,aV=l,aW=c}st(t,n,r)}else 0!=(8772&i.subtreeFlags)&&null!==a?(a.return=i,aQ=a):st(t,n,r)}}(l,u,c),tt(),sl=p,tk=f,ss.transition=i}else e.current=n;if(sR&&(sR=!1,sA=e,sx=o),0===(i=e.pendingLanes)&&(sE=null),function(e){if(tc&&"function"==typeof tc.onCommitFiberRoot)try{tc.onCommitFiberRoot(tu,e,void 0,128==(128&e.current.flags))}catch(e){}}(n.stateNode,r),sU(e,tn()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((o=t[n]).value,{componentStack:o.stack,digest:o.digest});if(sC)throw sC=!1,e=sO,sO=null,e;0!=(1&sx)&&0!==e.tag&&s0(),0!=(1&(i=e.pendingLanes))?e===sI?sT++:(sT=0,sI=e):sT=0,ol()}}(e,t,n,r)}finally{ss.transition=o,tk=r}return null}function s0(){if(null!==sA){var e=tC(sx),t=ss.transition,n=tk;try{if(ss.transition=null,tk=16>e?16:e,null===sA)var r=!1;else{if(e=sA,sA=null,sx=0,0!=(6&sl))throw Error(d(331));var o=sl;for(sl|=4,aQ=e.current;null!==aQ;){var i=aQ,a=i.child;if(0!=(16&aQ.flags)){var s=i.deletions;if(null!==s){for(var l=0;l<s.length;l++){var u=s[l];for(aQ=u;null!==aQ;){var c=aQ;switch(c.tag){case 0:case 11:case 15:aY(8,c,i)}var f=c.child;if(null!==f)f.return=c,aQ=f;else for(;null!==aQ;){var p=(c=aQ).sibling,h=c.return;if(function e(t){var n=t.alternate;null!==n&&(t.alternate=null,e(n)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&null!==(n=t.stateNode)&&(delete n[rG],delete n[rH],delete n[rV],delete n[rW],delete n[r$]),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}(c),c===u){aQ=null;break}if(null!==p){p.return=h,aQ=p;break}aQ=h}}}var g=i.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}aQ=i}}if(0!=(2064&i.subtreeFlags)&&null!==a)a.return=i,aQ=a;else for(;null!==aQ;){if(i=aQ,0!=(2048&i.flags))switch(i.tag){case 0:case 11:case 15:aY(9,i,i.return)}var v=i.sibling;if(null!==v){v.return=i.return,aQ=v;break}aQ=i.return}}var b=e.current;for(aQ=b;null!==aQ;){var _=(a=aQ).child;if(0!=(2064&a.subtreeFlags)&&null!==_)_.return=a,aQ=_;else for(a=b;null!==aQ;){if(s=aQ,0!=(2048&s.flags))try{switch(s.tag){case 0:case 11:case 15:aZ(9,s)}}catch(e){s2(s,s.return,e)}if(s===a){aQ=null;break}var w=s.sibling;if(null!==w){w.return=s.return,aQ=w;break}aQ=s.return}}if(sl=o,ol(),tc&&"function"==typeof tc.onPostCommitFiberRoot)try{tc.onPostCommitFiberRoot(tu,e)}catch(e){}r=!0}return r}finally{tk=n,ss.transition=t}}return!1}function s1(e,t,n){t=ag(e,t=af(n,t),1),e=o0(e,t,1),t=sL(),null!==e&&(tw(e,1,t),sU(e,t))}function s2(e,t,n){if(3===e.tag)s1(e,e,n);else for(;null!==t;){if(3===t.tag){s1(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===sE||!sE.has(r))){e=am(t,e=af(n,e),1),t=o0(t,e,1),e=sL(),null!==t&&(tw(t,1,e),sU(t,e));break}}t=t.return}}function s4(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=sL(),e.pingedLanes|=e.suspendedLanes&n,su===e&&(sf&n)===n&&(4===sh||3===sh&&(130023424&sf)===sf&&500>tn()-sw?sW(e,0):sv|=n),sU(e,t)}function s3(e,t){0===t&&(0==(1&e.mode)?t=1:(t=tg,0==(130023424&(tg<<=1))&&(tg=4194304)));var n=sL();null!==(e=oK(e,t))&&(tw(e,t,n),sU(e,n))}function s6(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),s3(e,n)}function s8(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(d(314))}null!==r&&r.delete(t),s3(e,n)}function s5(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function s9(e,t,n,r){return new s5(e,t,n,r)}function s7(e){return!(!(e=e.prototype)||!e.isReactComponent)}function le(e,t){var n=e.alternate;return null===n?((n=s9(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function lt(e,t,n,r,o,i){var a=2;if(r=e,"function"==typeof e)s7(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case T:return ln(n.children,o,i,t);case I:a=8,o|=8;break;case P:return(e=s9(12,n,t,2|o)).elementType=P,e.lanes=i,e;case D:return(e=s9(13,n,t,o)).elementType=D,e.lanes=i,e;case U:return(e=s9(19,n,t,o)).elementType=U,e.lanes=i,e;case F:return lr(n,o,i,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case M:a=10;break e;case L:a=9;break e;case N:a=11;break e;case B:a=14;break e;case j:a=16,r=null;break e}throw Error(d(130,null==e?e:typeof e,""))}return(t=s9(a,n,t,o)).elementType=e,t.type=r,t.lanes=i,t}function ln(e,t,n,r){return(e=s9(7,e,r,t)).lanes=n,e}function lr(e,t,n,r){return(e=s9(22,e,r,t)).elementType=F,e.lanes=n,e.stateNode={isHidden:!1},e}function lo(e,t,n){return(e=s9(6,e,null,t)).lanes=n,e}function li(e,t,n){return(t=s9(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function la(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=t_(0),this.expirationTimes=t_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=t_(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function ls(e,t,n,r,o,i,a,s,l){return e=new la(e,t,n,s,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=s9(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},oX(i),e}function ll(e){if(!e)return r4;e=e._reactInternals;e:{if(e3(e)!==e||1!==e.tag)throw Error(d(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(r9(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t)throw Error(d(171))}if(1===e.tag){var n=e.type;if(r9(n))return ot(e,n,t)}return t}function lu(e,t,n,r,o,i,a,s,l){return(e=ls(n,r,!0,e,o,i,a,s,l)).context=ll(null),n=e.current,(i=oZ(r=sL(),o=sN(n))).callback=null!=t?t:null,o0(n,i,o),e.current.lanes=o,tw(e,o,r),sU(e,r),e}function lc(e,t,n,r){var o=t.current,i=sL(),a=sN(o);return n=ll(n),null===t.context?t.context=n:t.pendingContext=n,(t=oZ(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=o0(o,t,a))&&(sD(e,o,a,i),o1(e,o,a)),a}function lf(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function ld(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function lp(e,t){ld(e,t),(e=e.alternate)&&ld(e,t)}l=function(e,t,n){if(null!==e){if(e.memoizedProps!==t.pendingProps||r6.current)aw=!0;else{if(0==(e.lanes&n)&&0==(128&t.flags))return aw=!1,function(e,t,n){switch(t.tag){case 3:aI(t),oM();break;case 5:iy(t);break;case 1:r9(t.type)&&on(t);break;case 4:ig(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;r2(oU,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState)){if(null!==r.dehydrated)return r2(ib,1&ib.current),t.flags|=128,null;if(0!=(n&t.child.childLanes))return aN(e,t,n);return r2(ib,1&ib.current),null!==(e=aG(e,t,n))?e.sibling:null}r2(ib,1&ib.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(128&e.flags)){if(r)return aF(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),r2(ib,ib.current),!r)return null;break;case 22:case 23:return t.lanes=0,aE(e,t,n)}return aG(e,t,n)}(e,t,n);aw=0!=(131072&e.flags)}}else aw=!1,oC&&0!=(1048576&t.flags)&&ob(t,od,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;az(e,t),e=t.pendingProps;var o=r5(t,r3.current);oq(t,n),o=iN(null,t,r,e,o,n);var i=iD();return t.flags|=1,"object"==typeof o&&null!==o&&"function"==typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,r9(r)?(i=!0,on(t)):i=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,oX(t),o.updater=o5,t.stateNode=o,o._reactInternals=t,it(t,r,e,n),t=aT(null,t,r,!0,i,n)):(t.tag=0,oC&&i&&o_(t),aS(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(az(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"==typeof e)return s7(e)?1:0;if(null!=e){if((e=e.$$typeof)===N)return 11;if(e===B)return 14}return 2}(r),e=oD(r,e),o){case 0:t=aA(null,t,r,e,n);break e;case 1:t=ax(null,t,r,e,n);break e;case 11:t=ak(null,t,r,e,n);break e;case 14:t=aC(null,t,r,oD(r.type,e),n);break e}throw Error(d(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:oD(r,o),aA(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:oD(r,o),ax(e,t,r,o,n);case 3:e:{if(aI(t),null===e)throw Error(d(387));r=t.pendingProps,o=(i=t.memoizedState).element,oY(e,t),o4(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){o=af(Error(d(423)),t),t=aP(e,t,r,n,o);break e}if(r!==o){o=af(Error(d(424)),t),t=aP(e,t,r,n,o);break e}for(ok=rj(t.stateNode.containerInfo.firstChild),oS=t,oC=!0,oO=null,n=il(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(oM(),r===o){t=aG(e,t,n);break e}aS(e,t,r,n)}t=t.child}return t;case 5:return iy(t),null===e&&ox(t),r=t.type,o=t.pendingProps,i=null!==e?e.memoizedProps:null,a=o.children,rP(r,o)?a=null:null!==i&&rP(r,i)&&(t.flags|=32),aR(e,t),aS(e,t,a,n),t.child;case 6:return null===e&&ox(t),null;case 13:return aN(e,t,n);case 4:return ig(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=is(t,null,r,n):aS(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:oD(r,o),ak(e,t,r,o,n);case 7:return aS(e,t,t.pendingProps,n),t.child;case 8:case 12:return aS(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,i=t.memoizedProps,a=o.value,r2(oU,r._currentValue),r._currentValue=a,null!==i){if(nK(i.value,a)){if(i.children===o.children&&!r6.current){t=aG(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var s=i.dependencies;if(null!==s){a=i.child;for(var l=s.firstContext;null!==l;){if(l.context===r){if(1===i.tag){(l=oZ(-1,n&-n)).tag=2;var u=i.updateQueue;if(null!==u){var c=(u=u.shared).pending;null===c?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),oH(i.return,n,t),s.lanes|=n;break}l=l.next}}else if(10===i.tag)a=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(a=i.return))throw Error(d(341));a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),oH(a,n,t),a=i.sibling}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===t){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}}aS(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,oq(t,n),r=r(o=oV(o)),t.flags|=1,aS(e,t,r,n),t.child;case 14:return o=oD(r=t.type,t.pendingProps),o=oD(r.type,o),aC(e,t,r,o,n);case 15:return aO(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:oD(r,o),az(e,t),t.tag=1,r9(r)?(e=!0,on(t)):e=!1,oq(t,n),o7(t,r,o),it(t,r,o,n),aT(null,t,r,!0,e,n);case 19:return aF(e,t,n);case 22:return aE(e,t,n)}throw Error(d(156,t.tag))};var lh="function"==typeof reportError?reportError:function(e){console.error(e)};function lg(e){this._internalRoot=e}function lm(e){this._internalRoot=e}function ly(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function lv(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function lb(){}function l_(e,t,n,r,o){var i=n._reactRootContainer;if(i){var a=i;if("function"==typeof o){var s=o;o=function(){var e=lf(a);s.call(e)}}lc(t,a,e,o)}else a=function(e,t,n,r,o){if(o){if("function"==typeof r){var i=r;r=function(){var e=lf(a);i.call(e)}}var a=lu(t,r,e,0,null,!1,!1,"",lb);return e._reactRootContainer=a,e[rq]=a.current,rv(8===e.nodeType?e.parentNode:e),sq(),a}for(;o=e.lastChild;)e.removeChild(o);if("function"==typeof r){var s=r;r=function(){var e=lf(l);s.call(e)}}var l=ls(e,0,!1,null,null,!1,!1,"",lb);return e._reactRootContainer=l,e[rq]=l.current,rv(8===e.nodeType?e.parentNode:e),sq(function(){lc(t,l,n,r)}),l}(n,t,e,o,r);return lf(a)}lm.prototype.render=lg.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(d(409));lc(e,t,null,null)},lm.prototype.unmount=lg.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;sq(function(){lc(null,e,null,null)}),t[rq]=null}},lm.prototype.unstable_scheduleHydration=function(e){if(e){var t=tA();e={blockedOn:null,target:e,priority:t};for(var n=0;n<tU.length&&0!==t&&t<tU[n].priority;n++);tU.splice(n,0,e),0===n&&tz(e)}},tO=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=tm(t.pendingLanes);0!==n&&(tS(t,1|n),sU(t,tn()),0==(6&sl)&&(sS=tn()+500,ol()))}break;case 13:sq(function(){var t=oK(e,1);null!==t&&sD(t,e,1,sL())}),lp(e,1)}},tE=function(e){if(13===e.tag){var t=oK(e,134217728);null!==t&&sD(t,e,134217728,sL()),lp(e,134217728)}},tR=function(e){if(13===e.tag){var t=sN(e),n=oK(e,t);null!==n&&sD(n,e,t,sL()),lp(e,t)}},tA=function(){return tk},tx=function(e,t){var n=tk;try{return tk=e,t()}finally{tk=n}},eB=function(e,t,n){switch(t){case"input":if(eh(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=rX(r);if(!o)throw Error(d(90));eu(r),eh(r,o)}}}break;case"textarea":ew(e,n);break;case"select":null!=(t=n.value)&&ev(e,!!n.multiple,t,!1)}},eq=sH,eV=sq;var lw={findFiberByHostInstance:rQ,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},lS={bundleType:lw.bundleType,version:lw.version,rendererPackageName:lw.rendererPackageName,rendererConfig:lw.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=e5(e))?null:e.stateNode},findFiberByHostInstance:lw.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lk=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lk.isDisabled&&lk.supportsFiber)try{tu=lk.inject(lS),tc=lk}catch(e){}}H={usingClientEntryPoint:!1,Events:[rK,rJ,rX,eG,eH,sH]},q=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ly(t))throw Error(d(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:null}}(e,t,null,n)},V=function(e,t){if(!ly(e))throw Error(d(299));var n=!1,r="",o=lh;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=ls(e,1,!1,null,null,n,!1,r,o),e[rq]=t.current,rv(8===e.nodeType?e.parentNode:e),new lg(t)},W=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(d(188));throw Error(d(268,e=Object.keys(e).join(",")))}return e=null===(e=e5(t))?null:e.stateNode},$=function(e){return sq(e)},Q=function(e,t,n){if(!lv(t))throw Error(d(200));return l_(null,e,t,!0,n)},K=function(e,t,n){if(!ly(e))throw Error(d(405));var r=null!=n&&n.hydratedSources||null,o=!1,i="",a=lh;if(null!=n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=lu(t,null,e,1,null!=n?n:null,o,!1,i,a),e[rq]=t.current,rv(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new lm(t)},J=function(e,t,n){if(!lv(t))throw Error(d(200));return l_(null,e,t,!1,n)},X=function(e){if(!lv(e))throw Error(d(40));return!!e._reactRootContainer&&(sq(function(){l_(null,null,e,!1,function(){e._reactRootContainer=null,e[rq]=null})}),!0)},Y=sH,Z=function(e,t,n,r){if(!lv(n))throw Error(d(200));if(null==e||void 0===e._reactInternals)throw Error(d(38));return l_(e,t,n,!1,r)},ee="18.2.0-next-9e3b772b8-20220608"}),c.register("6qr1r",function(e,t){e.exports=c("7vgeW")}),c.register("7vgeW",function(t,n){function r(e,t){var n=e.length;for(e.push(t);0<n;){var r=n-1>>>1,o=e[r];if(0<a(o,t))e[r]=t,e[n]=o,n=r;else break}}function o(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;for(var r=0,o=e.length,i=o>>>1;r<i;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>a(l,n))u<o&&0>a(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else if(u<o&&0>a(c,n))e[r]=c,e[u]=n,r=u;else break}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(e(t.exports,"unstable_now",()=>s,e=>s=e),e(t.exports,"unstable_IdlePriority",()=>l,e=>l=e),e(t.exports,"unstable_ImmediatePriority",()=>u,e=>u=e),e(t.exports,"unstable_LowPriority",()=>c,e=>c=e),e(t.exports,"unstable_NormalPriority",()=>f,e=>f=e),e(t.exports,"unstable_Profiling",()=>d,e=>d=e),e(t.exports,"unstable_UserBlockingPriority",()=>p,e=>p=e),e(t.exports,"unstable_cancelCallback",()=>h,e=>h=e),e(t.exports,"unstable_continueExecution",()=>g,e=>g=e),e(t.exports,"unstable_forceFrameRate",()=>m,e=>m=e),e(t.exports,"unstable_getCurrentPriorityLevel",()=>y,e=>y=e),e(t.exports,"unstable_getFirstCallbackNode",()=>v,e=>v=e),e(t.exports,"unstable_next",()=>b,e=>b=e),e(t.exports,"unstable_pauseExecution",()=>_,e=>_=e),e(t.exports,"unstable_requestPaint",()=>w,e=>w=e),e(t.exports,"unstable_runWithPriority",()=>S,e=>S=e),e(t.exports,"unstable_scheduleCallback",()=>k,e=>k=e),e(t.exports,"unstable_shouldYield",()=>C,e=>C=e),e(t.exports,"unstable_wrapCallback",()=>O,e=>O=e),"object"==typeof performance&&"function"==typeof performance.now){var s,l,u,c,f,d,p,h,g,m,y,v,b,_,w,S,k,C,O,E,R=performance;s=function(){return R.now()}}else{var A=Date,x=A.now();s=function(){return A.now()-x}}var T=[],I=[],P=1,M=null,L=3,N=!1,D=!1,U=!1,B="function"==typeof setTimeout?setTimeout:null,j="function"==typeof clearTimeout?clearTimeout:null,F="undefined"!=typeof setImmediate?setImmediate:null;function z(e){for(var t=o(I);null!==t;){if(null===t.callback)i(I);else if(t.startTime<=e)i(I),t.sortIndex=t.expirationTime,r(T,t);else break;t=o(I)}}function G(e){if(U=!1,z(e),!D){if(null!==o(T))D=!0,Z(H);else{var t=o(I);null!==t&&ee(G,t.startTime-e)}}}function H(e,t){D=!1,U&&(U=!1,j(W),W=-1),N=!0;var n=L;try{for(z(t),M=o(T);null!==M&&(!(M.expirationTime>t)||e&&!K());){var r=M.callback;if("function"==typeof r){M.callback=null,L=M.priorityLevel;var a=r(M.expirationTime<=t);t=s(),"function"==typeof a?M.callback=a:M===o(T)&&i(T),z(t)}else i(T);M=o(T)}if(null!==M)var l=!0;else{var u=o(I);null!==u&&ee(G,u.startTime-t),l=!1}return l}finally{M=null,L=n,N=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var q=!1,V=null,W=-1,$=5,Q=-1;function K(){return!(s()-Q<$)}function J(){if(null!==V){var e=s();Q=e;var t=!0;try{t=V(!0,e)}finally{t?E():(q=!1,V=null)}}else q=!1}if("function"==typeof F)E=function(){F(J)};else if("undefined"!=typeof MessageChannel){var X=new MessageChannel,Y=X.port2;X.port1.onmessage=J,E=function(){Y.postMessage(null)}}else E=function(){B(J,0)};function Z(e){V=e,q||(q=!0,E())}function ee(e,t){W=B(function(){e(s())},t)}l=5,u=1,c=4,f=3,d=null,p=2,h=function(e){e.callback=null},g=function(){D||N||(D=!0,Z(H))},m=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<e?Math.floor(1e3/e):5},y=function(){return L},v=function(){return o(T)},b=function(e){switch(L){case 1:case 2:case 3:var t=3;break;default:t=L}var n=L;L=t;try{return e()}finally{L=n}},_=function(){},w=function(){},S=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=L;L=e;try{return t()}finally{L=n}},k=function(e,t,n){var i=s();switch(n="object"==typeof n&&null!==n&&"number"==typeof(n=n.delay)&&0<n?i+n:i,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return a=n+a,e={id:P++,callback:t,priorityLevel:e,startTime:n,expirationTime:a,sortIndex:-1},n>i?(e.sortIndex=n,r(I,e),null===o(T)&&e===o(I)&&(U?(j(W),W=-1):U=!0,ee(G,n-i))):(e.sortIndex=a,r(T,e),D||N||(D=!0,Z(H))),e},C=K,O=function(e){var t=L;return function(){var n=L;L=t;try{return e.apply(this,arguments)}finally{L=n}}}});// Copyright 2023 Daniel C. Brotsky. All rights reserved.
// Licensed under the GNU Affero General Public License v3.
// See the LICENSE file for details.
var f={};f=c("cjuLU");var d=c("fYo6y"),p={};!// DCE check should happen before ReactDOM bundle executes so that
// DevTools can report bad minification during injection.
function e(){/* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{// Verify that the code above has been dead code eliminated (DCE'd).
__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){// DevTools shouldn't crash React, no matter what.
// We should still report in case we break this code.
console.error(e)}}(),r=(p=c("gAtBI")).createRoot,p.hydrateRoot;// Copyright 2023 Daniel C. Brotsky. All rights reserved.
// Licensed under the GNU Affero General Public License v3.
// See the LICENSE file for details.
var d=c("fYo6y"),h={};h=function(){/* eslint-disable no-var */function e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}/* eslint-enable no-var */return /* eslint-enable no-var *//* eslint-disable no-var */function t(n,r){function o(t,o,i){if("undefined"!=typeof document){"number"==typeof(i=e({},r,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var s in i)i[s]&&(a+="; "+s,!0!==i[s]&&// Considers RFC 6265 section 5.2:
// ...
// 3.  If the remaining unparsed-attributes contains a %x3B (";")
//     character:
// Consume the characters of the unparsed-attributes up to,
// not including, the first %x3B (";") character.
// ...
(a+="="+i[s].split(";")[0]));return document.cookie=t+"="+n.write(o,t)+a}}return Object.create({set:o,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],r={},o=0;o<t.length;o++){var i=t[o].split("="),a=i.slice(1).join("=");try{var s=decodeURIComponent(i[0]);if(r[s]=n.read(a,s),e===s)break}catch(e){}}return e?r[e]:r}},remove:function(t,n){o(t,"",e({},n,{expires:-1}))},withAttributes:function(n){return t(this.converter,e({},this.attributes,n))},withConverter:function(n){return t(e({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(n)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}();var g={};e(g,"configureAbly",()=>es);var m={};o=function(e){// go through the array every three bytes, we'll deal with trailing stuff later
for(var t,n=e.length,r=n%3// if we have 1 byte left, pad 2 bytes
,o=[],i=0,a=n-r;i<a;i+=16383// must be multiple of 3
)o.push(function(e,t,n){for(var r,o=[],i=t;i<n;i+=3)o.push(y[(r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]))>>18&63]+y[r>>12&63]+y[r>>6&63]+y[63&r]);return o.join("")}(e,i,i+16383>a?a:i+16383));return 1===r?o.push(y[(t=e[n-1])>>2]+y[t<<4&63]+"=="):2===r&&o.push(y[(t=(e[n-2]<<8)+e[n-1])>>10]+y[t>>4&63]+y[t<<2&63]+"="),o.join("")};for(var y=[],v=[],b="undefined"!=typeof Uint8Array?Uint8Array:Array,_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w=0,S=_.length;w<S;++w)y[w]=_[w],v[_.charCodeAt(w)]=w;// Support decoding URL-safe base64 strings, as Node.js does.
// See: https://en.wikipedia.org/wiki/Base64#URL_applications
v["-".charCodeAt(0)]=62,v["_".charCodeAt(0)]=63,i=function(e,t,n,r,o){var i,a,s=8*o-r-1,l=(1<<s)-1,u=l>>1,c=-7,f=n?o-1:0,d=n?-1:1,p=e[t+f];for(f+=d,i=p&(1<<-c)-1,p>>=-c,c+=s;c>0;i=256*i+e[t+f],f+=d,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=r;c>0;a=256*a+e[t+f],f+=d,c-=8);if(0===i)i=1-u;else{if(i===l)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,r),i-=u}return(p?-1:1)*a*Math.pow(2,i-r)},a=function(e,t,n,r,o,i){var a,s,l,u=8*i-o-1,c=(1<<u)-1,f=c>>1,d=23===o?5960464477539062e-23:0,p=r?0:i-1,h=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+f>=1?t+=d/l:t+=d*Math.pow(2,1-f),t*l>=2&&(a++,l/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*l-1)*Math.pow(2,o),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;e[n+p]=255&s,p+=h,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;e[n+p]=255&a,p+=h,a/=256,u-=8);e[n+p-h]|=128*g};const k="function"==typeof Symbol&&"function"// eslint-disable-line dot-notation
==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom")// eslint-disable-line dot-notation
:null;function C(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');// Return an augmented `Uint8Array` instance
let t=new Uint8Array(e);return Object.setPrototypeOf(t,O.prototype),t}/**
 * The Buffer constructor returns instances of `Uint8Array` that have their
 * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of
 * `Uint8Array`, so the returned instances will have all the node `Buffer` methods
 * and the `Uint8Array` methods. Square bracket notation works as expected -- it
 * returns a single octet.
 *
 * The `Uint8Array` prototype remains unmodified.
 */function O(e,t,n){// Common case.
if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return A(e)}return E(e,t,n)}function E(e,t,n){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!O.isEncoding(t))throw TypeError("Unknown encoding: "+t);let n=0|P(e,t),r=C(n),o=r.write(e,t);return o!==n&&// cause everything after the first invalid character to be ignored. (e.g.
// 'abxxcd' will be treated as 'ab')
(r=r.slice(0,o)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(et(e,Uint8Array)){let t=new Uint8Array(e);return T(t.buffer,t.byteOffset,t.byteLength)}return x(e)}(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(et(e,ArrayBuffer)||e&&et(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(et(e,SharedArrayBuffer)||e&&et(e.buffer,SharedArrayBuffer)))return T(e,t,n);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return O.from(r,t,n);let o=function(e){var t;if(O.isBuffer(e)){let t=0|I(e.length),n=C(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||(t=e.length)!=t// eslint-disable-line no-self-compare
?C(0):x(e):"Buffer"===e.type&&Array.isArray(e.data)?x(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return O.from(e[Symbol.toPrimitive]("string"),t,n);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function R(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function A(e){return R(e),C(e<0?0:0|I(e))}function x(e){let t=e.length<0?0:0|I(e.length),n=C(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function T(e,t,n){let r;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw RangeError('"length" is outside of buffer bounds');return(// Return an augmented `Uint8Array` instance
Object.setPrototypeOf(r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),O.prototype),r)}function I(e){// Note: cannot use `length < K_MAX_LENGTH` here because that fails when
// length is NaN (which is otherwise coerced to zero.)
if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function P(e,t){if(O.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||et(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;// Use a for loop to avoid recursion
let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Y(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Z(e).length;default:if(o)return r?-1:Y(e).length// assume utf8
;t=(""+t).toLowerCase(),o=!0}}function M(e,t,n){let r=!1;// Return early if start > this.length. Done here to prevent potential uint32
// coercion fail below.
if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===n||n>this.length)&&(n=this.length),n<=0||// Force coercion to uint32. This will also coerce falsey/NaN values to 0.
(n>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,n){let r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let o="";for(let r=t;r<n;++r)o+=en[e[r]];return o}(this,t,n);case"utf8":case"utf-8":return U(this,t,n);case"ascii":return function(e,t,n){let r="";n=Math.min(e.length,n);for(let o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}(this,t,n);case"latin1":case"binary":return function(e,t,n){let r="";n=Math.min(e.length,n);for(let o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}(this,t,n);case"base64":var i,a;return i=t,a=n,0===i&&a===this.length?o(this):o(this.slice(i,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,n){let r=e.slice(t,n),o="";// If bytes.length is odd, the last 8 bits must be ignored (same as node.js)
for(let e=0;e<r.length-1;e+=2)o+=String.fromCharCode(r[e]+256*r[e+1]);return o}(this,t,n);default:if(r)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function L(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,
// OR the last index of `val` in `buffer` at offset <= `byteOffset`.
//
// Arguments:
// - buffer - a Buffer to search
// - val - a string, Buffer, or number
// - byteOffset - an index into `buffer`; will be clamped to an int32
// - encoding - an optional encoding, relevant is val is a string
// - dir - true for indexOf, false for lastIndexOf
function N(e,t,n,r,o){var i;// Empty buffer means no match
if(0===e.length)return -1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),(i=n=+n// Coerce to Number.
)!=i&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return -1;n=e.length-1}else if(n<0){if(!o)return -1;n=0}// Finally, search either indexOf (if dir is true) or lastIndexOf
if("string"==typeof t&&(t=O.from(t,r)),O.isBuffer(t))return(// Special case: looking for empty string/buffer always fails
0===t.length?-1:D(e,t,n,r,o));if("number"==typeof t)return(t&=255// Search for a byte value [0-255]
,"function"==typeof Uint8Array.prototype.indexOf)?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):D(e,[t],n,r,o);throw TypeError("val must be string, number or Buffer")}function D(e,t,n,r,o){let i,a=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return -1;a=2,s/=2,l/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){let r=-1;for(i=n;i<s;i++)if(u(e,i)===u(t,-1===r?0:i-r)){if(-1===r&&(r=i),i-r+1===l)return r*a}else -1!==r&&(i-=i-r),r=-1}else for(n+l>s&&(n=s-l),i=n;i>=0;i--){let n=!0;for(let r=0;r<l;r++)if(u(e,i+r)!==u(t,r)){n=!1;break}if(n)return i}return -1}function U(e,t,n){n=Math.min(e.length,n);let r=[],o=t;for(;o<n;){let t=e[o],i=null,a=t>239?4:t>223?3:t>191?2:1;if(o+a<=n){let n,r,s,l;switch(a){case 1:t<128&&(i=t);break;case 2:(192&(n=e[o+1]))==128&&(l=(31&t)<<6|63&n)>127&&(i=l);break;case 3:n=e[o+1],r=e[o+2],(192&n)==128&&(192&r)==128&&(l=(15&t)<<12|(63&n)<<6|63&r)>2047&&(l<55296||l>57343)&&(i=l);break;case 4:n=e[o+1],r=e[o+2],s=e[o+3],(192&n)==128&&(192&r)==128&&(192&s)==128&&(l=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&s)>65535&&l<1114112&&(i=l)}}null===i?(// we did not generate a valid codePoint so insert a
// replacement char (U+FFFD) and advance only 1 byte
i=65533,a=1):i>65535&&(// encode to utf16 (surrogate pair dance)
i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),o+=a}return function(e){let t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e)// avoid extra slice()
;// Decode in chunks to avoid "call stack size exceeded".
let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}/*
 * Need to make sure that buffer isn't trying to write out of bounds.
 */function B(e,t,n){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>n)throw RangeError("Trying to access beyond buffer length")}function j(e,t,n,r,o,i){if(!O.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw RangeError('"value" argument is out of bounds');if(n+r>e.length)throw RangeError("Index out of range")}function F(e,t,n,r,o){Q(t,r,o,e,n,7);let i=Number(t&BigInt(4294967295));e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function z(e,t,n,r,o){Q(t,r,o,e,n,7);let i=Number(t&BigInt(4294967295));e[n+7]=i,i>>=8,e[n+6]=i,i>>=8,e[n+5]=i,i>>=8,e[n+4]=i;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function G(e,t,n,r,o,i){if(n+r>e.length||n<0)throw RangeError("Index out of range")}function H(e,t,n,r,o){return t=+t,n>>>=0,o||G(e,t,n,4,34028234663852886e22,-34028234663852886e22),a(e,t,n,r,23,4),n+4}function q(e,t,n,r,o){return t=+t,n>>>=0,o||G(e,t,n,8,17976931348623157e292,-17976931348623157e292),a(e,t,n,r,52,8),n+8}/**
 * If `Buffer.TYPED_ARRAY_SUPPORT`:
 *   === true    Use Uint8Array implementation (fastest)
 *   === false   Print warning and recommend using `buffer` v4.x which has an Object
 *               implementation (most compatible, even IE6)
 *
 * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,
 * Opera 11.6+, iOS 4.2+.
 *
 * We report that the browser does not support typed arrays if the are not subclassable
 * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`
 * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support
 * for __proto__ and has a buggy typed array implementation.
 */O.TYPED_ARRAY_SUPPORT=function(){// Can typed array instances can be augmented?
try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),O.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(O.prototype,"parent",{enumerable:!0,get:function(){if(O.isBuffer(this))return this.buffer}}),Object.defineProperty(O.prototype,"offset",{enumerable:!0,get:function(){if(O.isBuffer(this))return this.byteOffset}}),O.poolSize=8192// not used by this implementation
,/**
 * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError
 * if value is a number.
 * Buffer.from(str[, encoding])
 * Buffer.from(array)
 * Buffer.from(buffer)
 * Buffer.from(arrayBuffer[, byteOffset[, length]])
 **/O.from=function(e,t,n){return E(e,t,n)},// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:
// https://github.com/feross/buffer/pull/148
Object.setPrototypeOf(O.prototype,Uint8Array.prototype),Object.setPrototypeOf(O,Uint8Array),/**
 * Creates a new filled Buffer instance.
 * alloc(size[, fill[, encoding]])
 **/O.alloc=function(e,t,n){return(R(e),e<=0)?C(e):void 0!==t?"string"==typeof n?C(e).fill(t,n):C(e).fill(t):C(e)},/**
 * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.
 * */O.allocUnsafe=function(e){return A(e)},/**
 * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.
 */O.allocUnsafeSlow=function(e){return A(e)},O.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==O.prototype// so Buffer.isBuffer(Buffer.prototype) will be false
},O.compare=function(e,t){if(et(e,Uint8Array)&&(e=O.from(e,e.offset,e.byteLength)),et(t,Uint8Array)&&(t=O.from(t,t.offset,t.byteLength)),!O.isBuffer(e)||!O.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},O.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},O.concat=function(e,t){let n;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return O.alloc(0);if(void 0===t)for(n=0,t=0;n<e.length;++n)t+=e[n].length;let r=O.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){let t=e[n];if(et(t,Uint8Array))o+t.length>r.length?(O.isBuffer(t)||(t=O.from(t)),t.copy(r,o)):Uint8Array.prototype.set.call(r,t,o);else if(O.isBuffer(t))t.copy(r,o);else throw TypeError('"list" argument must be an Array of Buffers');o+=t.length}return r},O.byteLength=P,// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)
// to detect a Buffer instance. It's not possible to use `instanceof Buffer`
// reliably in a browserify context because there could be multiple different
// copies of the 'buffer' package in use. This method works even for Buffer
// instances that were created from another copy of the `buffer` package.
// See: https://github.com/feross/buffer/issues/154
O.prototype._isBuffer=!0,O.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)L(this,t,t+1);return this},O.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)L(this,t,t+3),L(this,t+1,t+2);return this},O.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)L(this,t,t+7),L(this,t+1,t+6),L(this,t+2,t+5),L(this,t+3,t+4);return this},O.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?U(this,0,e):M.apply(this,arguments)},O.prototype.toLocaleString=O.prototype.toString,O.prototype.equals=function(e){if(!O.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===O.compare(this,e)},O.prototype.inspect=function(){let e="";return e=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim(),this.length>50&&(e+=" ... "),"<Buffer "+e+">"},k&&(O.prototype[k]=O.prototype.inspect),O.prototype.compare=function(e,t,n,r,o){if(et(e,Uint8Array)&&(e=O.from(e,e.offset,e.byteLength)),!O.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return -1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,o>>>=0,this===e)return 0;let i=o-r,a=n-t,s=Math.min(i,a),l=this.slice(r,o),u=e.slice(t,n);for(let e=0;e<s;++e)if(l[e]!==u[e]){i=l[e],a=u[e];break}return i<a?-1:a<i?1:0},O.prototype.includes=function(e,t,n){return -1!==this.indexOf(e,t,n)},O.prototype.indexOf=function(e,t,n){return N(this,e,t,n,!0)},O.prototype.lastIndexOf=function(e,t,n){return N(this,e,t,n,!1)},O.prototype.write=function(e,t,n,r){var o,i,a,s,l,u,c,f;// Buffer#write(string)
if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let d=this.length-t;if((void 0===n||n>d)&&(n=d),e.length>0&&(n<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let p=!1;for(;;)switch(r){case"hex":return function(e,t,n,r){let o;n=Number(n)||0;let i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;let a=t.length;for(r>a/2&&(r=a/2),o=0;o<r;++o){let r=parseInt(t.substr(2*o,2),16);if(r!=r)break;e[n+o]=r}return o}(this,e,t,n);case"utf8":case"utf-8":return o=t,i=n,ee(Y(e,this.length-o),this,o,i);case"ascii":case"latin1":case"binary":return a=t,s=n,ee(function(e){let t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(e),this,a,s);case"base64":// Warning: maxLength not taken into account in base64Write
return l=t,u=n,ee(Z(e),this,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c=t,f=n,ee(function(e,t){let n,r;let o=[];for(let i=0;i<e.length&&!((t-=2)<0);++i)r=(n=e.charCodeAt(i))>>8,o.push(n%256),o.push(r);return o}(e,this.length-c),this,c,f);default:if(p)throw TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),p=!0}},O.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},O.prototype.slice=function(e,t){let n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);let r=this.subarray(e,t);return(// Return an augmented `Uint8Array` instance
Object.setPrototypeOf(r,O.prototype),r)},O.prototype.readUintLE=O.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||B(e,t,this.length);let r=this[e],o=1,i=0;for(;++i<t&&(o*=256);)r+=this[e+i]*o;return r},O.prototype.readUintBE=O.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||B(e,t,this.length);let r=this[e+--t],o=1;for(;t>0&&(o*=256);)r+=this[e+--t]*o;return r},O.prototype.readUint8=O.prototype.readUInt8=function(e,t){return e>>>=0,t||B(e,1,this.length),this[e]},O.prototype.readUint16LE=O.prototype.readUInt16LE=function(e,t){return e>>>=0,t||B(e,2,this.length),this[e]|this[e+1]<<8},O.prototype.readUint16BE=O.prototype.readUInt16BE=function(e,t){return e>>>=0,t||B(e,2,this.length),this[e]<<8|this[e+1]},O.prototype.readUint32LE=O.prototype.readUInt32LE=function(e,t){return e>>>=0,t||B(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},O.prototype.readUint32BE=O.prototype.readUInt32BE=function(e,t){return e>>>=0,t||B(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},O.prototype.readBigUInt64LE=er(function(e){K(e>>>=0,"offset");let t=this[e],n=this[e+7];(void 0===t||void 0===n)&&J(e,this.length-8);let r=t+256*this[++e]+65536*this[++e]+16777216*this[++e],o=this[++e]+256*this[++e]+65536*this[++e]+16777216*n;return BigInt(r)+(BigInt(o)<<BigInt(32))}),O.prototype.readBigUInt64BE=er(function(e){K(e>>>=0,"offset");let t=this[e],n=this[e+7];(void 0===t||void 0===n)&&J(e,this.length-8);let r=16777216*t+65536*this[++e]+256*this[++e]+this[++e],o=16777216*this[++e]+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(o)}),O.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||B(e,t,this.length);let r=this[e],o=1,i=0;for(;++i<t&&(o*=256);)r+=this[e+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},O.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||B(e,t,this.length);let r=t,o=1,i=this[e+--r];for(;r>0&&(o*=256);)i+=this[e+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},O.prototype.readInt8=function(e,t){return(e>>>=0,t||B(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},O.prototype.readInt16LE=function(e,t){e>>>=0,t||B(e,2,this.length);let n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},O.prototype.readInt16BE=function(e,t){e>>>=0,t||B(e,2,this.length);let n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},O.prototype.readInt32LE=function(e,t){return e>>>=0,t||B(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},O.prototype.readInt32BE=function(e,t){return e>>>=0,t||B(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},O.prototype.readBigInt64LE=er(function(e){K(e>>>=0,"offset");let t=this[e],n=this[e+7];(void 0===t||void 0===n)&&J(e,this.length-8);let r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24// Overflow
);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+16777216*this[++e])}),O.prototype.readBigInt64BE=er(function(e){K(e>>>=0,"offset");let t=this[e],n=this[e+7];(void 0===t||void 0===n)&&J(e,this.length-8);let r=(t<<24)+// Overflow
65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(16777216*this[++e]+65536*this[++e]+256*this[++e]+n)}),O.prototype.readFloatLE=function(e,t){return e>>>=0,t||B(e,4,this.length),i(this,e,!0,23,4)},O.prototype.readFloatBE=function(e,t){return e>>>=0,t||B(e,4,this.length),i(this,e,!1,23,4)},O.prototype.readDoubleLE=function(e,t){return e>>>=0,t||B(e,8,this.length),i(this,e,!0,52,8)},O.prototype.readDoubleBE=function(e,t){return e>>>=0,t||B(e,8,this.length),i(this,e,!1,52,8)},O.prototype.writeUintLE=O.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){let r=Math.pow(2,8*n)-1;j(this,e,t,n,r,0)}let o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},O.prototype.writeUintBE=O.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){let r=Math.pow(2,8*n)-1;j(this,e,t,n,r,0)}let o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},O.prototype.writeUint8=O.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,1,255,0),this[t]=255&e,t+1},O.prototype.writeUint16LE=O.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},O.prototype.writeUint16BE=O.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},O.prototype.writeUint32LE=O.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},O.prototype.writeUint32BE=O.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},O.prototype.writeBigUInt64LE=er(function(e,t=0){return F(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),O.prototype.writeBigUInt64BE=er(function(e,t=0){return z(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),O.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){let r=Math.pow(2,8*n-1);j(this,e,t,n,r-1,-r)}let o=0,i=1,a=0;for(this[t]=255&e;++o<n&&(i*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/i>>0)-a&255;return t+n},O.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){let r=Math.pow(2,8*n-1);j(this,e,t,n,r-1,-r)}let o=n-1,i=1,a=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/i>>0)-a&255;return t+n},O.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},O.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},O.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},O.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},O.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||j(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},O.prototype.writeBigInt64LE=er(function(e,t=0){return F(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),O.prototype.writeBigInt64BE=er(function(e,t=0){return z(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),O.prototype.writeFloatLE=function(e,t,n){return H(this,e,t,!0,n)},O.prototype.writeFloatBE=function(e,t,n){return H(this,e,t,!1,n)},O.prototype.writeDoubleLE=function(e,t,n){return q(this,e,t,!0,n)},O.prototype.writeDoubleBE=function(e,t,n){return q(this,e,t,!1,n)},// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)
O.prototype.copy=function(e,t,n,r){if(!O.isBuffer(e))throw TypeError("argument should be a Buffer");// Copy 0 bytes; we're done
if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n||0===e.length||0===this.length)return 0;// Fatal error conditions
if(t<0)throw RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw RangeError("Index out of range");if(r<0)throw RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);let o=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),o},// Usage:
//    buffer.fill(number[, offset[, end]])
//    buffer.fill(buffer[, offset[, end]])
//    buffer.fill(string[, offset[, end]][, encoding])
O.prototype.fill=function(e,t,n,r){let o;// Handle string cases:
if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw TypeError("encoding must be a string");if("string"==typeof r&&!O.isEncoding(r))throw TypeError("Unknown encoding: "+r);if(1===e.length){let t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));// Invalid ranges are not set to a default, so can range check early.
if(t<0||this.length<t||this.length<n)throw RangeError("Out of range index");if(n<=t)return this;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{let i=O.isBuffer(e)?e:O.from(e,r),a=i.length;if(0===a)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=i[o%a]}return this};// CUSTOM ERRORS
// =============
// Simplified versions from Node, changed for Buffer-only usage
const V={};function W(e,t,n){V[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),// Add the error code to the name to include it in the stack trace.
this.name=`${this.name} [${e}]`,// Access the stack to generate the error message including the error code
// from the name.
this.stack// eslint-disable-line no-unused-expressions
,// Reset the name to the actual name.
delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function $(e){let t="",n=e.length,r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function Q(e,t,n,r,o,i){if(e>n||e<t){let r;let o="bigint"==typeof t?"n":"";throw r=i>3?0===t||t===BigInt(0)?`>= 0${o} and < 2${o} ** ${(i+1)*8}${o}`:`>= -(2${o} ** ${(i+1)*8-1}${o}) and < 2 ** ${(i+1)*8-1}${o}`:`>= ${t}${o} and <= ${n}${o}`,new V.ERR_OUT_OF_RANGE("value",r,e)}K(o,"offset"),(void 0===r[o]||void 0===r[o+i])&&J(o,r.length-(i+1))}function K(e,t){if("number"!=typeof e)throw new V.ERR_INVALID_ARG_TYPE(t,"number",e)}function J(e,t,n){if(Math.floor(e)!==e)throw K(e,n),new V.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new V.ERR_BUFFER_OUT_OF_BOUNDS;throw new V.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}W("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),W("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),W("ERR_OUT_OF_RANGE",function(e,t,n){let r=`The value of "${e}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>4294967296?o=$(String(n)):"bigint"==typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=$(o)),o+="n"),r+=` It must be ${t}. Received ${o}`},RangeError);// HELPER FUNCTIONS
// ================
const X=/[^+/0-9A-Za-z-_]/g;function Y(e,t){let n;t=t||1/0;let r=e.length,o=null,i=[];for(let a=0;a<r;++a){// is surrogate component
if((n=e.charCodeAt(a))>55295&&n<57344){// last char was a lead
if(!o){// no lead yet
if(n>56319||a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}// valid lead
o=n;continue}// 2 leads in a row
if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}// valid surrogate pair
n=(o-55296<<10|n-56320)+65536}else o&&(t-=3)>-1&&i.push(239,191,189);// encode utf8
if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else if(n<1114112){if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}else throw Error("Invalid code point")}return i}function Z(e){return function(e){var t,n,r=function(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");// Trim off extra bytes after placeholder bytes are found
// See: https://github.com/beatgammit/base64-js/issues/42
var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}(e),o=r[0],i=r[1],a=new b((o+i)*3/4-i),s=0,l=i>0?o-4:o;for(n=0;n<l;n+=4)t=v[e.charCodeAt(n)]<<18|v[e.charCodeAt(n+1)]<<12|v[e.charCodeAt(n+2)]<<6|v[e.charCodeAt(n+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=255&t;return 2===i&&(t=v[e.charCodeAt(n)]<<2|v[e.charCodeAt(n+1)]>>4,a[s++]=255&t),1===i&&(t=v[e.charCodeAt(n)]<<10|v[e.charCodeAt(n+1)]<<4|v[e.charCodeAt(n+2)]>>2,a[s++]=t>>8&255,a[s++]=255&t),a}(function(e){// Node converts strings with length < 2 to ''
if(// Node strips out invalid characters like \n and \t from the string, base64-js does not
(e=// Node takes equal signs as end of the Base64 encoding
(e=e.split("=")[0]).trim().replace(X,"")).length<2)return"";// Node allows for non-padded base64 strings (missing trailing ===), base64-js does not
for(;e.length%4!=0;)e+="=";return e}(e))}function ee(e,t,n,r){let o;for(o=0;o<r&&!(o+n>=t.length)&&!(o>=e.length);++o)t[o+n]=e[o];return o}// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass
// the `instanceof` check but they should be treated as of that type.
// See: https://github.com/feross/buffer/issues/166
function et(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}// Create lookup table for `toString('hex')`
// See: https://github.com/feross/buffer/issues/219
const en=function(){let e="0123456789abcdef",t=Array(256);for(let n=0;n<16;++n){let r=16*n;for(let o=0;o<16;++o)t[r+o]=e[n]+e[o]}return t}();// Return not function with Error if BigInt not supported
function er(e){return"undefined"==typeof BigInt?eo:e}function eo(){throw Error("BigInt not supported")}window,m=/******/function(e){/******/// The module cache
/******/var t={};/******//******/// The require function
/******/function n(r){/******//******/// Check if module is in cache
/******/if(t[r])/******/return t[r].exports;/******/// Create a new module (and put it into the cache)
/******/var o=t[r]={/******/i:r,/******/l:!1,/******/exports:{}};/******//******/// Return the exports of the module
/******/return(/******//******/// Execute the module function
/******/e[r].call(o.exports,o,o.exports,n),/******//******/// Flag the module as loaded
/******/o.l=!0,o.exports);/******/}/******//******//******/// Load entry module and return exports
/******/return(/******//******//******/// expose the modules object (__webpack_modules__)
/******/n.m=e,/******//******/// expose the module cache
/******/n.c=t,/******//******/// define getter function for harmony exports
/******/n.d=function(e,t,r){n.o(e,t)||/******/Object.defineProperty(e,t,{enumerable:!0,get:r});/******/},/******//******/// define __esModule on exports
/******/n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&/******/Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),/******/Object.defineProperty(e,"__esModule",{value:!0});/******/},/******//******/// create a fake namespace object
/******/// mode & 1: value is a module id, require it
/******/// mode & 2: merge all properties of value into the ns
/******/// mode & 4: return value when already ns object
/******/// mode & 8|1: behave like require
/******/n.t=function(e,t){/******/if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;/******/var r=Object.create(null);/******/if(/******/n.r(r),/******/Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,(function(t){return e[t]}).bind(null,o));/******/return r;/******/},/******//******/// getDefaultExport function for compatibility with non-harmony modules
/******/n.n=function(e){/******/var t=e&&e.__esModule?/******/function(){return e.default}:/******/function(){return e};/******/return /******/n.d(t,"a",t),t;/******/},/******//******/// Object.prototype.hasOwnProperty.call
/******/n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},/******//******/// __webpack_public_path__
/******/n.p="",n(n.s=42));/******/}([/* 0 *//***/function(e,t,n){n.r(t),/* harmony export (binding) */n.d(t,"__extends",function(){return o}),/* harmony export (binding) */n.d(t,"__assign",function(){return i}),/* harmony export (binding) */n.d(t,"__rest",function(){return a}),/* harmony export (binding) */n.d(t,"__decorate",function(){return s}),/* harmony export (binding) */n.d(t,"__param",function(){return l}),/* harmony export (binding) */n.d(t,"__metadata",function(){return u}),/* harmony export (binding) */n.d(t,"__awaiter",function(){return c}),/* harmony export (binding) */n.d(t,"__generator",function(){return f}),/* harmony export (binding) */n.d(t,"__createBinding",function(){return d}),/* harmony export (binding) */n.d(t,"__exportStar",function(){return p}),/* harmony export (binding) */n.d(t,"__values",function(){return h}),/* harmony export (binding) */n.d(t,"__read",function(){return g}),/* harmony export (binding) */n.d(t,"__spread",function(){return m}),/* harmony export (binding) */n.d(t,"__spreadArrays",function(){return y}),/* harmony export (binding) */n.d(t,"__spreadArray",function(){return v}),/* harmony export (binding) */n.d(t,"__await",function(){return b}),/* harmony export (binding) */n.d(t,"__asyncGenerator",function(){return _}),/* harmony export (binding) */n.d(t,"__asyncDelegator",function(){return w}),/* harmony export (binding) */n.d(t,"__asyncValues",function(){return S}),/* harmony export (binding) */n.d(t,"__makeTemplateObject",function(){return k}),/* harmony export (binding) */n.d(t,"__importStar",function(){return O}),/* harmony export (binding) */n.d(t,"__importDefault",function(){return E}),/* harmony export (binding) */n.d(t,"__classPrivateFieldGet",function(){return R}),/* harmony export (binding) */n.d(t,"__classPrivateFieldSet",function(){return A});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** *//* global Reflect, Promise */var r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function s(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function l(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})}function f(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var d=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function p(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||d(t,e,n)}function h(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}/** @deprecated */function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}/** @deprecated */function y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}function v(e,t,n){if(n||2==arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function _(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){o[e]&&(r[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||s(e,t)})})}function s(e,t){try{var n;(n=o[e](t)).value instanceof b?Promise.resolve(n.value.v).then(l,u):c(i[0][2],n)}catch(e){c(i[0][3],e)}}function l(e){s("next",e)}function u(e){s("throw",e)}function c(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function w(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:b(e[r](t)),done:"return"===r}:o?o(t):t}:o}}function S(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=h(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,o){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,o,(t=e[n](t)).done,t.value)})}}}function k(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var C=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function O(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&d(t,e,n);return C(t,e),t}function E(e){return e&&e.__esModule?e:{default:e}}function R(e,t,n,r){if("a"===n&&!r)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function A(e,t,n,r,o){if("m"===r)throw TypeError("Private method is not writable");if("a"===r&&!o)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n}/***/},/* 1 *//***/function(e,t,n){/* WEBPACK VAR INJECTION */(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.allToUpperCase=t.allToLowerCase=t.encodeBody=t.decodeBody=t.Format=t.promisify=t.trim=t.arrChooseN=t.randomHexString=t.randomString=t.cheapRandStr=t.dataSizeBytes=t.inspectBody=t.inspectError=t.isErrorInfoOrPartialErrorInfo=t.now=t.parseQueryString=t.toQueryString=t.arrPopRandomElement=t.defaultPostHeaders=t.defaultGetHeaders=t.allSame=t.arrEvery=t.arrFilter=t.arrMap=t.safeArrForEach=t.arrForEach=t.forInOwnNonNullProperties=t.valuesArray=t.keysArray=t.arrWithoutValue=t.arrDeleteValue=t.arrIn=t.arrIndexOf=t.arrSubtract=t.arrIntersectOb=t.arrIntersect=t.intersect=t.containsValue=t.inherits=t.prototypicalClone=t.shallowClone=t.isEmptyArg=t.isOnlyPropIn=t.isEmpty=t.isObject=t.ensureArray=t.isArray=t.copy=t.mixin=void 0,t.toBase64=t.matchDerivedChannel=t.shallowEquals=t.getGlobalObject=t.getRetryTime=t.getJitterCoefficient=t.getBackoffCoefficient=void 0;var r,o,i=n(0),a=i.__importDefault(n(3)),s=i.__importStar(n(8)),l=i.__importDefault(n(4)),u=n(11),c=n(31);function f(e){return Math.floor(Math.random()*e.length)}/*
 * Add a set of properties to a target object
 * target: the target object
 * props:  an object whose enumerable properties are
 *         added, by reference only
 */function d(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++){var o=t[r];if(!o)break;var i=Object.prototype.hasOwnProperty;for(var a in o)(!i||i.call(o,a))&&(e[a]=o[a])}return e}/*
 * Determine whether or not an argument to an overloaded function is
 * undefined (missing) or null.
 * This method is useful when constructing functions such as (WebIDL terminology):
 *   off([TreatUndefinedAs=Null] DOMString? event)
 * as you can then confirm the argument using:
 *   Utils.isEmptyArg(event)
 */function p(e){return null==e}/*
 * Clone an object by creating a new object with the
 * given object as its prototype. Optionally
 * a set of additional own properties can be
 * supplied to be added to the newly created clone.
 * ob:            the object to be cloned
 * ownProperties: optional object with additional
 *                properties to add
 */function h(e,t){var n=function(){};n.prototype=e;var r=new n;return t&&d(r,t),r}function g(e,n){for(var r=[],o=0;o<e.length;o++){var i=e[o];-1!=(0,t.arrIndexOf)(n,i)&&r.push(i)}return r}function m(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r];o in t&&n.push(o)}return n}function y(e,n){var r=(0,t.arrIndexOf)(e,n),o=-1!=r;return o&&e.splice(r,1),o}t.mixin=d,t.copy=/*
 * Add a set of properties to a target object
 * target: the target object
 * props:  an object whose enumerable properties are
 *         added, by reference only
 */function(e){return d({},e)},/*
 * Determine whether or not a given object is
 * an array.
 */t.isArray=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},t.ensureArray=/*
 * Ensures that an Array object is always returned
 * returning the original Array of obj is an Array
 * else wrapping the obj in a single element Array
 */function(e){return p(e)?[]:(0,t.isArray)(e)?e:[e]},t.isObject=function(e){return"[object Object]"==Object.prototype.toString.call(e)},t.isEmpty=/*
 * Determine whether or not an object contains
 * any enumerable properties.
 * ob: the object
 */function(e){for(var t in e)return!1;return!0},t.isOnlyPropIn=function(e,t){for(var n in e)if(n!==t)return!1;return!0},t.isEmptyArg=p,t.shallowClone=/*
 * Perform a simple shallow clone of an object.
 * Result is an object irrespective of whether
 * the input is an object or array. All
 * enumerable properties are copied.
 * ob: the object
 */function(e){var t={};for(var n in e)t[n]=e[n];return t},t.prototypicalClone=h,t.inherits=function(e,t){if(a.default.Config.inherits){a.default.Config.inherits(e,t);return}e.super_=t,e.prototype=h(t.prototype,{constructor:e})},t.containsValue=/*
 * Determine whether or not an object has an enumerable
 * property whose value equals a given value.
 * ob:  the object
 * val: the value to find
 */function(e,t){for(var n in e)if(e[n]==t)return!0;return!1},t.intersect=function(e,n){return(0,t.isArray)(n)?g(e,n):m(e,n)},t.arrIntersect=g,t.arrIntersectOb=m,t.arrSubtract=function(e,n){for(var r=[],o=0;o<e.length;o++){var i=e[o];-1==(0,t.arrIndexOf)(n,i)&&r.push(i)}return r},t.arrIndexOf=Array.prototype.indexOf?function(e,t,n){return e.indexOf(t,n)}:function(e,t,n){n=n||0;for(var r=e.length;n<r;n++)if(e[n]===t)return n;return -1},t.arrIn=function(e,n){return -1!==(0,t.arrIndexOf)(e,n)},t.arrDeleteValue=y,t.arrWithoutValue=function(e,t){var n=e.slice();return y(n,t),n},t.keysArray=/*
 * Construct an array of the keys of the enumerable
 * properties of a given object, optionally limited
 * to only the own properties.
 * ob:      the object
 * ownOnly: boolean, get own properties only
 */function(e,t){var n=[];for(var r in e)(!t||Object.prototype.hasOwnProperty.call(e,r))&&n.push(r);return n},t.valuesArray=/*
 * Construct an array of the values of the enumerable
 * properties of a given object, optionally limited
 * to only the own properties.
 * ob:      the object
 * ownOnly: boolean, get own properties only
 */function(e,t){var n=[];for(var r in e)(!t||Object.prototype.hasOwnProperty.call(e,r))&&n.push(e[r]);return n},t.forInOwnNonNullProperties=function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&e[n]&&t(n)},t.arrForEach=Array.prototype.forEach?function(e,t){e.forEach(t)}:function(e,t){for(var n=e.length,r=0;r<n;r++)t(e[r],r,e)},t.safeArrForEach=/* Useful when the function may mutate the array */function(e,n){return(0,t.arrForEach)(e.slice(),n)},t.arrMap=Array.prototype.map?function(e,t){return e.map(t)}:function(e,t){for(var n=[],r=e.length,o=0;o<r;o++)n.push(t(e[o],o,e));return n},t.arrFilter=Array.prototype.filter?function(e,t){return e.filter(t)}:function(e,t){for(var n=[],r=e.length,o=0;o<r;o++)t(e[o])&&n.push(e[o]);return n},t.arrEvery=Array.prototype.every?function(e,t){return e.every(t)}:function(e,t){for(var n=e.length,r=0;r<n;r++)if(!t(e[r],r,e))return!1;return!0},t.allSame=function(e,n){if(0===e.length)return!0;var r=e[0][n];return(0,t.arrEvery)(e,function(e){return e[n]===r})};var v={json:"application/json",jsonp:"application/javascript",xml:"application/xml",html:"text/html",msgpack:"application/x-msgpack"};function b(e){return e.splice(f(e),1)[0]}function _(e){return Math.min((e+2)/3,2)}function w(){return 1-.2*Math.random()}t.defaultGetHeaders=function(e,t){return{accept:v[t||o.json],"X-Ably-Version":s.default.protocolVersion.toString(),"Ably-Agent":(0,s.getAgentString)(e)}},t.defaultPostHeaders=function(e,t){var n;return{accept:n=v[t||o.json],"content-type":n,"X-Ably-Version":s.default.protocolVersion.toString(),"Ably-Agent":(0,s.getAgentString)(e)}},t.arrPopRandomElement=b,t.toQueryString=function(e){var t=[];if(e)for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.length?"?"+t.join("&"):""},t.parseQueryString=function(e){for(var t,n=/([^?&=]+)=?([^&]*)/g,r={};t=n.exec(e);)r[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);return r},t.now=Date.now||function(){/* IE 8 */return new Date().getTime()},t.isErrorInfoOrPartialErrorInfo=function(e){return"object"==typeof e&&null!==e&&("ErrorInfo"==e.constructor.name||"PartialErrorInfo"==e.constructor.name)},t.inspectError=function(e){var t,n;return e instanceof Error||(null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)==="ErrorInfo"||(null===(n=null==e?void 0:e.constructor)||void 0===n?void 0:n.name)==="PartialErrorInfo"?e.toString():a.default.Config.inspect(e)},t.inspectBody=function(e){return a.default.BufferUtils.isBuffer(e)?e.toString():"string"==typeof e?e:a.default.Config.inspect(e)},t.dataSizeBytes=/* Data is assumed to be either a string or a buffer. */function(e){if(a.default.BufferUtils.isBuffer(e))return a.default.BufferUtils.byteLength(e);if("string"==typeof e)return a.default.Config.stringByteSize(e);throw Error("Expected input of Utils.dataSizeBytes to be a buffer or string, but was: "+typeof e)},t.cheapRandStr=function(){return String(Math.random()).substr(2)},t.randomString=function(e){if(a.default.Config.getRandomValues&&"undefined"!=typeof Uint8Array){var t=new Uint8Array(e);return a.default.Config.getRandomValues(t),a.default.BufferUtils.base64Encode(t)}for(var n=a.default.BufferUtils.base64CharSet,r=Math.round(4*e/3),o="",i=0;i<r;i++)o+=n[f(n)];return o},t.randomHexString=function(e){if(a.default.Config.getRandomValues&&"undefined"!=typeof Uint8Array){var t=new Uint8Array(e);return a.default.Config.getRandomValues(t),a.default.BufferUtils.hexEncode(t)}for(var n=a.default.BufferUtils.hexCharSet,r=2*e,o="",i=0;i<r;i++)o+=n[f(n)];return o},t.arrChooseN=/* Pick n elements at random without replacement from an array */function(e,t){for(var n=Math.min(t,e.length),r=e.slice(),o=[],i=0;i<n;i++)o.push(b(r));return o},t.trim=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},t.promisify=function(e,t,n){return new Promise(function(r,o){e[t].apply(e,i.__spreadArray(i.__spreadArray([],n,!1),[function(e,t){e?o(e):r(t)}],!1))})},(r=o=t.Format||(t.Format={})).msgpack="msgpack",r.json="json",t.decodeBody=function(e,t){return"msgpack"==t?a.default.Config.msgpack.decode(e):JSON.parse(String(e))},t.encodeBody=function(e,t){return"msgpack"==t?a.default.Config.msgpack.encode(e,!0):JSON.stringify(e)},t.allToLowerCase=function(e){return e.map(function(e){return e&&e.toLowerCase()})},t.allToUpperCase=function(e){return e.map(function(e){return e&&e.toUpperCase()})},t.getBackoffCoefficient=_,t.getJitterCoefficient=w,t.getRetryTime=/**
 *
 * @param initialTimeout initial timeout value
 * @param retryAttempt integer indicating retryAttempt
 * @returns RetryTimeout value for given timeout and retryAttempt.
 * If x is the value generated then,
 * Upper bound = min((retryAttempt + 2) / 3, 2) * initialTimeout,
 * Lower bound = 0.8 * Upper bound,
 * Lower bound < x < Upper bound
 */function(e,t){return e*_(t)*w()},t.getGlobalObject=function(){return e||("undefined"!=typeof window?window:self)},t.shallowEquals=function(e,t){return Object.keys(e).every(function(n){return e[n]===t[n]})&&Object.keys(t).every(function(n){return t[n]===e[n]})},t.matchDerivedChannel=function(e){var t=e.match(/^(\[([^?]*)(?:(.*))\])?(.+)$/);if(!t||!t.length||t.length<5)throw new l.default("regex match failed",400,40010);// Fail if there is already a channel qualifier, eg [meta]foo should fail instead of just overriding with [filter=xyz]foo
if(t[2])throw new l.default("cannot use a derived option with a ".concat(t[2]," channel"),400,40010);// Return match values to be added to derive channel quantifier.
return{qualifierParam:t[3]||"",channelName:t[4]}},t.toBase64=function(e){return a.default.Config.createHmac?O.from(e,"ascii").toString("base64"):(0,u.stringify)((0,c.parse)(e))};/* WEBPACK VAR INJECTION */}).call(this,n(13));/***/},/* 2 *//***/function(e,t,n){/* WEBPACK VAR INJECTION */(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,o,i=n(0).__importDefault(n(3)),a=e||("undefined"!=typeof window?window:self);function s(e,t){return"".concat(e).padStart(t?3:2,"0")}function l(e){return i.default.Config.logTimestamps?function(t){var n=new Date;e(s(n.getHours())+":"+s(n.getMinutes())+":"+s(n.getSeconds())+"."+s(n.getMilliseconds(),1)+" "+t)}:e}(o=r||(r={}))[o.None=0]="None",o[o.Error=1]="Error",o[o.Major=2]="Major",o[o.Minor=3]="Minor",o[o.Micro=4]="Micro";var u=function(){var e,t,n,r;return"undefined"==typeof Window&&"undefined"==typeof WorkerGlobalScope||"function"/* sensible browsers */==typeof(null===(t=null===(e=null==a?void 0:a.console)||void 0===e?void 0:e.log)||void 0===t?void 0:t.apply)?(n=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log.apply(console,e)},r=console.warn?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn.apply(console,e)}:n):/* IE <= 9 with the console open -- console.log does not
         * inherit from Function, so has no apply method */n=r=(null==a?void 0:a.console.log)?function(){Function.prototype.apply.call(console.log,console,arguments)}:function(){},[n,r].map(l)},c=/** @class */function(){function e(){e.logLevel=e.LOG_DEFAULT}return e.initLogHandlers=function(){var e=u(),t=e[0],n=e[1];this.logHandler=t,this.logErrorHandler=n},e.logLevel=r.Error,// public constants
e.LOG_NONE=r.None,e.LOG_ERROR=r.Error,e.LOG_MAJOR=r.Major,e.LOG_MINOR=r.Minor,e.LOG_MICRO=r.Micro,// aliases
e.LOG_DEFAULT=r.Error,e.LOG_DEBUG=r.Micro,/* public static functions */e.logAction=function(t,n,o){e.shouldLog(t)&&(t===r.Error?e.logErrorHandler:e.logHandler)("Ably: "+n+": "+o)},e.deprecated=function(t,n){e.deprecatedWithMsg(t,"Please use '"+n+"' instead.")},e.deprecatedWithMsg=function(t,n){e.shouldLog(r.Error)&&e.logErrorHandler("Ably: Deprecation warning - '"+t+"' is deprecated and will be removed from a future version. "+n)},/* Where a logging operation is expensive, such as serialisation of data, use shouldLog will prevent
         the object being serialised if the log level will not output the message */e.shouldLog=function(t){return t<=e.logLevel},e.setLog=function(t,n){void 0!==t&&(e.logLevel=t),void 0!==n&&(e.logHandler=e.logErrorHandler=n)},e}();t.default=c;/* WEBPACK VAR INJECTION */}).call(this,n(13));/***/},/* 3 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){};/***/},/* 4 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PartialErrorInfo=void 0;var r=n(0),o=r.__importDefault(n(3)),i=r.__importStar(n(1));function a(e){var t="["+e.constructor.name;return e.message&&(t+=": "+e.message),e.statusCode&&(t+="; statusCode="+e.statusCode),e.code&&(t+="; code="+e.code),e.cause&&(t+="; cause="+i.inspectError(e.cause)),e.href&&!(e.message&&e.message.indexOf("help.ably.io")>-1)&&(t+="; see "+e.href+" "),t+="]"}var s=/** @class */function(e){function t(n,r,o,i){var a=e.call(this,n)||this;return void 0!==Object.setPrototypeOf&&Object.setPrototypeOf(a,t.prototype),a.code=r,a.statusCode=o,a.cause=i,a}return r.__extends(t,e),t.prototype.toString=function(){return a(this)},t.fromValues=function(e){var n=e.message,r=e.code,i=e.statusCode;if("string"!=typeof n||"number"!=typeof r||"number"!=typeof i)throw Error("ErrorInfo.fromValues(): invalid values: "+o.default.Config.inspect(e));var a=Object.assign(new t(n,r,i),e);return a.code&&!a.href&&(a.href="https://help.ably.io/error/"+a.code),a},t}(Error);t.default=s;var l=/** @class */function(e){function t(n,r,o,i){var a=e.call(this,n)||this;return void 0!==Object.setPrototypeOf&&Object.setPrototypeOf(a,t.prototype),a.code=r,a.statusCode=o,a.cause=i,a}return r.__extends(t,e),t.prototype.toString=function(){return a(this)},t}(Error);t.PartialErrorInfo=l;/***/},/* 5 *//***/function(e,t,n){var r;// CommonJS
e.exports=(r=n(6),function(){// Check if typed arrays are supported
if("function"==typeof ArrayBuffer){var e=r.lib.WordArray,t=e.init;(e.init=function(e){// Handle Uint8Array
if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,r=[],o=0;o<n;o++)r[o>>>2]|=e[o]<<24-o%4*8;// Initialize this word array
t.call(this,r,n)}else t.apply(this,arguments)}).prototype=e}}(),r.lib.WordArray);/***/},/* 6 *//***/function(e,t,n){/* WEBPACK VAR INJECTION */(function(t){/*globals window, global, require*//**
	 * CryptoJS core components.
	 */var r;// CommonJS
e.exports=r||function(e,r){// Native crypto import via require (NodeJS)
if("undefined"!=typeof window&&window.crypto&&(o=window.crypto),!o&&"undefined"!=typeof window&&window.msCrypto&&(o=window.msCrypto),!o&&void 0!==t&&t.crypto&&(o=t.crypto),!o)try{o=n(44)}catch(e){}/*
	     * Cryptographically secure pseudorandom number generator
	     *
	     * As Math.random() is cryptographically not safe to use
	     */var o,i=function(){if(o){// Use getRandomValues method (Browser)
if("function"==typeof o.getRandomValues)try{return o.getRandomValues(new Uint32Array(1))[0]}catch(e){}// Use randomBytes method (NodeJS)
if("function"==typeof o.randomBytes)try{return o.randomBytes(4).readInt32LE()}catch(e){}}throw Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),s={},l=s.lib={},u=l.Base={/**
	             * Creates a new object that inherits from this object.
	             *
	             * @param {Object} overrides Properties to copy into the new object.
	             *
	             * @return {Object} The new object.
	             *
	             * @static
	             *
	             * @example
	             *
	             *     var MyType = CryptoJS.lib.Base.extend({
	             *         field: 'value',
	             *
	             *         method: function () {
	             *         }
	             *     });
	             */extend:function(e){// Spawn
var t=a(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),// Initializer's prototype is the subtype object
t.init.prototype=t,// Reference supertype
t.$super=this,t},/**
	             * Extends this object and runs the init method.
	             * Arguments to create() will be passed to init().
	             *
	             * @return {Object} The new object.
	             *
	             * @static
	             *
	             * @example
	             *
	             *     var instance = MyType.create();
	             */create:function(){var e=this.extend();return e.init.apply(e,arguments),e},/**
	             * Initializes a newly created object.
	             * Override this method to add some logic when your objects are created.
	             *
	             * @example
	             *
	             *     var MyType = CryptoJS.lib.Base.extend({
	             *         init: function () {
	             *             // ...
	             *         }
	             *     });
	             */init:function(){},/**
	             * Copies properties into this object.
	             *
	             * @param {Object} properties The properties to mix in.
	             *
	             * @example
	             *
	             *     MyType.mixIn({
	             *         field: 'value'
	             *     });
	             */mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},/**
	             * Creates a copy of this object.
	             *
	             * @return {Object} The clone.
	             *
	             * @example
	             *
	             *     var clone = instance.clone();
	             */clone:function(){return this.init.prototype.extend(this)}},c=l.WordArray=u.extend({/**
	         * Initializes a newly created word array.
	         *
	         * @param {Array} words (Optional) An array of 32-bit words.
	         * @param {number} sigBytes (Optional) The number of significant bytes in the words.
	         *
	         * @example
	         *
	         *     var wordArray = CryptoJS.lib.WordArray.create();
	         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);
	         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);
	         */init:function(e,t){e=this.words=e||[],void 0!=t?this.sigBytes=t:this.sigBytes=4*e.length},/**
	         * Converts this word array to a string.
	         *
	         * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex
	         *
	         * @return {string} The stringified word array.
	         *
	         * @example
	         *
	         *     var string = wordArray + '';
	         *     var string = wordArray.toString();
	         *     var string = wordArray.toString(CryptoJS.enc.Utf8);
	         */toString:function(e){return(e||d).stringify(this)},/**
	         * Concatenates a word array to this word array.
	         *
	         * @param {WordArray} wordArray The word array to append.
	         *
	         * @return {WordArray} This word array.
	         *
	         * @example
	         *
	         *     wordArray1.concat(wordArray2);
	         */concat:function(e){// Shortcuts
var t=this.words,n=e.words,r=this.sigBytes,o=e.sigBytes;// Concat
if(// Clamp excess bits
this.clamp(),r%4)for(var i=0;i<o;i++){var a=n[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=a<<24-(r+i)%4*8}else for(var i=0;i<o;i+=4)t[r+i>>>2]=n[i>>>2];// Chainable
return this.sigBytes+=o,this},/**
	         * Removes insignificant bits.
	         *
	         * @example
	         *
	         *     wordArray.clamp();
	         */clamp:function(){// Shortcuts
var t=this.words,n=this.sigBytes;// Clamp
t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},/**
	         * Creates a copy of this word array.
	         *
	         * @return {WordArray} The clone.
	         *
	         * @example
	         *
	         *     var clone = wordArray.clone();
	         */clone:function(){var e=u.clone.call(this);return e.words=this.words.slice(0),e},/**
	         * Creates a word array filled with random bytes.
	         *
	         * @param {number} nBytes The number of random bytes to generate.
	         *
	         * @return {WordArray} The random word array.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var wordArray = CryptoJS.lib.WordArray.random(16);
	         */random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(i());return new c.init(t,e)}}),f=s.enc={},d=f.Hex={/**
	         * Converts a word array to a hex string.
	         *
	         * @param {WordArray} wordArray The word array.
	         *
	         * @return {string} The hex string.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);
	         */stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},/**
	         * Converts a hex string to a word array.
	         *
	         * @param {string} hexStr The hex string.
	         *
	         * @return {WordArray} The word array.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var wordArray = CryptoJS.enc.Hex.parse(hexString);
	         */parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new c.init(n,t/2)}},p=f.Latin1={/**
	         * Converts a word array to a Latin1 string.
	         *
	         * @param {WordArray} wordArray The word array.
	         *
	         * @return {string} The Latin1 string.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);
	         */stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o++){var i=t[o>>>2]>>>24-o%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},/**
	         * Converts a Latin1 string to a word array.
	         *
	         * @param {string} latin1Str The Latin1 string.
	         *
	         * @return {WordArray} The word array.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);
	         */parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new c.init(n,t)}},h=f.Utf8={/**
	         * Converts a word array to a UTF-8 string.
	         *
	         * @param {WordArray} wordArray The word array.
	         *
	         * @return {string} The UTF-8 string.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);
	         */stringify:function(e){try{return decodeURIComponent(escape(p.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},/**
	         * Converts a UTF-8 string to a word array.
	         *
	         * @param {string} utf8Str The UTF-8 string.
	         *
	         * @return {WordArray} The word array.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);
	         */parse:function(e){return p.parse(unescape(encodeURIComponent(e)))}},g=l.BufferedBlockAlgorithm=u.extend({/**
	         * Resets this block algorithm's data buffer to its initial state.
	         *
	         * @example
	         *
	         *     bufferedBlockAlgorithm.reset();
	         */reset:function(){// Initial values
this._data=new c.init,this._nDataBytes=0},/**
	         * Adds new data to this block algorithm's buffer.
	         *
	         * @param {WordArray|string} data The data to append. Strings are converted to a WordArray using UTF-8.
	         *
	         * @example
	         *
	         *     bufferedBlockAlgorithm._append('data');
	         *     bufferedBlockAlgorithm._append(wordArray);
	         */_append:function(e){"string"==typeof e&&(e=h.parse(e)),// Append
this._data.concat(e),this._nDataBytes+=e.sigBytes},/**
	         * Processes available data blocks.
	         *
	         * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.
	         *
	         * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.
	         *
	         * @return {WordArray} The processed data.
	         *
	         * @example
	         *
	         *     var processedData = bufferedBlockAlgorithm._process();
	         *     var processedData = bufferedBlockAlgorithm._process(!!'flush');
	         */_process:function(t){// Shortcuts
var n,r=this._data,o=r.words,i=r.sigBytes,a=this.blockSize,s=i/(4*a),l=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,u=e.min(4*l,i);// Process blocks
if(l){for(var f=0;f<l;f+=a)this._doProcessBlock(o,f);// Remove processed words
n=o.splice(0,l),r.sigBytes-=u}// Return processed words
return new c.init(n,u)},/**
	         * Creates a copy of this object.
	         *
	         * @return {Object} The clone.
	         *
	         * @example
	         *
	         *     var clone = bufferedBlockAlgorithm.clone();
	         */clone:function(){var e=u.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});l.Hasher=g.extend({/**
	         * Configuration options.
	         */cfg:u.extend(),/**
	         * Initializes a newly created hasher.
	         *
	         * @param {Object} cfg (Optional) The configuration options to use for this hash computation.
	         *
	         * @example
	         *
	         *     var hasher = CryptoJS.algo.SHA256.create();
	         */init:function(e){// Apply config defaults
this.cfg=this.cfg.extend(e),// Set initial values
this.reset()},/**
	         * Resets this hasher to its initial state.
	         *
	         * @example
	         *
	         *     hasher.reset();
	         */reset:function(){// Reset data buffer
g.reset.call(this),// Perform concrete-hasher logic
this._doReset()},/**
	         * Updates this hasher with a message.
	         *
	         * @param {WordArray|string} messageUpdate The message to append.
	         *
	         * @return {Hasher} This hasher.
	         *
	         * @example
	         *
	         *     hasher.update('message');
	         *     hasher.update(wordArray);
	         */update:function(e){// Chainable
return(// Append
this._append(e),// Update the hash
this._process(),this)},/**
	         * Finalizes the hash computation.
	         * Note that the finalize operation is effectively a destructive, read-once operation.
	         *
	         * @param {WordArray|string} messageUpdate (Optional) A final message update.
	         *
	         * @return {WordArray} The hash.
	         *
	         * @example
	         *
	         *     var hash = hasher.finalize();
	         *     var hash = hasher.finalize('message');
	         *     var hash = hasher.finalize(wordArray);
	         */finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,/**
	         * Creates a shortcut function to a hasher's object interface.
	         *
	         * @param {Hasher} hasher The hasher to create a helper for.
	         *
	         * @return {Function} The shortcut function.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);
	         */_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},/**
	         * Creates a shortcut function to the HMAC's object interface.
	         *
	         * @param {Hasher} hasher The hasher to use in this HMAC helper.
	         *
	         * @return {Function} The shortcut function.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);
	         */_createHmacHelper:function(e){return function(t,n){return new m.HMAC.init(e,n).finalize(t)}}});/**
	     * Algorithm namespace.
	     */var m=s.algo={};return s}(Math);/* WEBPACK VAR INJECTION */}).call(this,n(13));/***/},/* 7 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(2)),a=r.__importDefault(n(3));/* Call the listener, catch any exceptions and log, but continue operation*/function s(e,t,n){try{t.apply(e,n)}catch(e){i.default.logAction(i.default.LOG_ERROR,"EventEmitter.emit()","Unexpected listener exception: "+e+"; stack = "+(e&&e.stack))}}/**
 * Remove listeners that match listener
 * @param targetListeners is an array of listener arrays or event objects with arrays of listeners
 * @param listener the listener callback to remove
 * @param eventFilter (optional) event name instructing the function to only remove listeners for the specified event
 */function l(e,t,n){for(var r,i,a,s=0;s<e.length;s++)if(r=e[s],n&&(r=r[n]),o.isArray(r)){for(;-1!==(i=o.arrIndexOf(r,t));)r.splice(i,1);n&&0===r.length&&delete e[s][n]}else if(o.isObject(r))/* events */for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&o.isArray(r[a])&&l([r],t,a)}var u=/** @class */function(){function e(){this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null)}return e.prototype.on=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];if("function"==typeof r)this.any.push(r);else throw Error("EventListener.on(): Invalid arguments: "+a.default.Config.inspect(t))}if(2===t.length){var i=t[0],s=t[1];if("function"!=typeof s)throw Error("EventListener.on(): Invalid arguments: "+a.default.Config.inspect(t));if(o.isEmptyArg(i))this.any.push(s);else if(o.isArray(i))i.forEach(function(t){e.on(t,s)});else{if("string"!=typeof i)throw Error("EventListener.on(): Invalid arguments: "+a.default.Config.inspect(t));(this.events[i]||(this.events[i]=[])).push(s)}}},e.prototype.off=function(){for(var e,t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(0==n.length||o.isEmptyArg(n[0])&&o.isEmptyArg(n[1])){this.any=[],this.events=Object.create(null),this.anyOnce=[],this.eventsOnce=Object.create(null);return}var i=n[0],s=n[1],u=null,c=null;if(1!==n.length&&s){if("function"!=typeof s)throw Error("EventEmitter.off(): invalid arguments:"+a.default.Config.inspect(n));c=(e=[i,s])[0],u=e[1]}else"function"==typeof i?/* we take this to be the listener and treat the event as "any" .. */u=i:c=i;if(u&&o.isEmptyArg(c)){l([this.any,this.events,this.anyOnce,this.eventsOnce],u);return}if(o.isArray(c)){c.forEach(function(e){t.off(e,u)});return}/* "normal" case where event is an actual event */if("string"!=typeof c)throw Error("EventEmitter.off(): invalid arguments:"+a.default.Config.inspect(n));u?l([this.events,this.eventsOnce],u,c):(delete this.events[c],delete this.eventsOnce[c])},/**
     * Get the array of listeners for a given event; excludes once events
     * @param event (optional) the name of the event, or none for 'any'
     * @return array of events, or null if none
     */e.prototype.listeners=function(e){if(e){var t=this.events[e]||[];return this.eventsOnce[e]&&Array.prototype.push.apply(t,this.eventsOnce[e]),t.length?t:null}return this.any.length?this.any:null},/**
     * Emit an event
     * @param event the event name
     * @param args the arguments to pass to the listener
     */e.prototype.emit=function(e){for(var t=[],n=1/* , args... */;n<arguments.length/* , args... */;n++)t[n-1]=arguments[n];/* , args... */var r={event:e},i=[];/* , args... */this.anyOnce.length&&(Array.prototype.push.apply(i,this.anyOnce),this.anyOnce=[]),this.any.length&&Array.prototype.push.apply(i,this.any);var a=this.eventsOnce[e];a&&(Array.prototype.push.apply(i,a),delete this.eventsOnce[e]);var l=this.events[e];l&&Array.prototype.push.apply(i,l),o.arrForEach(i,function(e){s(r,e,t)})},e.prototype.once=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.length;if((0===r||1===r&&"function"!=typeof t[0])&&a.default.Config.Promise){var i=t[0];return new a.default.Config.Promise(function(t){e.once(i,t)})}var s=t[0],l=t[1];if(1===t.length&&"function"==typeof s)this.anyOnce.push(s);else if(o.isEmptyArg(s)){if("function"!=typeof l)throw Error("EventEmitter.once(): Invalid arguments:"+a.default.Config.inspect(t));this.anyOnce.push(l)}else if(o.isArray(s)){var u=this,c=function(){var e=Array.prototype.slice.call(arguments);if(o.arrForEach(s,function(e){u.off(e,c)}),"function"!=typeof l)throw Error("EventEmitter.once(): Invalid arguments:"+a.default.Config.inspect(t));l.apply(this,e)};o.arrForEach(s,function(e){u.on(e,c)})}else{if("string"!=typeof s)throw Error("EventEmitter.once(): Invalid arguments:"+a.default.Config.inspect(t));var f=this.eventsOnce[s]||(this.eventsOnce[s]=[]);if(l){if("function"!=typeof l)throw Error("EventEmitter.once(): Invalid arguments:"+a.default.Config.inspect(t));f.push(l)}}},/**
     * Private API
     *
     * Listen for a single occurrence of a state event and fire immediately if currentState matches targetState
     * @param targetState the name of the state event to listen to
     * @param currentState the name of the current state of this object
     * @param listener the listener to be called
     * @param listenerArgs
     */e.prototype.whenState=function(t,n,r){for(var o=this,i=[],l=3;l<arguments.length;l++)i[l-3]=arguments[l];if("string"!=typeof t||"string"!=typeof n)throw"whenState requires a valid event String argument";if("function"!=typeof r&&a.default.Config.Promise)return new a.default.Config.Promise(function(r){e.prototype.whenState.apply(o,[t,n,r].concat(i))});t===n?s({event:t},r,i):this.once(t,r)},e}();t.default=u;/***/},/* 8 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaults=t.normaliseOptions=t.objectifyOptions=t.getAgentString=t.getHosts=t.getFallbackHosts=t.environmentFallbackHosts=t.getHttpScheme=t.getPort=t.getHost=void 0;var r=n(0),o=r.__importDefault(n(3)),i=r.__importStar(n(1)),a=r.__importDefault(n(2)),s=r.__importDefault(n(4)),l=n(43),u="ably-js/"+l.version,c={ENVIRONMENT:"",REST_HOST:"rest.ably.io",REALTIME_HOST:"realtime.ably.io",FALLBACK_HOSTS:["A.ably-realtime.com","B.ably-realtime.com","C.ably-realtime.com","D.ably-realtime.com","E.ably-realtime.com"],PORT:80,TLS_PORT:443,TIMEOUTS:{/* Documented as options params: */disconnectedRetryTimeout:15e3,suspendedRetryTimeout:3e4,/* Undocumented, but part of the api and can be used by customers: */httpRequestTimeout:15e3,channelRetryTimeout:15e3,fallbackRetryTimeout:6e5,/* For internal / test use only: */connectionStateTtl:12e4,realtimeRequestTimeout:1e4,recvTimeout:9e4,preferenceConnectTimeout:6e3,parallelUpgradeDelay:6e3},httpMaxRetryCount:3,maxMessageSize:65536,version:l.version,protocolVersion:2,agent:u,getHost:f,getPort:d,getHttpScheme:p,environmentFallbackHosts:h,getFallbackHosts:g,getHosts:m,checkHost:y,objectifyOptions:v,normaliseOptions:b};function f(e,t,n){return t=n?t==e.restHost&&e.realtimeHost||t||e.realtimeHost:t||e.restHost}function d(e,t){return t||e.tls?e.tlsPort:e.port}function p(e){return e.tls?"https://":"http://"}// construct environment fallback hosts as per RSC15i
function h(e){return[e+"-a-fallback.ably-realtime.com",e+"-b-fallback.ably-realtime.com",e+"-c-fallback.ably-realtime.com",e+"-d-fallback.ably-realtime.com",e+"-e-fallback.ably-realtime.com"]}function g(e){var t=e.fallbackHosts,n=void 0!==e.httpMaxRetryCount?e.httpMaxRetryCount:c.httpMaxRetryCount;return t?i.arrChooseN(t,n):[]}function m(e){return[e.restHost].concat(g(e))}function y(e){if("string"!=typeof e)throw new s.default("host must be a string; was a "+typeof e,4e4,400);if(!e.length)throw new s.default("host must not be zero-length",4e4,400)}function v(e){return"string"==typeof e?-1==e.indexOf(":")?{token:e}:{key:e}:e}function b(e){if(e.host&&(a.default.deprecated("host","restHost"),e.restHost=e.host),e.wsHost&&(a.default.deprecated("wsHost","realtimeHost"),e.realtimeHost=e.wsHost),e.queueEvents&&(a.default.deprecated("queueEvents","queueMessages"),e.queueMessages=e.queueEvents),e.fallbackHostsUseDefault){/* fallbackHostsUseDefault and fallbackHosts are mutually exclusive as per TO3k7 */if(e.fallbackHosts){var t="fallbackHosts and fallbackHostsUseDefault cannot both be set";throw a.default.logAction(a.default.LOG_ERROR,"Defaults.normaliseOptions",t),new s.default(t,4e4,400)}/* default fallbacks can't be used with custom ports */if(e.port||e.tlsPort){var t="fallbackHostsUseDefault cannot be set when port or tlsPort are set";throw a.default.logAction(a.default.LOG_ERROR,"Defaults.normaliseOptions",t),new s.default(t,4e4,400)}e.environment?a.default.deprecatedWithMsg("fallbackHostsUseDefault","There is no longer a need to set this when the environment option is also set since the library will now generate the correct fallback hosts using the environment option."):a.default.deprecated("fallbackHostsUseDefault","fallbackHosts: Ably.Defaults.FALLBACK_HOSTS"),/* use the default fallback hosts as requested */e.fallbackHosts=c.FALLBACK_HOSTS}!0===e.recover&&(a.default.deprecated("{recover: true}","{recover: function(lastConnectionDetails, cb) { cb(true); }}"),e.recover=function(e,t){t(!0)}),"function"==typeof e.recover&&!0===e.closeOnUnload&&(a.default.logAction(a.default.LOG_ERROR,"Defaults.normaliseOptions","closeOnUnload was true and a session recovery function was set - these are mutually exclusive, so unsetting the latter"),e.recover=void 0),"closeOnUnload"in e||/* Have closeOnUnload default to true unless we have any indication that
         * the user may want to recover the connection */(e.closeOnUnload=!e.recover),e.transports&&i.arrIn(e.transports,"xhr")&&(a.default.deprecated('transports: ["xhr"]','transports: ["xhr_streaming"]'),i.arrDeleteValue(e.transports,"xhr"),e.transports.push("xhr_streaming")),"queueMessages"in e||(e.queueMessages=!0);/* infer hosts and fallbacks based on the configured environment */var n=e.environment&&String(e.environment).toLowerCase()||c.ENVIRONMENT,l=!n||"production"===n;e.fallbackHosts||e.restHost||e.realtimeHost||e.port||e.tlsPort||(e.fallbackHosts=l?c.FALLBACK_HOSTS:h(n));var u=e.restHost||(l?c.REST_HOST:n+"-"+c.REST_HOST),f=e.realtimeHost?e.realtimeHost:e.restHost?(a.default.logAction(a.default.LOG_MINOR,"Defaults.normaliseOptions",'restHost is set to "'+e.restHost+'" but realtimeHost is not set, so setting realtimeHost to "'+e.restHost+'" too. If this is not what you want, please set realtimeHost explicitly.'),e.restHost):l?c.REALTIME_HOST:n+"-"+c.REALTIME_HOST;i.arrForEach((e.fallbackHosts||[]).concat(u,f),y),e.port=e.port||c.PORT,e.tlsPort=e.tlsPort||c.TLS_PORT,"tls"in e||(e.tls=!0);var d=function(e){/* Allow values passed in options to override default timeouts */var t={};for(var n in c.TIMEOUTS)t[n]=e[n]||c.TIMEOUTS[n];return t}(e);"useBinaryProtocol"in e?e.useBinaryProtocol=o.default.Config.supportsBinary&&e.useBinaryProtocol:e.useBinaryProtocol=o.default.Config.preferBinary,e.clientId&&((e.headers=e.headers||{})["X-Ably-ClientId"]=o.default.BufferUtils.base64Encode(o.default.BufferUtils.utf8Encode(e.clientId))),"idempotentRestPublishing"in e||(e.idempotentRestPublishing=!0),e.promises&&!o.default.Config.Promise&&(a.default.logAction(a.default.LOG_ERROR,"Defaults.normaliseOptions","{promises: true} was specified, but no Promise constructor found; disabling promises"),e.promises=!1);var p=null,g=e.connectivityCheckUrl;if(e.connectivityCheckUrl){var m=e.connectivityCheckUrl.split("?"),v=m[0],b=m[1];p=b?i.parseQueryString(b):{},-1===v.indexOf("://")&&(v="https://"+v),g=v}return r.__assign(r.__assign({},e),{useBinaryProtocol:"useBinaryProtocol"in e?o.default.Config.supportsBinary&&e.useBinaryProtocol:o.default.Config.preferBinary,realtimeHost:f,restHost:u,maxMessageSize:e.maxMessageSize||c.maxMessageSize,timeouts:d,connectivityCheckParams:p,connectivityCheckUrl:g})}t.getHost=f,t.getPort=d,t.getHttpScheme=p,t.environmentFallbackHosts=h,t.getFallbackHosts=g,t.getHosts=m,t.getAgentString=function(e){var t=c.agent;if(e.agents)for(var n in e.agents)t+=" "+n+"/"+e.agents[n];return t},t.objectifyOptions=v,t.normaliseOptions=b,t.default=c,t.getDefaults=function(e){return Object.assign(c,e)};/***/},/* 9 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=r.__importDefault(n(2)),a=r.__importDefault(n(4)),s=r.__importStar(n(1)),l=/** @class */function(){function e(){}return(/**
     * Overload toJSON() to intercept JSON.stringify()
     * @return {*}
     */e.prototype.toJSON=function(){/* encode data to base64 if present and we're returning real JSON;
         * although msgpack calls toJSON(), we know it is a stringify()
         * call if it has a non-empty arguments list */var e=this.encoding,t=this.data;return t&&o.default.BufferUtils.isBuffer(t)&&(arguments.length>0?(/* stringify call */e=e?e+"/base64":"base64",t=o.default.BufferUtils.base64Encode(t)):/* Called by msgpack. toBuffer returns a datatype understandable by
                 * that platform's msgpack implementation (Buffer in node, Uint8Array
                 * in browsers) */t=o.default.BufferUtils.toBuffer(t)),{name:this.name,id:this.id,clientId:this.clientId,connectionId:this.connectionId,connectionKey:this.connectionKey,extras:this.extras,encoding:e,data:t}},e.prototype.toString=function(){var e="[Message";return this.name&&(e+="; name="+this.name),this.id&&(e+="; id="+this.id),this.timestamp&&(e+="; timestamp="+this.timestamp),this.clientId&&(e+="; clientId="+this.clientId),this.connectionId&&(e+="; connectionId="+this.connectionId),this.encoding&&(e+="; encoding="+this.encoding),this.extras&&(e+="; extras ="+JSON.stringify(this.extras)),this.data&&("string"==typeof this.data?e+="; data="+this.data:o.default.BufferUtils.isBuffer(this.data)?e+="; data (buffer)="+o.default.BufferUtils.base64Encode(this.data):e+="; data (json)="+JSON.stringify(this.data)),this.extras&&(e+="; extras="+JSON.stringify(this.extras)),e+="]"},e.encrypt=function(e,t,n){var r=e.data,i=e.encoding,a=t.channelCipher;i=i?i+"/":"",o.default.BufferUtils.isBuffer(r)||(r=o.default.BufferUtils.utf8Encode(String(r)),i+="utf-8/"),a.encrypt(r,function(t,r){if(t){n(t);return}e.data=r,e.encoding=i+"cipher+"+a.algorithm,n(null,e)})},e.encode=function(t,n,r){var i=t.data;if(!("string"==typeof i||o.default.BufferUtils.isBuffer(i)||null==i)){if(s.isObject(i)||s.isArray(i))t.data=JSON.stringify(i),t.encoding=t.encoding?t.encoding+"/json":"json";else throw new a.default("Data type is unsupported",40013,400)}null!=n&&n.cipher?e.encrypt(t,n,r):r(null,t)},e.encodeArray=function(t,n,r){for(var o=0,i=0;i<t.length;i++)e.encode(t[i],n,function(e){if(e){r(e);return}++o==t.length&&r(null,t)})},e.decode=function(e,t){var n=t&&t.channelOptions?t:{channelOptions:t,plugins:{},baseEncodedPreviousPayload:void 0},r=e.data,i=e.encoding;if(i){var s=i.split("/"),l=void 0,u=s.length,c=e.data,f="";try{for(;(l=u)>0;){// eslint-disable-next-line security/detect-unsafe-regex
var d=s[--u].match(/([-\w]+)(\+([\w-]+))?/);if(!d)break;switch(f=d[1]){case"base64":c=o.default.BufferUtils.base64Decode(String(c)),l==s.length&&(r=c);continue;case"utf-8":c=o.default.BufferUtils.utf8Decode(c);continue;case"json":c=JSON.parse(c);continue;case"cipher":if(null!=n.channelOptions&&n.channelOptions.cipher&&n.channelOptions.channelCipher){var p=d[3],h=n.channelOptions.channelCipher;/* don't attempt to decrypt unless the cipher params are compatible */if(p!=h.algorithm)throw Error("Unable to decrypt message with given cipher; incompatible cipher params");c=h.decrypt(c);continue}throw Error("Unable to decrypt message; not an encrypted channel");case"vcdiff":if(!n.plugins||!n.plugins.vcdiff)throw new a.default("Missing Vcdiff decoder (https://github.com/ably-forks/vcdiff-decoder)",40019,400);if("undefined"==typeof Uint8Array)throw new a.default("Delta decoding not supported on this browser (need ArrayBuffer & Uint8Array)",40020,400);try{var g=n.baseEncodedPreviousPayload;"string"==typeof g&&(g=o.default.BufferUtils.utf8Encode(g)),/* vcdiff expects Uint8Arrays, can't copy with ArrayBuffers. (also, if we
                                 * don't have a TextDecoder, deltaBase might be a WordArray here, so need
                                 * to process it into a buffer anyway) */g=o.default.BufferUtils.toBuffer(g),c=o.default.BufferUtils.toBuffer(c),r=c=o.default.BufferUtils.typedArrayToBuffer(n.plugins.vcdiff.decode(c,g))}catch(e){throw new a.default("Vcdiff delta decode failed with "+e,40018,400)}continue;default:throw Error("Unknown encoding")}}}catch(e){throw new a.default("Error processing the "+f+" encoding, decoder returned "+e.message+"",e.code||40013,400)}finally{e.encoding=l<=0?null:s.slice(0,l).join("/"),e.data=c}}n.baseEncodedPreviousPayload=r},e.fromResponseBody=function(t,n,r){r&&(t=s.decodeBody(t,r));for(var o=0;o<t.length;o++){var a=t[o]=e.fromValues(t[o]);try{e.decode(a,n)}catch(e){i.default.logAction(i.default.LOG_ERROR,"Message.fromResponseBody()",e.toString())}}return t},e.fromValues=function(t){return Object.assign(new e,t)},e.fromValuesArray=function(t){for(var n=t.length,r=Array(n),o=0;o<n;o++)r[o]=e.fromValues(t[o]);return r},e.fromEncoded=function(t,n){var r=e.fromValues(t),a=function(e){if(e&&e.cipher){if(!o.default.Crypto)throw Error("Encryption not enabled; use ably.encryption.js instead");var t=o.default.Crypto.getCipher(e.cipher);return{cipher:t.cipherParams,channelCipher:t.cipher}}return null!=e?e:{}}(null!=n?n:null);/* if decoding fails at any point, catch and return the message decoded to
         * the fullest extent possible */try{e.decode(r,a)}catch(e){i.default.logAction(i.default.LOG_ERROR,"Message.fromEncoded()",e.toString())}return r},e.fromEncodedArray=function(t,n){return t.map(function(t){return e.fromEncoded(t,n)})},/* This should be called on encode()d (and encrypt()d) Messages (as it
     * assumes the data is a string or buffer) */e.getMessagesSize=function(e){for(var t,n=0,r=0;r<e.length;r++)n+=(t=e[r]).size||(t.size=function(e){var t=0;return e.name&&(t+=e.name.length),e.clientId&&(t+=e.clientId.length),e.extras&&(t+=JSON.stringify(e.extras).length),e.data&&(t+=s.dataSizeBytes(e.data)),t}(t));return n},e.serialize=s.encodeBody,e)}();t.default=l;/***/},/* 10 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(4)),a=r.__importDefault(n(9)),s=r.__importDefault(n(15)),l={HEARTBEAT:0,ACK:1,NACK:2,CONNECT:3,CONNECTED:4,DISCONNECT:5,DISCONNECTED:6,CLOSE:7,CLOSED:8,ERROR:9,ATTACH:10,ATTACHED:11,DETACH:12,DETACHED:13,PRESENCE:14,MESSAGE:15,SYNC:16,AUTH:17,ACTIVATE:18},u=[];Object.keys(l).forEach(function(e){u[l[e]]=e});var c={/* Channel attach state flags */HAS_PRESENCE:1,HAS_BACKLOG:2,RESUMED:4,TRANSIENT:16,ATTACH_RESUME:32,/* Channel mode flags */PRESENCE:65536,PUBLISH:131072,SUBSCRIBE:262144,PRESENCE_SUBSCRIBE:524288},f=Object.keys(c);function d(e){var t=[];if(e)for(var n=0;n<e.length;n++)t.push(e[n].toString());return"[ "+t.join(", ")+" ]"}c.MODE_ALL=c.PRESENCE|c.PUBLISH|c.SUBSCRIBE|c.PRESENCE_SUBSCRIBE;var p="id channel channelSerial connectionId count msgSerial timestamp".split(" "),h=/** @class */function(){function e(){var e=this;this.hasFlag=function(t){return(e.flags&c[t])>0}}return e.prototype.setFlag=function(e){return this.flags=this.flags|c[e]},e.prototype.getMode=function(){return this.flags&&this.flags&c.MODE_ALL},e.prototype.encodeModesToFlags=function(e){var t=this;e.forEach(function(e){return t.setFlag(e)})},e.prototype.decodeModesFromFlags=function(){var t=this,n=[];return e.channelModes.forEach(function(e){t.hasFlag(e)&&n.push(e)}),n.length>0?n:void 0},e.fromValues=function(t){return Object.assign(new e,t)},e.Action=l,e.channelModes=["PRESENCE","PUBLISH","SUBSCRIBE","PRESENCE_SUBSCRIBE"],e.ActionName=u,e.serialize=o.encodeBody,e.deserialize=function(t,n){var r=o.decodeBody(t,n);return e.fromDeserialized(r)},e.fromDeserialized=function(t){var n=t.error;n&&(t.error=i.default.fromValues(n));var r=t.messages;if(r)for(var o=0;o<r.length;o++)r[o]=a.default.fromValues(r[o]);var l=t.presence;if(l)for(var o=0;o<l.length;o++)l[o]=s.default.fromValues(l[o],!0);return Object.assign(new e,t)},e.stringify=function(t){var n,r="[ProtocolMessage";void 0!==t.action&&(r+="; action="+e.ActionName[t.action]);for(var l=0;l<p.length;l++)void 0!==t[n=p[l]]&&(r+="; "+n+"="+t[n]);if(t.messages&&(r+="; messages="+d(a.default.fromValuesArray(t.messages))),t.presence&&(r+="; presence="+d(s.default.fromValuesArray(t.presence))),t.error&&(r+="; error="+i.default.fromValues(t.error).toString()),t.auth&&t.auth.accessToken&&(r+="; token="+t.auth.accessToken),t.flags&&(r+="; flags="+f.filter(t.hasFlag).join(",")),t.params){var u="";o.forInOwnNonNullProperties(t.params,function(e){u.length>0&&(u+="; "),u+=e+"="+t.params[e]}),u.length>0&&(r+="; params=["+u+"]")}return r+"]"},e}();t.default=h;/***/},/* 11 *//***/function(e,t,n){var r,o;// CommonJS
e.exports=(o=(r=n(6)).lib.WordArray,r.enc.Base64={/**
	         * Converts a word array to a Base64 string.
	         *
	         * @param {WordArray} wordArray The word array.
	         *
	         * @return {string} The Base64 string.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var base64String = CryptoJS.enc.Base64.stringify(wordArray);
	         */stringify:function(e){// Shortcuts
var t=e.words,n=e.sigBytes,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";// Clamp excess bits
e.clamp();for(var o=[],i=0;i<n;i+=3)for(var a=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;s<4&&i+.75*s<n;s++)o.push(r.charAt(a>>>6*(3-s)&63));// Convert
var l=r.charAt(64);if(l)for(;o.length%4;)o.push(l);return o.join("")},/**
	         * Converts a Base64 string to a word array.
	         *
	         * @param {string} base64Str The Base64 string.
	         *
	         * @return {WordArray} The word array.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var wordArray = CryptoJS.enc.Base64.parse(base64String);
	         */parse:function(e){// Shortcuts
var t=e.length,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var i=0;i<n.length;i++)r[n.charCodeAt(i)]=i}// Ignore padding
var a=n.charAt(64);if(a){var s=e.indexOf(a);-1!==s&&(t=s)}// Convert
return function(e,t,n){for(var r=[],i=0,a=0;a<t;a++)if(a%4){var s=n[e.charCodeAt(a-1)]<<a%4*2|n[e.charCodeAt(a)]>>>6-a%4*2;r[i>>>2]|=s<<24-i%4*8,i++}return o.create(r,i)}(e,t,r)}},r.enc.Base64);/***/},/* 12 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(10)),a=r.__importDefault(n(26)),s=r.__importDefault(n(2)),l=r.__importDefault(n(8)),u=r.__importDefault(n(20)),c=r.__importDefault(n(17)),f=r.__importDefault(n(4)),d=r.__importDefault(n(21)),p=r.__importDefault(n(3));function h(e){return(/* err will be either a legacy (non-protocolmessage) comet error response
     * (which will have an err.code), or a xhr/network error (which won't). */e.code&&!c.default.isTokenErr(e)&&(o.arrIn([80015,80017,80030],e.code)||e.code>=4e4&&e.code<5e4)?[i.default.fromValues({action:i.default.Action.ERROR,error:e})]:[i.default.fromValues({action:i.default.Action.DISCONNECTED,error:e})])}/*
 * A base comet transport class
 */var g=/** @class */function(e){function t(t,n,r){var o=e.call(this,t,n,r,/* binary not supported for comet so force JSON protocol */!0)||this;return(/* For comet, we could do the auth update by aborting the current recv and
         * starting a new one with the new token, that'd be sufficient for realtime.
         * Problem is JSONP - you can't cancel truly abort a recv once started. So
         * we need to send an AUTH for jsonp. In which case it's simpler to keep all
         * comet transports the same and do it for all of them. So we send the AUTH
         * instead, and don't need to abort the recv */o.onAuthUpdated=function(e){o.authParams={access_token:e.token}},o.stream=!("stream"in r)||r.stream,o.sendRequest=null,o.recvRequest=null,o.pendingCallback=null,o.pendingItems=null,o)}return r.__extends(t,e),t.prototype.connect=function(){var e=this;s.default.logAction(s.default.LOG_MINOR,"CometTransport.connect()","starting"),a.default.prototype.connect.call(this);var t=this.params,n=t.options,r=l.default.getHost(n,t.host),i=l.default.getPort(n),u=n.tls?"https://":"http://";this.baseUri=u+r+":"+i+"/comet/";var c=this.baseUri+"connect";s.default.logAction(s.default.LOG_MINOR,"CometTransport.connect()","uri: "+c),this.auth.getAuthParams(function(t,n){if(t){e.disconnect(t);return}if(!e.isDisposed){e.authParams=n;var r=e.params.getConnectParams(n);"stream"in r&&(e.stream=r.stream),s.default.logAction(s.default.LOG_MINOR,"CometTransport.connect()","connectParams:"+o.toQueryString(r));/* this will be the 'recvRequest' so this connection can stream messages */var i=!1,a=e.recvRequest=e.createRequest(c,null,r,null,e.stream?d.default.REQ_RECV_STREAM:d.default.REQ_RECV);a.on("data",function(t){e.recvRequest&&(i||(i=!0,e.emit("preconnect")),e.onData(t))}),a.on("complete",function(t){if(e.recvRequest||/* the transport was disposed before we connected */(t=t||new f.default("Request cancelled",80003,400)),e.recvRequest=null,i||t||(i=!0,e.emit("preconnect")),e.onActivity(),t){t.code?/* A protocol error received from realtime. TODO: once realtime
                         * consistendly sends errors wrapped in protocol messages, should be
                         * able to remove this */e.onData(h(t)):/* A network/xhr error. Don't bother wrapping in a protocol message,
                         * just disconnect the transport */e.disconnect(t);return}p.default.Config.nextTick(function(){e.recv()})}),a.exec()}})},t.prototype.requestClose=function(){s.default.logAction(s.default.LOG_MINOR,"CometTransport.requestClose()"),this._requestCloseOrDisconnect(!0)},t.prototype.requestDisconnect=function(){s.default.logAction(s.default.LOG_MINOR,"CometTransport.requestDisconnect()"),this._requestCloseOrDisconnect(!1)},t.prototype._requestCloseOrDisconnect=function(e){var t=this,n=e?this.closeUri:this.disconnectUri;if(n){var r=this.createRequest(n,null,this.authParams,null,d.default.REQ_SEND);r.on("complete",function(n){n&&(s.default.logAction(s.default.LOG_ERROR,"CometTransport.request"+(e?"Close()":"Disconnect()"),"request returned err = "+o.inspectError(n)),t.finish("disconnected",n))}),r.exec()}},t.prototype.dispose=function(){var e=this;s.default.logAction(s.default.LOG_MINOR,"CometTransport.dispose()",""),this.isDisposed||(this.isDisposed=!0,this.recvRequest&&(s.default.logAction(s.default.LOG_MINOR,"CometTransport.dispose()","aborting recv request"),this.recvRequest.abort(),this.recvRequest=null),/* In almost all cases the transport will be finished before it's
             * disposed. Finish here just to make sure. */this.finish("disconnected",u.default.disconnected()),p.default.Config.nextTick(function(){e.emit("disposed")}))},t.prototype.onConnect=function(e){/* if this transport has been disposed whilst awaiting connection, do nothing */if(!this.isDisposed){/* the connectionKey in a comet connected response is really
         * <instId>-<connectionKey> */var t,n=null===(t=e.connectionDetails)||void 0===t?void 0:t.connectionKey;a.default.prototype.onConnect.call(this,e);var r=this.baseUri+n;s.default.logAction(s.default.LOG_MICRO,"CometTransport.onConnect()","baseUri = "+r),this.sendUri=r+"/send",this.recvUri=r+"/recv",this.closeUri=r+"/close",this.disconnectUri=r+"/disconnect"}},t.prototype.send=function(e){if(this.sendRequest){/* there is a pending send, so queue this message */this.pendingItems=this.pendingItems||[],this.pendingItems.push(e);return}/* send this, plus any pending, now */var t=this.pendingItems||[];t.push(e),this.pendingItems=null,this.sendItems(t)},t.prototype.sendAnyPending=function(){var e=this.pendingItems;e&&(this.pendingItems=null,this.sendItems(e))},t.prototype.sendItems=function(e){var t=this,n=this.sendRequest=this.createRequest(this.sendUri,null,this.authParams,this.encodeRequest(e),d.default.REQ_SEND);n.on("complete",function(e,n){/* the result of the request, even if a nack, is usually a protocol response
             * contained in the data. An err is anomolous, and indicates some issue with the
             * network,transport, or connection */if(e&&s.default.logAction(s.default.LOG_ERROR,"CometTransport.sendItems()","on complete: err = "+o.inspectError(e)),t.sendRequest=null,e){e.code?/* A protocol error received from realtime. TODO: once realtime
                     * consistendly sends errors wrapped in protocol messages, should be
                     * able to remove this */t.onData(h(e)):/* A network/xhr error. Don't bother wrapping in a protocol message,
                     * just disconnect the transport */t.disconnect(e);return}n&&t.onData(n),t.pendingItems&&p.default.Config.nextTick(function(){t.sendRequest||t.sendAnyPending()})}),n.exec()},t.prototype.recv=function(){var e=this;/* do nothing if there is an active request, which might be streaming */if(!this.recvRequest&&this.isConnected){var t=this.recvRequest=this.createRequest(this.recvUri,null,this.authParams,null,this.stream?d.default.REQ_RECV_STREAM:d.default.REQ_RECV_POLL);t.on("data",function(t){e.onData(t)}),t.on("complete",function(t){if(e.recvRequest=null,/* A request completing must be considered activity, as realtime sends
             * heartbeats every 15s since a request began, not every 15s absolutely */e.onActivity(),t){t.code?/* A protocol error received from realtime. TODO: once realtime
                     * consistently sends errors wrapped in protocol messages, should be
                     * able to remove this */e.onData(h(t)):/* A network/xhr error. Don't bother wrapping in a protocol message,
                     * just disconnect the transport */e.disconnect(t);return}p.default.Config.nextTick(function(){e.recv()})}),t.exec()}},t.prototype.onData=function(e){try{var t=this.decodeResponse(e);if(t&&t.length)for(var n=0;n<t.length;n++)this.onProtocolMessage(i.default.fromDeserialized(t[n]))}catch(e){s.default.logAction(s.default.LOG_ERROR,"CometTransport.onData()","Unexpected exception handing channel event: "+e.stack)}},t.prototype.encodeRequest=function(e){return JSON.stringify(e)},t.prototype.decodeResponse=function(e){return"string"==typeof e?JSON.parse(e):e},t}(a.default);t.default=g;/***/},/* 13 *//***/function(e,t){var n;// This works in non-strict mode
n=function(){return this}();try{// This works if eval is allowed (see CSP)
n=n||Function("return this")()}catch(e){"object"==typeof window&&(n=window)}// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}
e.exports=n;/***/},/* 14 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=r.__importStar(n(1)),a=r.__importDefault(n(2)),s=r.__importDefault(n(17)),l=r.__importDefault(n(18)),u=n(4);function c(e,t,n,r,o){e.http.supportsAuthHeaders?e.auth.getAuthHeaders(function(e,a){e?r(e):o(i.mixin(a,t),n)}):e.auth.getAuthParams(function(e,a){e?r(e):o(t,i.mixin(a,n))})}function f(e){var t=[];if(e)for(var n in e)t.push(n+"="+e[n]);return t.join("&")}function d(e,t){return e+(t?"?":"")+f(t)}var p=/** @class */function(){function e(){}return e.get=function(t,n,r,o,i,a){e.do(l.default.Get,t,n,null,r,o,i,a)},e.delete=function(t,n,r,o,i,a){e.do(l.default.Delete,t,n,null,r,o,i,a)},e.post=function(t,n,r,o,i,a,s){e.do(l.default.Post,t,n,r,o,i,a,s)},e.patch=function(t,n,r,o,i,a,s){e.do(l.default.Patch,t,n,r,o,i,a,s)},e.put=function(t,n,r,o,i,a,s){e.do(l.default.Put,t,n,r,o,i,a,s)},e.do=function(e,t,n,r,l,p,h,g){var m,y,v;a.default.shouldLog(a.default.LOG_MICRO)&&(m=g,y=p,g=function(t,r,s,l,u){t?a.default.logAction(a.default.LOG_MICRO,"Resource."+e+"()","Received Error; "+d(n,y)+"; Error: "+i.inspectError(t)):a.default.logAction(a.default.LOG_MICRO,"Resource."+e+"()","Received; "+d(n,y)+"; Headers: "+f(s)+"; StatusCode: "+u+"; Body: "+(o.default.BufferUtils.isBuffer(r)?r.toString():r)),m&&m(t,r,s,l,u)}),h&&(g=g&&(v=g,function(e,t,n,r,o){if(e&&!t){v(e);return}if(!r)try{t=i.decodeBody(t,h)}catch(e){i.isErrorInfoOrPartialErrorInfo(e)?v(e):v(new u.PartialErrorInfo(i.inspectError(e),null));return}if(!t){v(new u.PartialErrorInfo("unenvelope(): Response body is missing",null));return}var a=t,s=a.statusCode,l=a.response,c=a.headers;if(void 0===s){/* Envelope already unwrapped by the transport */v(e,t,n,!0,o);return}if(s<200||s>=300){/* handle wrapped errors */var f=l&&l.error||e;f||((f=Error("Error in unenveloping "+t)).statusCode=s),v(f,l,c,!0,s);return}v(e,l,c,!0,s)}),(p=p||{}).envelope=h),c(t,l,p,g,function l(u,f){var p;if(a.default.shouldLog(a.default.LOG_MICRO)&&a.default.logAction(a.default.LOG_MICRO,"Resource."+e+"()","Sending; "+d(n,f)),a.default.shouldLog(a.default.LOG_MICRO)){var h=r;if((null===(p=u["content-type"])||void 0===p?void 0:p.indexOf("msgpack"))>0)try{h=o.default.Config.msgpack.decode(r)}catch(t){a.default.logAction(a.default.LOG_MICRO,"Resource."+e+"()","Sending MsgPack Decoding Error: "+i.inspectError(t))}a.default.logAction(a.default.LOG_MICRO,"Resource."+e+"()","Sending; "+d(n,f)+"; Body: "+h)}t.http.do(e,t,n,u,r,f,function(e,n,r,o,i){if(e&&s.default.isTokenErr(e)){/* token has expired, so get a new one */t.auth.authorize(null,null,function(e){if(e){g(e);return}/* retry ... */c(t,r,f,g,l)});return}g(e,n,r,o,i)})})},e}();t.default=p;/***/},/* 15 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(2)),i=r.__importDefault(n(3)),a=r.__importDefault(n(9)),s=r.__importStar(n(1)),l=/** @class */function(){function e(){}return(/* Returns whether this presenceMessage is synthesized, i.e. was not actually
     * sent by the connection (usually means a leave event sent 15s after a
     * disconnection). This is useful because synthesized messages cannot be
     * compared for newness by id lexicographically - RTP2b1
     */e.prototype.isSynthesized=function(){return!this.id||!this.connectionId||this.id.substring(this.connectionId.length,0)!==this.connectionId},/* RTP2b2 */e.prototype.parseId=function(){if(!this.id)throw Error("parseId(): Presence message does not contain an id");var e=this.id.split(":");return{connectionId:e[0],msgSerial:parseInt(e[1],10),index:parseInt(e[2],10)}},/**
     * Overload toJSON() to intercept JSON.stringify()
     * @return {*}
     */e.prototype.toJSON=function(){/* encode data to base64 if present and we're returning real JSON;
         * although msgpack calls toJSON(), we know it is a stringify()
         * call if it has a non-empty arguments list */var e,t=this.data,n=this.encoding;return t&&i.default.BufferUtils.isBuffer(t)&&(arguments.length>0?(/* stringify call */n=n?n+"/base64":"base64",t=i.default.BufferUtils.base64Encode(t)):/* Called by msgpack. toBuffer returns a datatype understandable by
                 * that platform's msgpack implementation (Buffer in node, Uint8Array
                 * in browsers) */t=i.default.BufferUtils.toBuffer(t)),{id:this.id,clientId:this.clientId,/* Convert presence action back to an int for sending to Ably */action:(e=this.action,l.Actions.indexOf(e)),data:t,encoding:n,extras:this.extras}},e.prototype.toString=function(){var e="[PresenceMessage";return e+="; action="+this.action,this.id&&(e+="; id="+this.id),this.timestamp&&(e+="; timestamp="+this.timestamp),this.clientId&&(e+="; clientId="+this.clientId),this.connectionId&&(e+="; connectionId="+this.connectionId),this.encoding&&(e+="; encoding="+this.encoding),this.data&&("string"==typeof this.data?e+="; data="+this.data:i.default.BufferUtils.isBuffer(this.data)?e+="; data (buffer)="+i.default.BufferUtils.base64Encode(this.data):e+="; data (json)="+JSON.stringify(this.data)),this.extras&&(e+="; extras="+JSON.stringify(this.extras)),e+="]"},e.fromResponseBody=function(t,n,r){var i=[];r&&(t=s.decodeBody(t,r));for(var a=0;a<t.length;a++){var l=i[a]=e.fromValues(t[a],!0);try{e.decode(l,n)}catch(e){o.default.logAction(o.default.LOG_ERROR,"PresenceMessage.fromResponseBody()",e.toString())}}return i},e.fromValues=function(t,n){return n&&(t.action=e.Actions[t.action]),Object.assign(new e,t)},e.fromValuesArray=function(t){for(var n=t.length,r=Array(n),o=0;o<n;o++)r[o]=e.fromValues(t[o]);return r},e.fromEncoded=function(t,n){var r=e.fromValues(t,!0);/* if decoding fails at any point, catch and return the message decoded to
         * the fullest extent possible */try{e.decode(r,null!=n?n:{})}catch(e){o.default.logAction(o.default.LOG_ERROR,"PresenceMessage.fromEncoded()",e.toString())}return r},e.fromEncodedArray=function(t,n){return t.map(function(t){return e.fromEncoded(t,n)})},e.fromData=function(t){return t instanceof e?t:e.fromValues({data:t})},e.Actions=["absent","present","enter","leave","update"],e.encode=a.default.encode,e.decode=a.default.decode,e.getMessagesSize=a.default.getMessagesSize,e)}();t.default=l;/***/},/* 16 *//***/function(e,t,n){/* WEBPACK VAR INJECTION */(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(7)),a=r.__importStar(n(4)),s=r.__importDefault(n(2)),l=r.__importDefault(n(8)),u=r.__importDefault(n(21)),c=r.__importDefault(n(3)),f=function(){},d=0,p={},h=void 0!==e&&e.XDomainRequest,g=/** @class */function(e){function t(t,n,r,i,a,s,l){var u,c,f=e.call(this)||this;return(r=r||{}).rnd=o.cheapRandStr(),h&&(u=(c=navigator.userAgent.toString().match(/MSIE\s([\d.]+)/))&&Number(c[1]))&&10===u&&!r.envelope&&(r.envelope="json"),f.uri=t+o.toQueryString(r),f.headers=n||{},f.body=i,f.method=l?l.toUpperCase():o.isEmptyArg(i)?"GET":"POST",f.requestMode=a,f.timeouts=s,f.timedOut=!1,f.requestComplete=!1,f.id=String(++d),p[f.id]=f,f}return r.__extends(t,e),t.createRequest=function(e,n,r,i,a,s,u){/* XHR requests are used either with the context being a realtime
         * transport, or with timeouts passed in (for when used by a rest client),
         * or completely standalone.  Use the appropriate timeouts in each case */var c=s||l.default.TIMEOUTS;return new t(e,n,o.copy(r),i,a,c,u)},t.prototype.complete=function(e,t,n,r,o){this.requestComplete||(this.requestComplete=!0,!e&&t&&this.emit("data",t),this.emit("complete",e,t,n,r,o),this.dispose())},t.prototype.abort=function(){this.dispose()},t.prototype.exec=function(){var e,t,n,r=this,i=this.headers,l=this.requestMode==u.default.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout,f=this.timer=setTimeout(function(){r.timedOut=!0,p.abort()},l),d=this.method,p=this.xhr=new XMLHttpRequest,h=i.accept,g=this.body,m="text";for(var y in h?0===h.indexOf("application/x-msgpack")&&(m="arraybuffer"):i.accept="application/json",g&&(i["content-type"]||(i["content-type"]="application/json")).indexOf("application/json")>-1&&"string"!=typeof g&&(g=JSON.stringify(g)),// Can probably remove this directive if https://github.com/nodesecurity/eslint-plugin-security/issues/26 is resolved
// eslint-disable-next-line security/detect-non-literal-fs-filename
p.open(d,this.uri,!0),p.responseType=m,"authorization"in i&&(p.withCredentials=!0),i)p.setRequestHeader(y,i[y]);var v=function(e,t,n,o){var i,l=t+" (event type: "+e.type+")";(null===(i=null==r?void 0:r.xhr)||void 0===i?void 0:i.statusText)&&(l+=", current statusText is "+r.xhr.statusText),s.default.logAction(s.default.LOG_ERROR,"Request.on"+e.type+"()",l),r.complete(new a.PartialErrorInfo(l,n,o))};p.onerror=function(e){v(e,"XHR error occurred",null,400)},p.onabort=function(e){r.timedOut?v(e,"Request aborted due to request timeout expiring",null,408):v(e,"Request cancelled",null,400)},p.ontimeout=function(e){v(e,"Request timed out",null,408)};var b=0,_=!1,w=function(){var o;if(clearTimeout(f),n=t<400,204==t){r.complete(null,null,null,null,t);return}e=r.requestMode==u.default.REQ_RECV_STREAM&&n&&(o=p).getResponseHeader&&(o.getResponseHeader("transfer-encoding")||!o.getResponseHeader("content-length"))},S=function(){try{var e,s=p.getResponseHeader&&p.getResponseHeader("content-type");if(s?s.indexOf("application/json")>=0:"text"==p.responseType){/* If we requested msgpack but server responded with json, then since
                     * we set the responseType expecting msgpack, the response will be
                     * an ArrayBuffer containing json */var l="arraybuffer"===p.responseType?c.default.BufferUtils.utf8Decode(p.response):String(p.responseText);e=l.length?JSON.parse(l):l,_=!0}else e=p.response;void 0!==e.response?(n=/* unwrap JSON envelope */(t=e.statusCode)<400,i=e.headers,e=e.response):i=function(e){for(var t=o.trim(e.getAllResponseHeaders()).split("\r\n"),n={},r=0;r<t.length;r++){var i=t[r].split(":").map(o.trim);n[i[0].toLowerCase()]=i[1]}return n}(p)}catch(e){r.complete(new a.PartialErrorInfo("Malformed response body from server: "+e.message,null,400));return}/* If response is an array, it's an array of protocol messages -- even if
             * is contains an error action (hence the nonsuccess statuscode), we can
             * consider the request to have succeeded, just pass it on to
             * onProtocolMessage to decide what to do */if(n||o.isArray(e)){r.complete(null,e,i,_,t);return}var u=function(e,t){if(o.arrIn(o.allToLowerCase(o.keysArray(t)),"x-ably-errorcode"))return e.error&&a.default.fromValues(e.error)}(e,i);u||(u=new a.PartialErrorInfo("Error response received from server: "+t+" body was: "+c.default.Config.inspect(e),null,t)),r.complete(u,e,i,_,t)};function k(){for(var e,t,n=p.responseText,r=n.length-1;b<r&&(e=n.indexOf("\n",b))>-1;)t=n.slice(b,e),b=e+1,C(t)}var C=function(e){try{e=JSON.parse(e)}catch(e){r.complete(new a.PartialErrorInfo("Malformed response body from server: "+e.message,null,400));return}r.emit("data",e)},O=function(){k(),r.streamComplete=!0,c.default.Config.nextTick(function(){r.complete()})};p.onreadystatechange=function(){var n=p.readyState;n<3||0===p.status||(void 0===t&&(1223===(t=p.status)&&(t=204),w()),3==n&&e?k():4==n&&(e?O():S()))},p.send(g)},t.prototype.dispose=function(){var e=this.xhr;if(e){e.onreadystatechange=e.onerror=e.onabort=e.ontimeout=f,this.xhr=null;var t=this.timer;t&&(clearTimeout(t),this.timer=null),this.requestComplete||e.abort()}delete p[this.id]},t}(i.default);t.default=g;/* WEBPACK VAR INJECTION */}).call(this,n(13));/***/},/* 17 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(2)),i=r.__importStar(n(1)),a=r.__importDefault(n(23)),s=r.__importDefault(n(4)),l=r.__importDefault(n(45)),u=n(11),c=r.__importDefault(n(18)),f=r.__importDefault(n(25)),d=r.__importDefault(n(3)),p=r.__importDefault(n(14));function h(){}/* A client auth callback may give errors in any number of formats; normalise to an ErrorInfo or PartialErrorInfo */function g(e){return i.isErrorInfoOrPartialErrorInfo(e)?(e.code||(403===e.statusCode?e.code=40300:(e.code=40170,/* normalise statusCode to 401 per RSA4e */e.statusCode=401)),e):new s.default(i.inspectError(e),e.code||40170,e.statusCode||401)}var m=function(e,t){if(d.default.Config.createHmac){var n=d.default.Config.createHmac("SHA256",t);return n.update(e),n.digest("base64")}return(0,u.stringify)((0,l.default)(e,t))};function y(e){if(!e)return"";"string"==typeof e&&(e=JSON.parse(e));var t=Object.create(null),n=i.keysArray(e,!0);if(!n)return"";n.sort();for(var r=0;r<n.length;r++)t[n[r]]=e[n[r]].sort();return JSON.stringify(t)}function v(e){if(e.authCallback)o.default.logAction(o.default.LOG_MINOR,"Auth()","using token auth with authCallback");else if(e.authUrl)o.default.logAction(o.default.LOG_MINOR,"Auth()","using token auth with authUrl");else if(e.key)o.default.logAction(o.default.LOG_MINOR,"Auth()","using token auth with client-side signing");else if(e.tokenDetails)o.default.logAction(o.default.LOG_MINOR,"Auth()","using token auth with supplied token only");else{var t="authOptions must include valid authentication parameters";throw o.default.logAction(o.default.LOG_ERROR,"Auth()",t),Error(t)}}/* RSA4 */function b(e){return e.useTokenAuth||!("useTokenAuth"in e&&!e.useTokenAuth)&&(e.authCallback||e.authUrl||e.token||e.tokenDetails)}var _=0,w=/** @class */function(){function e(e,t){if(// This initialization is always overwritten and only used to prevent a TypeScript compiler error
this.authOptions={},this.client=e,this.tokenParams=t.defaultTokenParams||{},/* The id of the current token request if one is in progress, else null */this.currentTokenRequestId=null,this.waitingForTokenRequest=null,b(t)){/* Token auth */if(t.key&&!m){var n="client-side token request signing not supported";throw o.default.logAction(o.default.LOG_ERROR,"Auth()",n),Error(n)}t.key||t.authCallback||t.authUrl||o.default.logAction(o.default.LOG_ERROR,"Auth()","Warning: library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),this._saveTokenOptions(t.defaultTokenParams,t),v(this.authOptions)}else{/* Basic auth */if(!t.key){var n="No authentication options provided; need one of: key, authUrl, or authCallback (or for testing only, token or tokenDetails)";throw o.default.logAction(o.default.LOG_ERROR,"Auth()",n),new s.default(n,40160,401)}o.default.logAction(o.default.LOG_MINOR,"Auth()","anonymous, using basic auth"),this._saveBasicOptions(t)}}return e.prototype.authorize=function(e,t,n){var r,a=this;if("function"!=typeof e||n?"function"!=typeof t||n?r=t:(n=t,r=null):(n=e,r=e=null),!n&&this.client.options.promises)return i.promisify(this,"authorize",arguments);/* RSA10a: authorize() call implies token auth. If a key is passed it, we
         * just check if it doesn't clash and assume we're generating a token from it */if(r&&r.key&&this.authOptions.key!==r.key)throw new s.default("Unable to update auth options with incompatible key",40102,401);r&&"force"in r&&(o.default.logAction(o.default.LOG_ERROR,"Auth.authorize","Deprecation warning: specifying {force: true} in authOptions is no longer necessary, authorize() now always gets a new token. Please remove this, as in version 1.0 and later, having a non-null authOptions will overwrite stored library authOptions, which may not be what you want"),i.isOnlyPropIn(r,"force")&&(r=null)),this._forceNewToken(e,r,function(e,t){if(e){a.client.connection&&e.statusCode===f.default.Forbidden&&/* Per RSA4d & RSA4d1, if the auth server explicitly repudiates our right to
                     * stay connecticed by returning a 403, we actively disconnect the connection
                     * even though we may well still have time left in the old token. */a.client.connection.connectionManager.actOnErrorFromAuthorize(e),null==n||n(e);return}a.client.connection?a.client.connection.connectionManager.onAuthUpdated(t,n||h):null==n||n(null,t)})},e.prototype.authorise=function(e,t,n){o.default.deprecated("Auth.authorise","Auth.authorize"),this.authorize(e,t,n)},/* For internal use, eg by connectionManager - useful when want to call back
     * as soon as we have the new token, rather than waiting for it to take
     * effect on the connection as #authorize does */e.prototype._forceNewToken=function(e,t,n){var r=this;/* get rid of current token even if still valid */this.tokenDetails=null,/* _save normalises the tokenParams and authOptions and updates the auth
         * object. All subsequent operations should use the values on `this`,
         * not the passed in ones. */this._saveTokenOptions(e,t),v(this.authOptions),this._ensureValidAuthCredentials(!0,function(e,t){/* RSA10g */delete r.tokenParams.timestamp,delete r.authOptions.queryTime,n(e,t)})},e.prototype.requestToken=function(e,t,n){var r=this;if("function"!=typeof e||n?"function"!=typeof t||n||(n=t,t=null):(n=e,t=e=null),!n&&this.client.options.promises)return i.promisify(this,"requestToken",arguments);/* RSA8e: if authOptions passed in, they're used instead of stored, don't merge them */t=t||this.authOptions,e=e||i.copy(this.tokenParams);var a,l=n||h,u=this.client;if(t.authCallback)o.default.logAction(o.default.LOG_MINOR,"Auth.requestToken()","using token auth with authCallback"),a=t.authCallback;else if(t.authUrl)o.default.logAction(o.default.LOG_MINOR,"Auth.requestToken()","using token auth with authUrl"),a=function(e,n){var a,l=i.mixin({accept:"application/json, text/plain"},t.authHeaders),f=t.authMethod&&"post"===t.authMethod.toLowerCase(),p=t.authUrl.indexOf("?");p>-1&&(a=i.parseQueryString(t.authUrl.slice(p)),t.authUrl=t.authUrl.slice(0,p),f||/* In case of conflict, authParams take precedence over qs params in the authUrl */(t.authParams=i.mixin(a,t.authParams)));/* RSA8c2 */var h=i.mixin({},t.authParams||{},e),g=function(e,t,r,a){if(e?o.default.logAction(o.default.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received Error: "+i.inspectError(e)):(l=r["content-type"],o.default.logAction(o.default.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Received; content-type: "+l+"; body: "+i.inspectBody(t))),e||a)return n(e,t);if(d.default.BufferUtils.isBuffer(t)&&(t=t.toString()),!l){n(new s.default("authUrl response is missing a content-type header",40170,401));return}var l,u=l.indexOf("application/json")>-1,c=l.indexOf("text/plain")>-1||l.indexOf("application/jwt")>-1;if(!u&&!c){n(new s.default("authUrl responded with unacceptable content-type "+l+", should be either text/plain, application/jwt or application/json",40170,401));return}if(u){if(t.length>131072){n(new s.default("authUrl response exceeded max permitted length",40170,401));return}try{t=JSON.parse(t)}catch(e){n(new s.default("Unexpected error processing authURL response; err = "+e.message,40170,401));return}}n(null,t,l)};if(o.default.logAction(o.default.LOG_MICRO,"Auth.requestToken().tokenRequestCallback","Requesting token from "+t.authUrl+"; Params: "+JSON.stringify(h)+"; method: "+(f?"POST":"GET")),f){/* send body form-encoded */var m=l||{};m["content-type"]="application/x-www-form-urlencoded";var y=i.toQueryString(h).slice(1);/* slice is to remove the initial '?' */r.client.http.doUri(c.default.Post,u,t.authUrl,m,y,a,g)}else r.client.http.doUri(c.default.Get,u,t.authUrl,l||{},null,h,g)};else if(t.key)o.default.logAction(o.default.LOG_MINOR,"Auth.requestToken()","using token auth with client-side signing"),a=function(e,n){r.createTokenRequest(e,t,n)};else{o.default.logAction(o.default.LOG_ERROR,"Auth()","library initialized with a token literal without any way to renew the token when it expires (no authUrl, authCallback, or key). See https://help.ably.io/error/40171 for help"),l(new s.default("Need a new token, but authOptions does not include any way to request one (no authUrl, authCallback, or key)",40171,403));return}"capability"in e&&(e.capability=y(e.capability));var f=function(e,n){var a="/keys/"+e.keyName+"/requestToken",s=i.defaultPostHeaders(r.client.options);t.requestHeaders&&i.mixin(s,t.requestHeaders),o.default.logAction(o.default.LOG_MICRO,"Auth.requestToken().requestToken","Sending POST to "+a+"; Token params: "+JSON.stringify(e)),r.client.http.do(c.default.Post,u,function(e){return u.baseUri(e)+a},s,JSON.stringify(e),null,n)},p=!1,m=this.client.options.timeouts.realtimeRequestTimeout,v=setTimeout(function(){p=!0;var e="Token request callback timed out after "+m/1e3+" seconds";o.default.logAction(o.default.LOG_ERROR,"Auth.requestToken()",e),l(new s.default(e,40170,401))},m);a(e,function(e,n,r){if(!p){if(clearTimeout(v),e){o.default.logAction(o.default.LOG_ERROR,"Auth.requestToken()","token request signing call returned error; err = "+i.inspectError(e)),l(g(e));return}/* the response from the callback might be a token string, a signed request or a token details */if("string"==typeof n){0===n.length?l(new s.default("Token string is empty",40170,401)):n.length>131072?l(new s.default("Token string exceeded max permitted length (was "+n.length+" bytes)",40170,401)):"undefined"===n||"null"===n?/* common failure mode with poorly-implemented authCallbacks */l(new s.default("Token string was literal null/undefined",40170,401)):"{"!==n[0]||r&&r.indexOf("application/jwt")>-1?l(null,{token:n}):l(new s.default("Token was double-encoded; make sure you're not JSON-encoding an already encoded token request or details",40170,401));return}if("object"!=typeof n){var a="Expected token request callback to call back with a token string or token request/details object, but got a "+typeof n;o.default.logAction(o.default.LOG_ERROR,"Auth.requestToken()",a),l(new s.default(a,40170,401));return}var u=JSON.stringify(n).length;if(u>131072&&!t.suppressMaxLengthCheck){l(new s.default("Token request/details object exceeded max permitted stringified size (was "+u+" bytes)",40170,401));return}if("issued"in n){/* a tokenDetails object */l(null,n);return}if(!("keyName"in n)){var a="Expected token request callback to call back with a token string, token request object, or token details object";o.default.logAction(o.default.LOG_ERROR,"Auth.requestToken()",a),l(new s.default(a,40170,401));return}/* it's a token request, so make the request */f(n,function(e,t,n,r){if(e){o.default.logAction(o.default.LOG_ERROR,"Auth.requestToken()","token request API call returned error; err = "+i.inspectError(e)),l(g(e));return}r||(t=JSON.parse(t)),o.default.logAction(o.default.LOG_MINOR,"Auth.getToken()","token received"),l(null,t)})}})},/**
     * Create and sign a token request based on the given options.
     * NOTE this can only be used when the key value is available locally.
     * Otherwise, signed token requests must be obtained from the key
     * owner (either using the token request callback or url).
     *
     * @param authOptions
     * an object containing the request options:
     * - key:           the key to use. If not specified, a key passed in constructing
     *                  the Rest interface will be used
     *
     * - queryTime      (optional) boolean indicating that the ably system should be
     *                  queried for the current time when none is specified explicitly
     *
     * - requestHeaders (optional, unsupported, for testing only) extra headers to add to the
     *                  requestToken request
     *
     * @param tokenParams
     * an object containing the parameters for the requested token:
     * - ttl:       (optional) the requested life of the token in ms. If none is specified
     *                  a default of 1 hour is provided. The maximum lifetime is 24hours; any request
     *                  exceeding that lifetime will be rejected with an error.
     *
     * - capability:    (optional) the capability to associate with the access token.
     *                  If none is specified, a token will be requested with all of the
     *                  capabilities of the specified key.
     *
     * - clientId:      (optional) a client ID to associate with the token; if not
     *                  specified, a clientId passed in constructing the Rest interface will be used
     *
     * - timestamp:     (optional) the time in ms since the epoch. If none is specified,
     *                  the system will be queried for a time value to use.
     *
     * @param callback
     */e.prototype.createTokenRequest=function(e,t,n){var r=this;if("function"!=typeof e||n?"function"!=typeof t||n||(n=t,t=null):(n=e,t=e=null),!n&&this.client.options.promises)return i.promisify(this,"createTokenRequest",arguments);/* RSA9h: if authOptions passed in, they're used instead of stored, don't merge them */t=t||this.authOptions,e=e||i.copy(this.tokenParams);var a=t.key;if(!a){n(new s.default("No key specified",40101,403));return}var l=a.split(":"),u=l[0],c=l[1];if(!c){n(new s.default("Invalid key specified",40101,403));return}if(""===e.clientId){n(new s.default("clientId cant be an empty string",40012,400));return}"capability"in e&&(e.capability=y(e.capability));var f=i.mixin({keyName:u},e),d=e.clientId||"",p=e.ttl||"",h=e.capability||"";!function(e){if(f.timestamp){e();return}r.getTimestamp(t&&t.queryTime,function(t,r){if(t){n(t);return}f.timestamp=r,e()})}(function(){/* nonce *//* NOTE: there is no expectation that the client
             * specifies the nonce; this is done by the library
             * However, this can be overridden by the client
             * simply for testing purposes. */var e=f.nonce||(f.nonce=("000000"+Math.floor(1e16*Math.random())).slice(-16)),t=f.timestamp,r=f.keyName+"\n"+p+"\n"+h+"\n"+d+"\n"+t+"\n"+e+"\n";/* mac *//* NOTE: there is no expectation that the client
             * specifies the mac; this is done by the library
             * However, this can be overridden by the client
             * simply for testing purposes. */f.mac=f.mac||m(r,c),o.default.logAction(o.default.LOG_MINOR,"Auth.getTokenRequest()","generated signed request"),n(null,f)})},/**
     * Get the auth query params to use for a websocket connection,
     * based on the current auth parameters
     */e.prototype.getAuthParams=function(e){"basic"==this.method?e(null,{key:this.key}):this._ensureValidAuthCredentials(!1,function(t,n){if(t){e(t);return}if(!n)throw Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");e(null,{access_token:n.token})})},/**
     * Get the authorization header to use for a REST or comet request,
     * based on the current auth parameters
     */e.prototype.getAuthHeaders=function(e){"basic"==this.method?e(null,{authorization:"Basic "+this.basicKey}):this._ensureValidAuthCredentials(!1,function(t,n){if(t){e(t);return}if(!n)throw Error("Auth.getAuthParams(): _ensureValidAuthCredentials returned no error or tokenDetails");e(null,{authorization:"Bearer "+i.toBase64(n.token)})})},/**
     * Get the current time based on the local clock,
     * or if the option queryTime is true, return the server time.
     * The server time offset from the local time is stored so that
     * only one request to the server to get the time is ever needed
     */e.prototype.getTimestamp=function(e,t){!this.isTimeOffsetSet()&&(e||this.authOptions.queryTime)?this.client.time(t):t(null,this.getTimestampUsingOffset())},e.prototype.getTimestampUsingOffset=function(){return i.now()+(this.client.serverTimeOffset||0)},e.prototype.isTimeOffsetSet=function(){return null!==this.client.serverTimeOffset},e.prototype._saveBasicOptions=function(e){this.method="basic",this.key=e.key,this.basicKey=i.toBase64(e.key),this.authOptions=e||{},"clientId"in e&&this._userSetClientId(e.clientId)},e.prototype._saveTokenOptions=function(e,t){this.method="token",e&&/* We temporarily persist tokenParams.timestamp in case a new token needs
             * to be requested, then null it out in the callback of
             * _ensureValidAuthCredentials for RSA10g compliance */(this.tokenParams=e),t&&(t.token&&/* options.token may contain a token string or, for convenience, a TokenDetails */(t.tokenDetails="string"==typeof t.token?{token:t.token}:t.token),t.tokenDetails&&(this.tokenDetails=t.tokenDetails),"clientId"in t&&this._userSetClientId(t.clientId),this.authOptions=t)},/* @param forceSupersede: force a new token request even if there's one in
     * progress, making all pending callbacks wait for the new one */e.prototype._ensureValidAuthCredentials=function(e,t){var n=this,r=this.tokenDetails;if(r){if(this._tokenClientIdMismatch(r.clientId)){/* 403 to trigger a permanently failed client - RSA15c */t(new s.default("Mismatch between clientId in token ("+r.clientId+") and current clientId ("+this.clientId+")",40102,403));return}/* RSA4b1 -- if we have a server time offset set already, we can
             * automatically remove expired tokens. Else just use the cached token. If it is
             * expired Ably will tell us and we'll discard it then. */if(!this.isTimeOffsetSet()||!r.expires||r.expires>=this.getTimestampUsingOffset()){o.default.logAction(o.default.LOG_MINOR,"Auth.getToken()","using cached token; expires = "+r.expires),t(null,r);return}/* expired, so remove and fallthrough to getting a new one */o.default.logAction(o.default.LOG_MINOR,"Auth.getToken()","deleting expired token"),this.tokenDetails=null}if((this.waitingForTokenRequest||(this.waitingForTokenRequest=a.default.create())).push(t),null===this.currentTokenRequestId||e){/* Request a new token */var i=this.currentTokenRequestId=_++;this.requestToken(this.tokenParams,this.authOptions,function(e,t){if(n.currentTokenRequestId>i){o.default.logAction(o.default.LOG_MINOR,"Auth._ensureValidAuthCredentials()","Discarding token request response; overtaken by newer one");return}n.currentTokenRequestId=null;var r=n.waitingForTokenRequest||h;if(n.waitingForTokenRequest=null,e){r(e);return}r(null,n.tokenDetails=t)})}},/* User-set: check types, '*' is disallowed, throw any errors */e.prototype._userSetClientId=function(e){if("string"==typeof e||null===e){if("*"===e)throw new s.default('Cant use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, instantiate the library with {defaultTokenParams: {clientId: "*"}}), or if calling authorize(), pass it in as a tokenParam: authorize({clientId: "*"}, authOptions)',40012,400);var t=this._uncheckedSetClientId(e);if(t)throw t}else throw new s.default("clientId must be either a string or null",40012,400)},/* Ably-set: no typechecking, '*' is allowed but not set on this.clientId), return errors to the caller */e.prototype._uncheckedSetClientId=function(e){if(!this._tokenClientIdMismatch(e))return(/* RSA7a4: if options.clientId is provided and is not
             * null, it overrides defaultTokenParams.clientId */this.clientId=this.tokenParams.clientId=e,null);/* Should never happen in normal circumstances as realtime should
             * recognise mismatch and return an error */var t="Unexpected clientId mismatch: client has "+this.clientId+", requested "+e,n=new s.default(t,40102,401);return o.default.logAction(o.default.LOG_ERROR,"Auth._uncheckedSetClientId()",t),n},e.prototype._tokenClientIdMismatch=function(e){return!!(this.clientId&&"*"!==this.clientId&&e&&"*"!==e&&this.clientId!==e)},e.isTokenErr=function(e){return e.code&&e.code>=40140&&e.code<40150},e.prototype.revokeTokens=function(e,t,n){if(b(this.client.options))throw new s.default("Cannot revoke tokens when using token auth",40162,401);var o,a=this.client.options.keyName;if("function"==typeof t?(n=t,o={}):o=null!=t?t:{},void 0===n){if(this.client.options.promises)return i.promisify(this,"revokeTokens",[e,o]);n=h}var l=n,u=r.__assign({targets:e.map(function(e){return"".concat(e.type,":").concat(e.value)})},o),c=this.client.options.useBinaryProtocol?i.Format.msgpack:i.Format.json,f=i.defaultPostHeaders(this.client.options,c);this.client.options.headers&&i.mixin(f,this.client.options.headers);var d=i.encodeBody(u,c);p.default.post(this.client,"/keys/".concat(a,"/revokeTokens"),d,f,{newBatchResponse:"true"},null,function(e,t,n,r){if(e){// TODO remove this type assertion after fixing https://github.com/ably/ably-js/issues/1405
l(e);return}l(null,r?t:i.decodeBody(t,c))})},e}();t.default=w;/***/},/* 18 *//***/function(e,t,n){var r,o;Object.defineProperty(t,"__esModule",{value:!0}),(o=r||(r={})).Get="get",o.Delete="delete",o.Post="post",o.Put="put",o.Patch="patch",t.default=r;/***/},/* 19 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.HttpPaginatedResponse=t.PaginatedResult=void 0;var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(2)),a=r.__importDefault(n(14)),s=/** @class */function(){function e(e,t,n,r,o,i){this.rest=e,this.path=t,this.headers=n,this.envelope=null!=r?r:null,this.bodyHandler=o,this.useHttpPaginatedResponse=i||!1}return e.prototype.get=function(e,t){var n=this;a.default.get(this.rest,this.path,this.headers,e,this.envelope,function(e,r,o,i,a){n.handlePage(e,r,o,i,a,t)})},e.prototype.delete=function(e,t){var n=this;a.default.delete(this.rest,this.path,this.headers,e,this.envelope,function(e,r,o,i,a){n.handlePage(e,r,o,i,a,t)})},e.prototype.post=function(e,t,n){var r=this;a.default.post(this.rest,this.path,t,this.headers,e,this.envelope,function(e,t,o,i,a){n&&r.handlePage(e,t,o,i,a,n)})},e.prototype.put=function(e,t,n){var r=this;a.default.put(this.rest,this.path,t,this.headers,e,this.envelope,function(e,t,o,i,a){n&&r.handlePage(e,t,o,i,a,n)})},e.prototype.patch=function(e,t,n){var r=this;a.default.patch(this.rest,this.path,t,this.headers,e,this.envelope,function(e,t,o,i,a){n&&r.handlePage(e,t,o,i,a,n)})},e.prototype.handlePage=function(e,t,n,r,a,s){var c,f,d;if(e&&!(this.useHttpPaginatedResponse&&(t||"number"==typeof e.code))){i.default.logAction(i.default.LOG_ERROR,"PaginatedResource.handlePage()","Unexpected error getting resource: err = "+o.inspectError(e)),null==s||s(e);return}try{c=this.bodyHandler(t,n||{},r)}catch(t){/* If we got an error, the failure to parse the body is almost certainly
             * due to that, so callback with that in preference over the parse error */null==s||s(e||t);return}n&&(f=n.Link||n.link)&&(d=function(e){"string"==typeof e&&(e=e.split(","));for(var t={},n=0;n<e.length;n++){var r=e[n].match(/^\s*<(.+)>;\s*rel="(\w+)"$/);if(r){var i=function(e){var t=e.match(/^\.\/(\w+)\?(.*)$/);return t&&t[2]&&o.parseQueryString(t[2])}(r[1]);i&&(t[r[2]]=i)}}return t}(f)),s(null,this.useHttpPaginatedResponse?new u(this,c,n||{},a,d,e):new l(this,c,d))},e}(),l=/** @class */function(){function e(e,t,n){var r=this;this.resource=e,this.items=t;var i=this;n&&("first"in n&&(this.first=function(e){if(!e&&i.resource.rest.options.promises)return o.promisify(i,"first",[]);i.get(n.first,e)}),"current"in n&&(this.current=function(e){if(!e&&i.resource.rest.options.promises)return o.promisify(i,"current",[]);i.get(n.current,e)}),this.next=function(e){if(!e&&i.resource.rest.options.promises)return o.promisify(i,"next",[]);"next"in n?i.get(n.next,e):e(null)},this.hasNext=function(){return"next"in n},this.isLast=function(){var e;return!(null===(e=r.hasNext)||void 0===e?void 0:e.call(r))})}return(/* We assume that only the initial request can be a POST, and that accessing
     * the rest of a multipage set of results can always be done with GET */e.prototype.get=function(e,t){var n=this.resource;a.default.get(n.rest,n.path,n.headers,e,n.envelope,function(e,r,o,i,a){n.handlePage(e,r,o,i,a,t)})},e)}();t.PaginatedResult=l;var u=/** @class */function(e){function t(t,n,r,o,i,a){var s=e.call(this,t,n,i)||this;return s.statusCode=o,s.success=o<300&&o>=200,s.headers=r,s.errorCode=a&&a.code,s.errorMessage=a&&a.message,s}return r.__extends(t,e),t.prototype.toJSON=function(){return{items:this.items,statusCode:this.statusCode,success:this.success,headers:this.headers,errorCode:this.errorCode,errorMessage:this.errorMessage}},t}(l);t.HttpPaginatedResponse=u,t.default=s;/***/},/* 20 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.isRetriable=void 0;var r=n(0).__importDefault(n(4)),o={DISCONNECTED:80003,SUSPENDED:80002,FAILED:8e4,CLOSING:80017,CLOSED:80017,UNKNOWN_CONNECTION_ERR:50002,UNKNOWN_CHANNEL_ERR:50001};t.isRetriable=function(e){return!e.statusCode||!e.code||e.statusCode>=500||Object.values(o).includes(e.code)},t.default={disconnected:function(){return r.default.fromValues({statusCode:400,code:o.DISCONNECTED,message:"Connection to server temporarily unavailable"})},suspended:function(){return r.default.fromValues({statusCode:400,code:o.SUSPENDED,message:"Connection to server unavailable"})},failed:function(){return r.default.fromValues({statusCode:400,code:o.FAILED,message:"Connection failed or disconnected by server"})},closing:function(){return r.default.fromValues({statusCode:400,code:o.CLOSING,message:"Connection closing"})},closed:function(){return r.default.fromValues({statusCode:400,code:o.CLOSED,message:"Connection closed"})},unknownConnectionErr:function(){return r.default.fromValues({statusCode:500,code:o.UNKNOWN_CONNECTION_ERR,message:"Internal connection error"})},unknownChannelErr:function(){return r.default.fromValues({statusCode:500,code:o.UNKNOWN_CONNECTION_ERR,message:"Internal channel error"})}};/***/},/* 21 *//***/function(e,t,n){var r,o;Object.defineProperty(t,"__esModule",{value:!0}),(o=r||(r={}))[o.REQ_SEND=0]="REQ_SEND",o[o.REQ_RECV=1]="REQ_RECV",o[o.REQ_RECV_POLL=2]="REQ_RECV_POLL",o[o.REQ_RECV_STREAM=3]="REQ_RECV_STREAM",t.default=r;/***/},/* 22 *//***/function(e,t,n){var r;// CommonJS
e.exports=(r=n(6),n(5),n(58),n(11),n(40),n(32),n(24),n(27),n(28),n(59),n(60),r);/***/},/* 23 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__importDefault(n(2)),o=/** @class */function(){// Private constructor; use static Multicaster.create instead
function e(e){this.members=e||[]}return e.prototype.call=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,o=this.members;n<o.length;n++){var i=o[n];if(i)try{i.apply(void 0,e)}catch(e){r.default.logAction(r.default.LOG_ERROR,"Multicaster multiple callback handler","Unexpected exception: "+e+"; stack = "+e.stack)}}},e.prototype.push=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.members).push.apply(e,t)},e.create=function(t){var n=new e(t);return Object.assign(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.call.apply(n,e)},{push:function(e){return n.push(e)}})},e}();t.default=o;/***/},/* 24 *//***/function(e,t,n){var r,o,i;// CommonJS
e.exports=void(o=(r=n(6)).lib.Base,i=r.enc.Utf8,r.algo.HMAC=o.extend({/**
	         * Initializes a newly created HMAC.
	         *
	         * @param {Hasher} hasher The hash algorithm to use.
	         * @param {WordArray|string} key The secret key.
	         *
	         * @example
	         *
	         *     var hmacHasher = CryptoJS.algo.HMAC.create(CryptoJS.algo.SHA256, key);
	         */init:function(e,t){// Init hasher
e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));// Shortcuts
var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),// Clamp excess bits
t.clamp();// XOR keys with pad constants
for(var o=this._oKey=t.clone(),a=this._iKey=t.clone(),s=o.words,l=a.words,u=0;u<n;u++)s[u]^=1549556828,l[u]^=909522486;o.sigBytes=a.sigBytes=r,// Set initial values
this.reset()},/**
	         * Resets this HMAC to its initial state.
	         *
	         * @example
	         *
	         *     hmacHasher.reset();
	         */reset:function(){// Shortcut
var e=this._hasher;// Reset
e.reset(),e.update(this._iKey)},/**
	         * Updates this HMAC with a message.
	         *
	         * @param {WordArray|string} messageUpdate The message to append.
	         *
	         * @return {HMAC} This HMAC instance.
	         *
	         * @example
	         *
	         *     hmacHasher.update('message');
	         *     hmacHasher.update(wordArray);
	         */update:function(e){// Chainable
return this._hasher.update(e),this},/**
	         * Finalizes the HMAC computation.
	         * Note that the finalize operation is effectively a destructive, read-once operation.
	         *
	         * @param {WordArray|string} messageUpdate (Optional) A final message update.
	         *
	         * @return {WordArray} The HMAC.
	         *
	         * @example
	         *
	         *     var hmac = hmacHasher.finalize();
	         *     var hmac = hmacHasher.finalize('message');
	         *     var hmac = hmacHasher.finalize(wordArray);
	         */finalize:function(e){// Shortcut
var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}}));/***/},/* 25 *//***/function(e,t,n){var r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.isSuccessCode=void 0,(o=r||(r={}))[o.Success=200]="Success",o[o.NoContent=204]="NoContent",o[o.BadRequest=400]="BadRequest",o[o.Unauthorized=401]="Unauthorized",o[o.Forbidden=403]="Forbidden",o[o.RequestTimeout=408]="RequestTimeout",o[o.InternalServerError=500]="InternalServerError",t.isSuccessCode=function(e){return e>=r.Success&&e<r.BadRequest},t.default=r;/***/},/* 26 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(10)),i=r.__importStar(n(1)),a=r.__importDefault(n(7)),s=r.__importDefault(n(2)),l=r.__importDefault(n(20)),u=r.__importDefault(n(4)),c=r.__importDefault(n(3)),f=o.default.Action,d=o.default.fromValues({action:f.CLOSE}),p=o.default.fromValues({action:f.DISCONNECT}),h=/** @class */function(e){function t(t,n,r,o){var i=e.call(this)||this;return o&&(r.format=void 0,r.heartbeats=!0),i.connectionManager=t,t.registerProposedTransport(i),i.auth=n,i.params=r,i.timeouts=r.options.timeouts,i.format=r.format,i.isConnected=!1,i.isFinished=!1,i.isDisposed=!1,i.maxIdleInterval=null,i.idleTimer=null,i.lastActivity=null,i}return r.__extends(t,e),t.prototype.connect=function(){},t.prototype.close=function(){this.isConnected&&this.requestClose(),this.finish("closed",l.default.closed())},t.prototype.disconnect=function(e){this.isConnected&&this.requestDisconnect(),this.finish("disconnected",e||l.default.disconnected())},t.prototype.fail=function(e){this.isConnected&&this.requestDisconnect(),this.finish("failed",e||l.default.failed())},t.prototype.finish=function(e,t){var n;this.isFinished||(this.isFinished=!0,this.isConnected=!1,this.maxIdleInterval=null,clearTimeout(null!==(n=this.idleTimer)&&void 0!==n?n:void 0),this.idleTimer=null,this.emit(e,t),this.dispose())},t.prototype.onProtocolMessage=function(e){switch(s.default.shouldLog(s.default.LOG_MICRO)&&s.default.logAction(s.default.LOG_MICRO,"Transport.onProtocolMessage()","received on "+this.shortName+": "+o.default.stringify(e)+"; connectionId = "+this.connectionManager.connectionId),this.onActivity(),e.action){case f.HEARTBEAT:s.default.logAction(s.default.LOG_MICRO,"Transport.onProtocolMessage()",this.shortName+" heartbeat; connectionId = "+this.connectionManager.connectionId),this.emit("heartbeat",e.id);break;case f.CONNECTED:this.onConnect(e),this.emit("connected",e.error,e.connectionId,e.connectionDetails,e);break;case f.CLOSED:this.onClose(e);break;case f.DISCONNECTED:this.onDisconnect(e);break;case f.ACK:this.emit("ack",e.msgSerial,e.count);break;case f.NACK:this.emit("nack",e.msgSerial,e.count,e.error);break;case f.SYNC:this.connectionManager.onChannelMessage(e,this);break;case f.ACTIVATE:break;case f.AUTH:this.auth.authorize(function(e){e&&s.default.logAction(s.default.LOG_ERROR,"Transport.onProtocolMessage()","Ably requested re-authentication, but unable to obtain a new token: "+i.inspectError(e))});break;case f.ERROR:if(s.default.logAction(s.default.LOG_MINOR,"Transport.onProtocolMessage()","received error action; connectionId = "+this.connectionManager.connectionId+"; err = "+c.default.Config.inspect(e.error)+(e.channel?", channel: "+e.channel:"")),void 0===e.channel){this.onFatalError(e);break}/* otherwise it's a channel-specific error, so handle it in the channel */this.connectionManager.onChannelMessage(e,this);break;default:/* all other actions are channel-specific */this.connectionManager.onChannelMessage(e,this)}},t.prototype.onConnect=function(e){if(this.isConnected=!0,!e.connectionDetails)throw Error("Transport.onConnect(): Connect message recieved without connectionDetails");var t=e.connectionDetails.maxIdleInterval;t&&(this.maxIdleInterval=t+this.timeouts.realtimeRequestTimeout,this.onActivity());/* else Realtime declines to guarantee any maximum idle interval - CD2h */},t.prototype.onDisconnect=function(e){/* Used for when the server has disconnected the client (usually with a
         * DISCONNECTED action) */var t=e&&e.error;s.default.logAction(s.default.LOG_MINOR,"Transport.onDisconnect()","err = "+i.inspectError(t)),this.finish("disconnected",t)},t.prototype.onFatalError=function(e){/* On receipt of a fatal connection error, we can assume that the server
         * will close the connection and the transport, and do not need to request
         * a disconnection - RTN15i */var t=e&&e.error;s.default.logAction(s.default.LOG_MINOR,"Transport.onFatalError()","err = "+i.inspectError(t)),this.finish("failed",t)},t.prototype.onClose=function(e){var t=e&&e.error;s.default.logAction(s.default.LOG_MINOR,"Transport.onClose()","err = "+i.inspectError(t)),this.finish("closed",t)},t.prototype.requestClose=function(){s.default.logAction(s.default.LOG_MINOR,"Transport.requestClose()",""),this.send(d)},t.prototype.requestDisconnect=function(){s.default.logAction(s.default.LOG_MINOR,"Transport.requestDisconnect()",""),this.send(p)},t.prototype.ping=function(e){var t={action:o.default.Action.HEARTBEAT};e&&(t.id=e),this.send(o.default.fromValues(t))},t.prototype.dispose=function(){s.default.logAction(s.default.LOG_MINOR,"Transport.dispose()",""),this.isDisposed=!0,this.off()},t.prototype.onActivity=function(){this.maxIdleInterval&&(this.lastActivity=this.connectionManager.lastActivity=i.now(),this.setIdleTimer(this.maxIdleInterval+100))},t.prototype.setIdleTimer=function(e){var t=this;this.idleTimer||(this.idleTimer=setTimeout(function(){t.onIdleTimerExpire()},e))},t.prototype.onIdleTimerExpire=function(){if(!this.lastActivity||!this.maxIdleInterval)throw Error("Transport.onIdleTimerExpire(): lastActivity/maxIdleInterval not set");this.idleTimer=null;var e=i.now()-this.lastActivity,t=this.maxIdleInterval-e;if(t<=0){var n="No activity seen from realtime in "+e+"ms; assuming connection has dropped";s.default.logAction(s.default.LOG_ERROR,"Transport.onIdleTimerExpire()",n),this.disconnect(new u.default(n,80003,408))}else this.setIdleTimer(t+100)},t.tryConnect=function(e,t,n,r,o){var i,a=new e(t,n,r),l=function(e){clearTimeout(i),o({event:this.event,error:e})};i=setTimeout(function(){a.off(["preconnect","disconnected","failed"]),a.dispose(),l.call({event:"disconnected"},new u.default("Timeout waiting for transport to indicate itself viable",5e4,500))},t.options.timeouts.realtimeRequestTimeout),a.on(["failed","disconnected"],l),a.on("preconnect",function(){s.default.logAction(s.default.LOG_MINOR,"Transport.tryConnect()","viable transport "+a),clearTimeout(i),a.off(["failed","disconnected"],l),o(null,a)}),a.connect()},t}(a.default);t.default=h;/***/},/* 27 *//***/function(e,t,n){var r,o,i,a,s,l,u;// CommonJS
e.exports=(r=n(6),n(40),n(24),i=(o=r.lib).Base,a=o.WordArray,l=(s=r.algo).MD5,u=s.EvpKDF=i.extend({/**
	         * Configuration options.
	         *
	         * @property {number} keySize The key size in words to generate. Default: 4 (128 bits)
	         * @property {Hasher} hasher The hash algorithm to use. Default: MD5
	         * @property {number} iterations The number of iterations to perform. Default: 1
	         */cfg:i.extend({keySize:4,hasher:l,iterations:1}),/**
	         * Initializes a newly created key derivation function.
	         *
	         * @param {Object} cfg (Optional) The configuration options to use for the derivation.
	         *
	         * @example
	         *
	         *     var kdf = CryptoJS.algo.EvpKDF.create();
	         *     var kdf = CryptoJS.algo.EvpKDF.create({ keySize: 8 });
	         *     var kdf = CryptoJS.algo.EvpKDF.create({ keySize: 8, iterations: 1000 });
	         */init:function(e){this.cfg=this.cfg.extend(e)},/**
	         * Derives a key from a password.
	         *
	         * @param {WordArray|string} password The password.
	         * @param {WordArray|string} salt A salt.
	         *
	         * @return {WordArray} The derived key.
	         *
	         * @example
	         *
	         *     var key = kdf.compute(password, salt);
	         */compute:function(e,t){// Generate key
for(// Shortcut
var n,r=this.cfg,o=r.hasher.create(),i=a.create(),s=i.words,l=r.keySize,u=r.iterations;s.length<l;){n&&o.update(n),n=o.update(e).finalize(t),o.reset();// Iterations
for(var c=1;c<u;c++)n=o.finalize(n),o.reset();i.concat(n)}return i.sigBytes=4*l,i}}),/**
	     * Derives a key from a password.
	     *
	     * @param {WordArray|string} password The password.
	     * @param {WordArray|string} salt A salt.
	     * @param {Object} cfg (Optional) The configuration options to use for this computation.
	     *
	     * @return {WordArray} The derived key.
	     *
	     * @static
	     *
	     * @example
	     *
	     *     var key = CryptoJS.EvpKDF(password, salt);
	     *     var key = CryptoJS.EvpKDF(password, salt, { keySize: 8 });
	     *     var key = CryptoJS.EvpKDF(password, salt, { keySize: 8, iterations: 1000 });
	     */r.EvpKDF=function(e,t,n){return u.create(n).compute(e,t)},r.EvpKDF);/***/},/* 28 *//***/function(e,t,n){var r,o,i,a,s,l,u,c,f,d,p,h,g,m,y,v,b,_;// CommonJS
e.exports=(r=n(6),n(27),void/**
	 * Cipher core components.
	 */(r.lib.Cipher||(i=(o=r.lib).Base,a=o.WordArray,s=o.BufferedBlockAlgorithm,(l=r.enc).Utf8,u=l.Base64,c=r.algo.EvpKDF,f=o.Cipher=s.extend({/**
	         * Configuration options.
	         *
	         * @property {WordArray} iv The IV to use for this operation.
	         */cfg:i.extend(),/**
	         * Creates this cipher in encryption mode.
	         *
	         * @param {WordArray} key The key.
	         * @param {Object} cfg (Optional) The configuration options to use for this operation.
	         *
	         * @return {Cipher} A cipher instance.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var cipher = CryptoJS.algo.AES.createEncryptor(keyWordArray, { iv: ivWordArray });
	         */createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},/**
	         * Creates this cipher in decryption mode.
	         *
	         * @param {WordArray} key The key.
	         * @param {Object} cfg (Optional) The configuration options to use for this operation.
	         *
	         * @return {Cipher} A cipher instance.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var cipher = CryptoJS.algo.AES.createDecryptor(keyWordArray, { iv: ivWordArray });
	         */createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},/**
	         * Initializes a newly created cipher.
	         *
	         * @param {number} xformMode Either the encryption or decryption transormation mode constant.
	         * @param {WordArray} key The key.
	         * @param {Object} cfg (Optional) The configuration options to use for this operation.
	         *
	         * @example
	         *
	         *     var cipher = CryptoJS.algo.AES.create(CryptoJS.algo.AES._ENC_XFORM_MODE, keyWordArray, { iv: ivWordArray });
	         */init:function(e,t,n){// Apply config defaults
this.cfg=this.cfg.extend(n),// Store transform mode and key
this._xformMode=e,this._key=t,// Set initial values
this.reset()},/**
	         * Resets this cipher to its initial state.
	         *
	         * @example
	         *
	         *     cipher.reset();
	         */reset:function(){// Reset data buffer
s.reset.call(this),// Perform concrete-cipher logic
this._doReset()},/**
	         * Adds data to be encrypted or decrypted.
	         *
	         * @param {WordArray|string} dataUpdate The data to encrypt or decrypt.
	         *
	         * @return {WordArray} The data after processing.
	         *
	         * @example
	         *
	         *     var encrypted = cipher.process('data');
	         *     var encrypted = cipher.process(wordArray);
	         */process:function(e){// Process available blocks
return(// Append
this._append(e),this._process())},/**
	         * Finalizes the encryption or decryption process.
	         * Note that the finalize operation is effectively a destructive, read-once operation.
	         *
	         * @param {WordArray|string} dataUpdate The final data to encrypt or decrypt.
	         *
	         * @return {WordArray} The data after final processing.
	         *
	         * @example
	         *
	         *     var encrypted = cipher.finalize();
	         *     var encrypted = cipher.finalize('data');
	         *     var encrypted = cipher.finalize(wordArray);
	         */finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,/**
	         * Creates shortcut functions to a cipher's object interface.
	         *
	         * @param {Cipher} cipher The cipher to create a helper for.
	         *
	         * @return {Object} An object with encrypt and decrypt shortcut functions.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var AES = CryptoJS.lib.Cipher._createHelper(CryptoJS.algo.AES);
	         */_createHelper:function(){function e(e){return"string"==typeof e?_:v}return function(t){return{encrypt:function(n,r,o){return e(r).encrypt(t,n,r,o)},decrypt:function(n,r,o){return e(r).decrypt(t,n,r,o)}}}}()}),o.StreamCipher=f.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),d=r.mode={},p=o.BlockCipherMode=i.extend({/**
	         * Creates this mode for encryption.
	         *
	         * @param {Cipher} cipher A block cipher instance.
	         * @param {Array} iv The IV words.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var mode = CryptoJS.mode.CBC.createEncryptor(cipher, iv.words);
	         */createEncryptor:function(e,t){return this.Encryptor.create(e,t)},/**
	         * Creates this mode for decryption.
	         *
	         * @param {Cipher} cipher A block cipher instance.
	         * @param {Array} iv The IV words.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var mode = CryptoJS.mode.CBC.createDecryptor(cipher, iv.words);
	         */createDecryptor:function(e,t){return this.Decryptor.create(e,t)},/**
	         * Initializes a newly created mode.
	         *
	         * @param {Cipher} cipher A block cipher instance.
	         * @param {Array} iv The IV words.
	         *
	         * @example
	         *
	         *     var mode = CryptoJS.mode.CBC.Encryptor.create(cipher, iv.words);
	         */init:function(e,t){this._cipher=e,this._iv=t}}),h=d.CBC=function(){/**
	         * Abstract base CBC mode.
	         */var e=p.extend();function t(e,t,n){// Shortcut
var r,o=this._iv;o?(r=o,// Remove IV for subsequent blocks
this._iv=void 0):r=this._prevBlock;// XOR blocks
for(var i=0;i<n;i++)e[t+i]^=r[i]}return(/**
	         * CBC encryptor.
	         */e.Encryptor=e.extend({/**
	             * Processes the data block at offset.
	             *
	             * @param {Array} words The data words to operate on.
	             * @param {number} offset The offset where the block starts.
	             *
	             * @example
	             *
	             *     mode.processBlock(data.words, offset);
	             */processBlock:function(e,n){// Shortcuts
var r=this._cipher,o=r.blockSize;// XOR and encrypt
t.call(this,e,n,o),r.encryptBlock(e,n),// Remember this block to use with next block
this._prevBlock=e.slice(n,n+o)}}),/**
	         * CBC decryptor.
	         */e.Decryptor=e.extend({/**
	             * Processes the data block at offset.
	             *
	             * @param {Array} words The data words to operate on.
	             * @param {number} offset The offset where the block starts.
	             *
	             * @example
	             *
	             *     mode.processBlock(data.words, offset);
	             */processBlock:function(e,n){// Shortcuts
var r=this._cipher,o=r.blockSize,i=e.slice(n,n+o);// Decrypt and XOR
r.decryptBlock(e,n),t.call(this,e,n,o),// This block becomes the previous block
this._prevBlock=i}}),e)}(),g=(r.pad={}).Pkcs7={/**
	         * Pads data using the algorithm defined in PKCS #5/7.
	         *
	         * @param {WordArray} data The data to pad.
	         * @param {number} blockSize The multiple that the data should be padded to.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     CryptoJS.pad.Pkcs7.pad(wordArray, 4);
	         */pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,o=r<<24|r<<16|r<<8|r,i=[],s=0;s<r;s+=4)i.push(o);// Shortcut
var l=a.create(i,r);// Add padding
e.concat(l)},/**
	         * Unpads data that had been padded using the algorithm defined in PKCS #5/7.
	         *
	         * @param {WordArray} data The data to unpad.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     CryptoJS.pad.Pkcs7.unpad(wordArray);
	         */unpad:function(e){// Get number of padding bytes from last byte
var t=255&e.words[e.sigBytes-1>>>2];// Remove padding
e.sigBytes-=t}},o.BlockCipher=f.extend({/**
	         * Configuration options.
	         *
	         * @property {Mode} mode The block mode to use. Default: CBC
	         * @property {Padding} padding The padding strategy to use. Default: Pkcs7
	         */cfg:f.cfg.extend({mode:h,padding:g}),reset:function(){// Reset cipher
f.reset.call(this);// Shortcuts
var e,t=this.cfg,n=t.iv,r=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,// Keep at least one block in the buffer for unpadding
this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(r,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){// Shortcut
var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(// Pad data
t.pad(this._data,this.blockSize),// Process final blocks
e=this._process(!0)):(// Process final blocks
e=this._process(!0),// Unpad data
t.unpad(e)),e},blockSize:4}),m=o.CipherParams=i.extend({/**
	         * Initializes a newly created cipher params object.
	         *
	         * @param {Object} cipherParams An object with any of the possible cipher parameters.
	         *
	         * @example
	         *
	         *     var cipherParams = CryptoJS.lib.CipherParams.create({
	         *         ciphertext: ciphertextWordArray,
	         *         key: keyWordArray,
	         *         iv: ivWordArray,
	         *         salt: saltWordArray,
	         *         algorithm: CryptoJS.algo.AES,
	         *         mode: CryptoJS.mode.CBC,
	         *         padding: CryptoJS.pad.PKCS7,
	         *         blockSize: 4,
	         *         formatter: CryptoJS.format.OpenSSL
	         *     });
	         */init:function(e){this.mixIn(e)},/**
	         * Converts this cipher params object to a string.
	         *
	         * @param {Format} formatter (Optional) The formatting strategy to use.
	         *
	         * @return {string} The stringified cipher params.
	         *
	         * @throws Error If neither the formatter nor the default formatter is set.
	         *
	         * @example
	         *
	         *     var string = cipherParams + '';
	         *     var string = cipherParams.toString();
	         *     var string = cipherParams.toString(CryptoJS.format.OpenSSL);
	         */toString:function(e){return(e||this.formatter).stringify(this)}}),y=(r.format={}).OpenSSL={/**
	         * Converts a cipher params object to an OpenSSL-compatible string.
	         *
	         * @param {CipherParams} cipherParams The cipher params object.
	         *
	         * @return {string} The OpenSSL-compatible string.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var openSSLString = CryptoJS.format.OpenSSL.stringify(cipherParams);
	         */stringify:function(e){// Shortcuts
var t=e.ciphertext,n=e.salt;return(n?a.create([1398893684,1701076831]).concat(n).concat(t):t).toString(u)},/**
	         * Converts an OpenSSL-compatible string to a cipher params object.
	         *
	         * @param {string} openSSLStr The OpenSSL-compatible string.
	         *
	         * @return {CipherParams} The cipher params object.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var cipherParams = CryptoJS.format.OpenSSL.parse(openSSLString);
	         */parse:function(e){// Parse base64
var t,n=u.parse(e),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(// Extract salt
t=a.create(r.slice(2,4)),// Remove salt from ciphertext
r.splice(0,4),n.sigBytes-=16),m.create({ciphertext:n,salt:t})}},v=o.SerializableCipher=i.extend({/**
	         * Configuration options.
	         *
	         * @property {Formatter} format The formatting strategy to convert cipher param objects to and from a string. Default: OpenSSL
	         */cfg:i.extend({format:y}),/**
	         * Encrypts a message.
	         *
	         * @param {Cipher} cipher The cipher algorithm to use.
	         * @param {WordArray|string} message The message to encrypt.
	         * @param {WordArray} key The key.
	         * @param {Object} cfg (Optional) The configuration options to use for this operation.
	         *
	         * @return {CipherParams} A cipher params object.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var ciphertextParams = CryptoJS.lib.SerializableCipher.encrypt(CryptoJS.algo.AES, message, key);
	         *     var ciphertextParams = CryptoJS.lib.SerializableCipher.encrypt(CryptoJS.algo.AES, message, key, { iv: iv });
	         *     var ciphertextParams = CryptoJS.lib.SerializableCipher.encrypt(CryptoJS.algo.AES, message, key, { iv: iv, format: CryptoJS.format.OpenSSL });
	         */encrypt:function(e,t,n,r){// Apply config defaults
r=this.cfg.extend(r);// Encrypt
var o=e.createEncryptor(n,r),i=o.finalize(t),a=o.cfg;// Create and return serializable cipher params
return m.create({ciphertext:i,key:n,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:r.format})},/**
	         * Decrypts serialized ciphertext.
	         *
	         * @param {Cipher} cipher The cipher algorithm to use.
	         * @param {CipherParams|string} ciphertext The ciphertext to decrypt.
	         * @param {WordArray} key The key.
	         * @param {Object} cfg (Optional) The configuration options to use for this operation.
	         *
	         * @return {WordArray} The plaintext.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var plaintext = CryptoJS.lib.SerializableCipher.decrypt(CryptoJS.algo.AES, formattedCiphertext, key, { iv: iv, format: CryptoJS.format.OpenSSL });
	         *     var plaintext = CryptoJS.lib.SerializableCipher.decrypt(CryptoJS.algo.AES, ciphertextParams, key, { iv: iv, format: CryptoJS.format.OpenSSL });
	         */decrypt:function(e,t,n,r){return(// Apply config defaults
r=this.cfg.extend(r),// Convert string to CipherParams
t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext))},/**
	         * Converts serialized ciphertext to CipherParams,
	         * else assumed CipherParams already and returns ciphertext unchanged.
	         *
	         * @param {CipherParams|string} ciphertext The ciphertext.
	         * @param {Formatter} format The formatting strategy to use to parse serialized ciphertext.
	         *
	         * @return {CipherParams} The unserialized ciphertext.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var ciphertextParams = CryptoJS.lib.SerializableCipher._parse(ciphertextStringOrParams, format);
	         */_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),b=(r.kdf={}).OpenSSL={/**
	         * Derives a key and IV from a password.
	         *
	         * @param {string} password The password to derive from.
	         * @param {number} keySize The size in words of the key to generate.
	         * @param {number} ivSize The size in words of the IV to generate.
	         * @param {WordArray|string} salt (Optional) A 64-bit salt to use. If omitted, a salt will be generated randomly.
	         *
	         * @return {CipherParams} A cipher params object with the key, IV, and salt.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var derivedParams = CryptoJS.kdf.OpenSSL.execute('Password', 256/32, 128/32);
	         *     var derivedParams = CryptoJS.kdf.OpenSSL.execute('Password', 256/32, 128/32, 'saltsalt');
	         */execute:function(e,t,n,r){r||(r=a.random(8));// Derive key and IV
var o=c.create({keySize:t+n}).compute(e,r),i=a.create(o.words.slice(t),4*n);// Return params
return o.sigBytes=4*t,m.create({key:o,iv:i,salt:r})}},_=o.PasswordBasedCipher=v.extend({/**
	         * Configuration options.
	         *
	         * @property {KDF} kdf The key derivation function to use to generate a key and IV from a password. Default: OpenSSL
	         */cfg:v.cfg.extend({kdf:b}),/**
	         * Encrypts a message using a password.
	         *
	         * @param {Cipher} cipher The cipher algorithm to use.
	         * @param {WordArray|string} message The message to encrypt.
	         * @param {string} password The password.
	         * @param {Object} cfg (Optional) The configuration options to use for this operation.
	         *
	         * @return {CipherParams} A cipher params object.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var ciphertextParams = CryptoJS.lib.PasswordBasedCipher.encrypt(CryptoJS.algo.AES, message, 'password');
	         *     var ciphertextParams = CryptoJS.lib.PasswordBasedCipher.encrypt(CryptoJS.algo.AES, message, 'password', { format: CryptoJS.format.OpenSSL });
	         */encrypt:function(e,t,n,r){// Derive key and other params
var o=// Apply config defaults
(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize);// Add IV to config
r.iv=o.iv;// Encrypt
var i=v.encrypt.call(this,e,t,o.key,r);return(// Mix in derived params
i.mixIn(o),i)},/**
	         * Decrypts serialized ciphertext using a password.
	         *
	         * @param {Cipher} cipher The cipher algorithm to use.
	         * @param {CipherParams|string} ciphertext The ciphertext to decrypt.
	         * @param {string} password The password.
	         * @param {Object} cfg (Optional) The configuration options to use for this operation.
	         *
	         * @return {WordArray} The plaintext.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var plaintext = CryptoJS.lib.PasswordBasedCipher.decrypt(CryptoJS.algo.AES, formattedCiphertext, 'password', { format: CryptoJS.format.OpenSSL });
	         *     var plaintext = CryptoJS.lib.PasswordBasedCipher.decrypt(CryptoJS.algo.AES, ciphertextParams, 'password', { format: CryptoJS.format.OpenSSL });
	         */decrypt:function(e,t,n,r){// Apply config defaults
r=this.cfg.extend(r),// Convert string to CipherParams
t=this._parse(t,r.format);// Derive key and other params
var o=r.kdf.execute(n,e.keySize,e.ivSize,t.salt);return(// Add IV to config
r.iv=o.iv,v.decrypt.call(this,e,t,o.key,r))}}))));/***/},/* 29 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Request=t.createRequest=void 0;var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(12)),a=r.__importDefault(n(3)),s=r.__importDefault(n(7)),l=n(4),u=r.__importDefault(n(8)),c=r.__importDefault(n(2)),f=r.__importDefault(n(21)),d=o.getGlobalObject(),p=function(){},h=d._ablyjs_jsonp={};/* express strips out parantheses from the callback!
 * Kludge to still alow its responses to work, while not keeping the
 * function form for normal use and not cluttering window.Ably
 * https://github.com/expressjs/express/blob/5b4d4b4ab1324743534fbcd4709f4e75bb4b4e9d/lib/response.js#L305
 */h._=function(e){return h["_"+e]||p};var g=1,m="jsonp";function y(e,t,n,r,i,a,s){return(/* JSONP requests are used either with the context being a realtime
     * transport, or with timeouts passed in (for when used by a rest client),
     * or completely standalone.  Use the appropriate timeouts in each case */a=a||u.default.TIMEOUTS,new b(void 0,e,t,o.copy(n),r,i,a,s))}t.createRequest=y;var v=/** @class */function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;return o.shortName=m,r.stream=!1,o}return r.__extends(t,e),t.isAvailable=function(){return a.default.Config.jsonpSupported&&a.default.Config.allowComet},t.prototype.toString=function(){return"JSONPTransport; uri="+this.baseUri+"; isConnected="+this.isConnected},t.prototype.createRequest=function(e,t,n,r,o,i,a){return y(e,t,n,r,o,/* JSONP requests are used either with the context being a realtime
         * transport, or with timeouts passed in (for when used by a rest client),
         * or completely standalone.  Use the appropriate timeouts in each case */i=(this===null||void 0===this?void 0:this.timeouts)||i||u.default.TIMEOUTS,a)},t}(i.default),b=/** @class */function(e){function t(t,n,r,i,a,s,l,u){var c=e.call(this)||this;return void 0===t&&(t=g++),c.id=t,c.uri=n,c.params=i||{},c.params.rnd=o.cheapRandStr(),r&&(r["X-Ably-Version"]&&(c.params.v=r["X-Ably-Version"]),r["X-Ably-Lib"]&&(c.params.lib=r["X-Ably-Lib"])),c.body=a,c.method=u,c.requestMode=s,c.timeouts=l,c.requestComplete=!1,c}return r.__extends(t,e),t.prototype.exec=function(){var e=this,t=this.id,n=this.body,r=this.method,i=this.uri,s=this.params;s.callback="_ablyjs_jsonp._("+t+")",s.envelope="jsonp",n&&(s.body=n),r&&"get"!==r&&(s.method=r);var u=this.script=document.createElement("script"),d=i+o.toQueryString(s);u.src=d,u.src.split("/").slice(-1)[0]!==d.split("/").slice(-1)[0]&&/* The src has been truncated. Can't abort, but can at least emit an
             * error so the user knows what's gone wrong. (Can't compare strings
             * directly as src may have a port, script.src won't) */c.default.logAction(c.default.LOG_ERROR,"JSONP Request.exec()","Warning: the browser appears to have truncated the script URI. This will likely result in the request failing due to an unparseable body param"),u.async=!0,u.type="text/javascript",u.charset="UTF-8",u.onerror=function(t){e.complete(new l.PartialErrorInfo("JSONP script error (event: "+a.default.Config.inspect(t)+")",null,400))},h["_"+t]=function(t){if(t.statusCode){/* Handle as enveloped jsonp, as all jsonp transport uses should be */var n=t.response;if(204==t.statusCode)e.complete(null,null,null,t.statusCode);else if(n){if(t.statusCode<400||o.isArray(n))/* If response is an array, it's an array of protocol messages -- even if
                     * it contains an error action (hence the nonsuccess statuscode), we can
                     * consider the request to have succeeded, just pass it on to
                     * onProtocolMessage to decide what to do */e.complete(null,n,t.headers,t.statusCode);else{var r=n.error||new l.PartialErrorInfo("Error response received from server",null,t.statusCode);e.complete(r)}}else e.complete(new l.PartialErrorInfo("Invalid server response: no envelope detected",null,500))}else /* Handle as non-enveloped -- as will be eg from a customer's authUrl server */e.complete(null,t)};var p=this.requestMode==f.default.REQ_SEND?this.timeouts.httpRequestTimeout:this.timeouts.recvTimeout;this.timer=setTimeout(this.abort.bind(this),p);var g=document.getElementsByTagName("head")[0];g.insertBefore(u,g.firstChild)},t.prototype.complete=function(e,t,n,r){if(n=n||{},!this.requestComplete){this.requestComplete=!0;var o=void 0;t&&(o="string"==typeof t?"text/plain":"application/json",n["content-type"]=o,this.emit("data",t)),this.emit("complete",e,t,n,/* unpacked: */!0,r),this.dispose()}},t.prototype.abort=function(){this.dispose()},t.prototype.dispose=function(){var e=this.timer;e&&(clearTimeout(e),this.timer=null);var t=this.script;t.parentNode&&t.parentNode.removeChild(t),delete h[this.id],this.emit("disposed")},t}(s.default);t.Request=b,t.default=function(e){return d.JSONPTransport=v,v.isAvailable()&&(e.supportedTransports[m]=v),v};/***/},/* 30 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(2)),a=r.__importDefault(n(8)),s=r.__importDefault(n(17)),l=r.__importDefault(n(46)),u=r.__importDefault(n(19)),c=r.__importDefault(n(33)),f=r.__importDefault(n(4)),d=r.__importDefault(n(49)),p=r.__importDefault(n(18)),h=r.__importDefault(n(3)),g=r.__importDefault(n(9)),m=r.__importDefault(n(15)),y=r.__importDefault(n(14)),v=function(){},b=/** @class */function(){function e(e){if(!e){var t="no options provided";throw i.default.logAction(i.default.LOG_ERROR,"Rest()",t),Error(t)}var n=a.default.objectifyOptions(e);n.log&&i.default.setLog(n.log.level,n.log.handler),i.default.logAction(i.default.LOG_MICRO,"Rest()","initialized with clientOptions "+h.default.Config.inspect(e));var r=this.options=a.default.normaliseOptions(n);/* process options */if(r.key){var o=r.key.match(/^([^:\s]+):([^:.\s]+)$/);if(!o){var t="invalid key parameter";throw i.default.logAction(i.default.LOG_ERROR,"Rest()",t),new f.default(t,40400,404)}r.keyName=o[1],r.keySecret=o[2]}if("clientId"in r){if("string"==typeof r.clientId||null===r.clientId){if("*"===r.clientId)throw new f.default('Cant use "*" as a clientId as that string is reserved. (To change the default token request behaviour to use a wildcard clientId, use {defaultTokenParams: {clientId: "*"}})',40012,400)}else throw new f.default("clientId must be either a string or null",40012,400)}i.default.logAction(i.default.LOG_MINOR,"Rest()","started; version = "+a.default.version),this.baseUri=this.authority=function(e){return a.default.getHttpScheme(r)+e+":"+a.default.getPort(r,!1)},this._currentFallback=null,this.serverTimeOffset=null,this.http=new h.default.Http(r),this.auth=new s.default(this,r),this.channels=new _(this),this.push=new l.default(this)}return e.prototype.stats=function(e,t){/* params and callback are optional; see if params contains the callback */if(void 0===t){if("function"==typeof e)t=e,e=null;else{if(this.options.promises)return o.promisify(this,"stats",[e]);t=v}}var n=o.defaultGetHeaders(this.options),r=this.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,i=this.http.supportsLinkHeaders?void 0:r;this.options.headers&&o.mixin(n,this.options.headers),new u.default(this,"/stats",n,i,function(e,t,n){for(var r=n?e:JSON.parse(e),o=0;o<r.length;o++)r[o]=d.default.fromValues(r[o]);return r}).get(e,t)},e.prototype.time=function(e,t){var n=this;/* params and callback are optional; see if params contains the callback */if(void 0===t){if("function"==typeof e)t=e,e=null;else if(this.options.promises)return o.promisify(this,"time",[e])}var r=t||v,i=o.defaultGetHeaders(this.options);this.options.headers&&o.mixin(i,this.options.headers),this.http.do(p.default.Get,this,function(e){return n.authority(e)+"/time"},i,null,e,function(e,t,i,a){if(e){r(e);return}a||(t=JSON.parse(t));var s=t[0];if(!s){r(new f.default("Internal error (unexpected result type from GET /time)",5e4,500));return}/* calculate time offset only once for this device by adding to the prototype */n.serverTimeOffset=s-o.now(),r(null,s)})},e.prototype.request=function(e,t,n,r,i,a){var s=this.options.useBinaryProtocol,l=s?h.default.Config.msgpack.encode:JSON.stringify,c=s?h.default.Config.msgpack.decode:JSON.parse,d=s?o.Format.msgpack:o.Format.json,p=this.http.supportsLinkHeaders?void 0:d;n=n||{};var g=e.toLowerCase(),m="get"==g?o.defaultGetHeaders(this.options,d):o.defaultPostHeaders(this.options,d);if(void 0===a){if(this.options.promises)return o.promisify(this,"request",[e,t,n,r,i]);a=v}"string"!=typeof r&&(r=l(r)),this.options.headers&&o.mixin(m,this.options.headers),i&&o.mixin(m,i);var y=new u.default(this,t,m,p,function(e,t,n){return o.ensureArray(n?e:c(e))},/* useHttpPaginatedResponse: */!0);if(!o.arrIn(h.default.Http.methods,g))throw new f.default("Unsupported method "+g,40500,405);o.arrIn(h.default.Http.methodsWithBody,g)?y[g](n,r,a):y[g](n,a)},e.prototype.batchPublish=function(e,t){if(void 0===t){if(this.options.promises)return o.promisify(this,"batchPublish",[e]);t=v}var n,r,i=t;o.isArray(e)?(n=e,r=!1):(n=[e],r=!0);var a=this.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,s=o.defaultPostHeaders(this.options,a);this.options.headers&&o.mixin(s,this.options.headers);var l=o.encodeBody(n,a);y.default.post(this,"/messages",l,s,{newBatchResponse:"true"},null,function(e,t,n,s){if(e){// TODO remove this type assertion after fixing https://github.com/ably/ably-js/issues/1405
i(e);return}var l=s?t:o.decodeBody(t,a);r?i(null,l[0]):i(null,l)})},e.prototype.batchPresence=function(e,t){if(void 0===t){if(this.options.promises)return o.promisify(this,"batchPresence",[e]);t=v}var n=t,r=this.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,i=o.defaultPostHeaders(this.options,r);this.options.headers&&o.mixin(i,this.options.headers);var a=e.join(",");y.default.get(this,"/presence",i,{newBatchResponse:"true",channels:a},null,function(e,t,i,a){if(e){// TODO remove this type assertion after fixing https://github.com/ably/ably-js/issues/1405
n(e);return}n(null,a?t:o.decodeBody(t,r))})},e.prototype.setLog=function(e){i.default.setLog(e.level,e.handler)},e.Promise=function(t){return(t=a.default.objectifyOptions(t)).promises=!0,new e(t)},e.Callbacks=e,e.Platform=h.default,e.Message=g.default,e.PresenceMessage=m.default,e}(),_=/** @class */function(){function e(e){this.rest=e,this.all=Object.create(null)}return e.prototype.get=function(e,t){e=String(e);var n=this.all[e];return n?t&&n.setOptions(t):this.all[e]=n=new c.default(this.rest,e,t),n},/* Included to support certain niche use-cases; most users should ignore this.
     * Please do not use this unless you know what you're doing */e.prototype.release=function(e){delete this.all[String(e)]},e}();t.default=b;/***/},/* 31 *//***/function(e,t,n){// CommonJS
e.exports=n(6).enc.Utf8;/***/},/* 32 *//***/function(e,t,n){var r,o,i,a,s,l,u,c,f,d;// CommonJS
e.exports=(r=n(6),o=Math,a=(i=r.lib).WordArray,s=i.Hasher,l=r.algo,u=[],c=[],// Compute constants
function(){function e(e){return(e-(0|e))*4294967296|0}for(var t=2,n=0;n<64;)(function(e){for(var t=o.sqrt(e),n=2;n<=t;n++)if(!(e%n))return!1;return!0})(t)&&(n<8&&(u[n]=e(o.pow(t,.5))),c[n]=e(o.pow(t,1/3)),n++),t++}(),f=[],d=l.SHA256=s.extend({_doReset:function(){this._hash=new a.init(u.slice(0))},_doProcessBlock:function(e,t){// Computation
for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],l=n[5],u=n[6],d=n[7],p=0;p<64;p++){if(p<16)f[p]=0|e[t+p];else{var h=f[p-15],g=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,m=f[p-2],y=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;f[p]=g+f[p-7]+y+f[p-16]}var v=s&l^~s&u,b=r&o^r&i^o&i,_=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),w=d+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+v+c[p]+f[p],S=_+b;d=u,u=l,l=s,s=a+w|0,a=i,i=o,o=r,r=w+S|0}// Intermediate hash value
n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+l|0,n[6]=n[6]+u|0,n[7]=n[7]+d|0},_doFinalize:function(){// Shortcuts
var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;// Return final computed hash
return(// Add padding
t[r>>>5]|=128<<24-r%32,t[(r+64>>>9<<4)+14]=o.floor(n/4294967296),t[(r+64>>>9<<4)+15]=n,e.sigBytes=4*t.length,// Hash final blocks
this._process(),this._hash)},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}}),/**
	     * Shortcut function to the hasher's object interface.
	     *
	     * @param {WordArray|string} message The message to hash.
	     *
	     * @return {WordArray} The hash.
	     *
	     * @static
	     *
	     * @example
	     *
	     *     var hash = CryptoJS.SHA256('message');
	     *     var hash = CryptoJS.SHA256(wordArray);
	     */r.SHA256=s._createHelper(d),/**
	     * Shortcut function to the HMAC's object interface.
	     *
	     * @param {WordArray|string} message The message to hash.
	     * @param {WordArray|string} key The secret key.
	     *
	     * @return {WordArray} The HMAC.
	     *
	     * @static
	     *
	     * @example
	     *
	     *     var hmac = CryptoJS.HmacSHA256(message, key);
	     */r.HmacSHA256=s._createHmacHelper(d),r.SHA256);/***/},/* 33 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(7)),a=r.__importDefault(n(2)),s=r.__importDefault(n(34)),l=r.__importDefault(n(9)),u=r.__importDefault(n(4)),c=r.__importDefault(n(19)),f=r.__importDefault(n(14)),d=r.__importDefault(n(3));function p(){}function h(e){var t=e||{};if(t.cipher){if(!d.default.Crypto)throw Error("Encryption not enabled; use ably.encryption.js instead");var n=d.default.Crypto.getCipher(t.cipher);t.cipher=n.cipherParams,t.channelCipher=n.cipher}else"cipher"in t&&(/* Don't deactivate an existing cipher unless options
         * has a 'cipher' key that's falsey */t.cipher=void 0,t.channelCipher=null);return t}var g=/** @class */function(e){function t(t,n,r){var o=e.call(this)||this;return a.default.logAction(a.default.LOG_MINOR,"Channel()","started; name = "+n),o.rest=t,o.name=n,o.basePath="/channels/"+encodeURIComponent(n),o.presence=new s.default(o),o.channelOptions=h(r),o}return r.__extends(t,e),t.prototype.setOptions=function(e){this.channelOptions=h(e)},t.prototype.history=function(e,t){/* params and callback are optional; see if params contains the callback */if(a.default.logAction(a.default.LOG_MICRO,"Channel.history()","channel = "+this.name),void 0===t){if("function"==typeof e)t=e,e=null;else{if(this.rest.options.promises)return o.promisify(this,"history",arguments);t=p}}this._history(e,t)},t.prototype._history=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,i=this.rest.http.supportsLinkHeaders?void 0:r,a=o.defaultGetHeaders(n.options,r);n.options.headers&&o.mixin(a,n.options.headers);var s=this.channelOptions;new c.default(n,this.basePath+"/messages",a,i,function(e,t,n){return l.default.fromResponseBody(e,s,n?void 0:r)}).get(e,t)},t.prototype.publish=function(){var e,t,n,r=this,i=arguments.length,a=arguments[0],s=arguments[1],c=arguments[i-1];if("function"!=typeof c){if(this.rest.options.promises)return o.promisify(this,"publish",arguments);c=p}if("string"==typeof a||null===a)/* (name, data, ...) */t=[l.default.fromValues({name:a,data:s})],n=arguments[2];else if(o.isObject(a))t=[l.default.fromValues(a)],n=arguments[1];else if(o.isArray(a))t=l.default.fromValuesArray(a),n=arguments[1];else throw new u.default("The single-argument form of publish() expects a message object or an array of message objects",40013,400);"object"==typeof n&&n||/* No params supplied (so after-message argument is just the callback or undefined) */(n={});var f=this.rest,d=f.options,h=d.useBinaryProtocol?o.Format.msgpack:o.Format.json,g=f.options.idempotentRestPublishing,m=o.defaultPostHeaders(f.options,h);if(d.headers&&o.mixin(m,d.headers),g&&(e=t,o.arrEvery(e,function(e){return!e.id}))){var y=o.randomString(9);o.arrForEach(t,function(e,t){e.id=y+":"+t.toString()})}l.default.encodeArray(t,this.channelOptions,function(e){if(e){c(e);return}/* RSL1i */var o=l.default.getMessagesSize(t),i=d.maxMessageSize;if(o>i){c(new u.default("Maximum size of messages that can be published at once exceeded ( was "+o+" bytes; limit is "+i+" bytes)",40009,400));return}r._publish(l.default.serialize(t,h),m,n,c)})},t.prototype._publish=function(e,t,n,r){f.default.post(this.rest,this.basePath+"/messages",e,t,n,null,r)},t.prototype.status=function(e){if("function"!=typeof e&&this.rest.options.promises)return o.promisify(this,"status",[]);var t=this.rest.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,n=o.defaultPostHeaders(this.rest.options,t);f.default.get(this.rest,this.basePath,n,{},t,e||p)},t}(i.default);t.default=g;/***/},/* 34 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(7)),a=r.__importDefault(n(2)),s=r.__importDefault(n(19)),l=r.__importDefault(n(15));function u(){}var c=/** @class */function(e){function t(t){var n=e.call(this)||this;return n.channel=t,n.basePath=t.basePath+"/presence",n}return r.__extends(t,e),t.prototype.get=function(e,t){/* params and callback are optional; see if params contains the callback */if(a.default.logAction(a.default.LOG_MICRO,"Presence.get()","channel = "+this.channel.name),void 0===t){if("function"==typeof e)t=e,e=null;else{if(this.channel.rest.options.promises)return o.promisify(this,"get",arguments);t=u}}var n=this.channel.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,i=this.channel.rest.http.supportsLinkHeaders?void 0:r,c=o.defaultGetHeaders(n.options,r);n.options.headers&&o.mixin(c,n.options.headers);var f=this.channel.channelOptions;new s.default(n,this.basePath,c,i,function(e,t,n){return l.default.fromResponseBody(e,f,n?void 0:r)}).get(e,t)},t.prototype.history=function(e,t){return a.default.logAction(a.default.LOG_MICRO,"Presence.history()","channel = "+this.channel.name),this._history(e,t)},t.prototype._history=function(e,t){/* params and callback are optional; see if params contains the callback */if(void 0===t){if("function"==typeof e)t=e,e=null;else{if(this.channel.rest.options.promises)return o.promisify(this,"_history",[e]);t=u}}var n=this.channel.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,i=this.channel.rest.http.supportsLinkHeaders?void 0:r,a=o.defaultGetHeaders(n.options,r);n.options.headers&&o.mixin(a,n.options.headers);var c=this.channel.channelOptions;new s.default(n,this.basePath+"/history",a,i,function(e,t,n){return l.default.fromResponseBody(e,c,n?void 0:r)}).get(e,t)},t}(i.default);t.default=c;/***/},/* 35 *//***/function(e,t,n){/* WEBPACK VAR INJECTION */(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.TransportParams=void 0;var r=n(0),o=r.__importDefault(n(10)),i=r.__importStar(n(1)),a=r.__importStar(n(52)),s=r.__importStar(n(8)),l=r.__importDefault(n(3)),u=r.__importDefault(n(7)),c=r.__importDefault(n(36)),f=r.__importDefault(n(2)),d=r.__importDefault(n(37)),p=r.__importStar(n(20)),h=r.__importStar(n(4)),g=r.__importDefault(n(17)),m=r.__importDefault(n(9)),y=r.__importDefault(n(23)),v=r.__importDefault(n(53)),b=r.__importDefault(n(26)),_=r.__importDefault(n(25)),w=function(){var e;return void 0!==l.default.WebStorage&&(null===(e=l.default.WebStorage)||void 0===e?void 0:e.localSupported)},S=function(){var e;return void 0!==l.default.WebStorage&&(null===(e=l.default.WebStorage)||void 0===e?void 0:e.sessionSupported)},k=o.default.Action,C=function(){},O="ably-transport-preference",E="ably-connection-recovery";function R(e){try{return JSON.parse(e)}catch(e){return null}}var A=/** @class */function(){function e(e,t,n,r){this.options=e,this.host=t,this.mode=n,this.connectionKey=r,this.format=e.useBinaryProtocol?i.Format.msgpack:i.Format.json}return e.prototype.getConnectParams=function(e){var t=e?i.copy(e):{},n=this.options;switch(this.mode){case"upgrade":t.upgrade=this.connectionKey;break;case"resume":t.resume=this.connectionKey;break;case"recover":var r=R(n.recover);r&&(t.recover=r.connectionKey)}return void 0!==n.clientId&&(t.clientId=n.clientId),!1===n.echoMessages&&(t.echo="false"),void 0!==this.format&&(t.format=this.format),void 0!==this.stream&&(t.stream=this.stream),void 0!==this.heartbeats&&(t.heartbeats=this.heartbeats),t.v=s.default.protocolVersion,t.agent=encodeURIComponent((0,s.getAgentString)(this.options)),void 0!==n.transportParams&&i.mixin(t,n.transportParams),t},e.prototype.toString=function(){var e="[mode="+this.mode;return this.host&&(e+=",host="+this.host),this.connectionKey&&(e+=",connectionKey="+this.connectionKey),this.format&&(e+=",format="+this.format),e+="]"},e}();t.TransportParams=A;var x=/** @class */function(t){function n(e,r){var o=t.call(this)||this;o.disconnectedRetryCount=0,n.initTransports(),o.realtime=e,o.options=r;var a=r.timeouts,u=a.preferenceConnectTimeout+a.realtimeRequestTimeout;if(o.states={initialized:{state:"initialized",terminal:!1,queueEvents:!0,sendEvents:!1,failState:"disconnected"},connecting:{state:"connecting",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:u,failState:"disconnected"},connected:{state:"connected",terminal:!1,queueEvents:!1,sendEvents:!0,failState:"disconnected"},synchronizing:{state:"connected",terminal:!1,queueEvents:!0,sendEvents:!1,forceQueueEvents:!0,failState:"disconnected"},disconnected:{state:"disconnected",terminal:!1,queueEvents:!0,sendEvents:!1,retryDelay:a.disconnectedRetryTimeout,failState:"disconnected"},suspended:{state:"suspended",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:a.suspendedRetryTimeout,failState:"suspended"},closing:{state:"closing",terminal:!1,queueEvents:!1,sendEvents:!1,retryDelay:a.realtimeRequestTimeout,failState:"closed"},closed:{state:"closed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"closed"},failed:{state:"failed",terminal:!0,queueEvents:!1,sendEvents:!1,failState:"failed"}},o.state=o.states.initialized,o.errorReason=null,o.queuedMessages=new c.default,o.msgSerial=0,o.connectionDetails=void 0,o.connectionId=void 0,o.connectionKey=void 0,o.connectionStateTtl=a.connectionStateTtl,o.maxIdleInterval=null,o.transports=i.intersect(r.transports||s.default.defaultTransports,n.supportedTransports),/* baseTransports selects the leftmost transport in the Defaults.baseTransportOrder list
         * that's both requested and supported. Normally this will be xhr_polling;
         * if xhr isn't supported it will be jsonp. If the user has forced a
         * transport, it'll just be that one. */o.baseTransport=i.intersect(s.default.baseTransportOrder,o.transports)[0],o.upgradeTransports=i.intersect(o.transports,s.default.upgradeTransports),o.transportPreference=null,o.httpHosts=s.default.getHosts(r),o.activeProtocol=null,o.proposedTransports=[],o.pendingTransports=[],o.host=null,o.lastAutoReconnectAttempt=null,o.lastActivity=null,o.forceFallbackHost=!1,o.connectCounter=0,f.default.logAction(f.default.LOG_MINOR,"Realtime.ConnectionManager()","started"),f.default.logAction(f.default.LOG_MICRO,"Realtime.ConnectionManager()","requested transports = ["+(r.transports||s.default.defaultTransports)+"]"),f.default.logAction(f.default.LOG_MICRO,"Realtime.ConnectionManager()","available transports = ["+o.transports+"]"),f.default.logAction(f.default.LOG_MICRO,"Realtime.ConnectionManager()","http hosts = ["+o.httpHosts+"]"),!o.transports.length){var d="no requested transports available";throw f.default.logAction(f.default.LOG_ERROR,"realtime.ConnectionManager()",d),Error(d)}var p=l.default.Config.addEventListener;return p&&(S()&&"function"==typeof r.recover&&/* Usually can't use bind as not supported in IE8, but IE doesn't support sessionStorage, so... */p("beforeunload",o.persistConnection.bind(o)),!0===r.closeOnUnload&&p("beforeunload",function(){f.default.logAction(f.default.LOG_MAJOR,"Realtime.ConnectionManager()","beforeunload event has triggered the connection to close as closeOnUnload is true"),o.requestState({state:"closing"})}),/* Listen for online and offline events */p("online",function(){o.state==o.states.disconnected||o.state==o.states.suspended?(f.default.logAction(f.default.LOG_MINOR,"ConnectionManager caught browser online event","reattempting connection"),o.requestState({state:"connecting"})):o.state==o.states.connecting&&(// RTN20c: if 'online' event recieved while CONNECTING, abandon connection attempt and retry
o.pendingTransports.forEach(function(e){// Detach transport listeners to avoid connection state side effects from calling dispose
e.off()}),o.disconnectAllTransports(),o.startConnect())}),p("offline",function(){o.state==o.states.connected&&(f.default.logAction(f.default.LOG_MINOR,"ConnectionManager caught browser offline event","disconnecting active transport"),// Not sufficient to just go to the 'disconnected' state, want to
// force all transports to reattempt the connection. Will immediately
// retry.
o.disconnectAllTransports())})),o}return r.__extends(n,t),n.initTransports=function(){(0,v.default)(n),i.arrForEach(l.default.Transports,function(e){e(n)})},n.prototype.createTransportParams=function(e,t){return new A(this.options,e,t,this.connectionKey)},n.prototype.getTransportParams=function(e){var t=this;!function(e){if(t.connectionKey){e("resume");return}if("string"==typeof t.options.recover){e("recover");return}var n,r,o=t.options.recover,i=S()&&(null===(r=null===(n=l.default.WebStorage)||void 0===n?void 0:n.getSession)||void 0===r?void 0:r.call(n,E));if(i&&"function"==typeof o){f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.getTransportParams()","Calling clientOptions-provided recover function with last session data"),o(i,function(n){n?(t.options.recover=i.recoveryKey,e("recover")):e("clean")});return}e("clean")}(function(n){var r=t.createTransportParams(null,n);if("recover"===n){f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport recovery mode = recover; recoveryKey = "+t.options.recover);var o=R(t.options.recover);o&&(t.msgSerial=o.msgSerial)}else f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.getTransportParams()","Transport params = "+r.toString());e(r)})},/**
     * Attempt to connect using a given transport
     * @param transportParams
     * @param candidate, the transport to try
     * @param callback
     */n.prototype.tryATransport=function(e,t,r){var o=this;f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.tryATransport()","trying "+t),b.default.tryConnect(n.supportedTransports[t],this,this.realtime.auth,e,function(n,i){var a=o.state;if(a==o.states.closing||a==o.states.closed||a==o.states.failed){i&&(f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.tryATransport()","connection "+a.state+" while we were attempting the transport; closing "+i),i.close()),r(!0);return}if(n){f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.tryATransport()","transport "+t+" "+n.event+", err: "+n.error.toString()),g.default.isTokenErr(n.error)&&!(o.errorReason&&g.default.isTokenErr(o.errorReason))?(o.errorReason=n.error,/* re-get a token and try again */o.realtime.auth._forceNewToken(null,null,function(n){if(n){o.actOnErrorFromAuthorize(n);return}o.tryATransport(e,t,r)})):"failed"===n.event?(/* Error that's fatal to the connection */o.notifyState({state:"failed",error:n.error}),r(!0)):"disconnected"===n.event&&((0,p.isRetriable)(n.error)?/* Error with that transport only; continue trying other fallback hosts */r(!1):(/* Error received from the server that does not call for trying a fallback host, eg a rate limit */o.notifyState({state:o.states.connecting.failState,error:n.error}),r(!0)));return}f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.tryATransport()","viable transport "+t+"; setting pending"),o.setTransportPending(i,e),r(null,i)})},/**
     * Called when a transport is indicated to be viable, and the ConnectionManager
     * expects to activate this transport as soon as it is connected.
     * @param transport
     * @param transportParams
     */n.prototype.setTransportPending=function(e,t){var n=this,r=t.mode;f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.setTransportPending()","transport = "+e+"; mode = "+r),i.arrDeleteValue(this.proposedTransports,e),this.pendingTransports.push(e);var o=l.default.Defaults.transportPreferenceOrder[l.default.Defaults.transportPreferenceOrder.length-1];e.once("connected",function(a,s,u){"upgrade"==r&&n.activeProtocol?e.shortName!==o&&i.arrIn(n.getUpgradePossibilities(),o)&&n.activeProtocol?setTimeout(function(){n.scheduleTransportActivation(a,e,s,u)},n.options.timeouts.parallelUpgradeDelay):n.scheduleTransportActivation(a,e,s,u):(n.activateTransport(a,e,s,u),/* allow connectImpl to start the upgrade process if needed, but allow
                 * other event handlers, including activating the transport, to run first */l.default.Config.nextTick(function(){n.connectImpl(t)})),"recover"===r&&n.options.recover&&(/* After a successful recovery, we unpersist, as a recovery key cannot
                 * be used more than once */n.options.recover=null,n.unpersistConnection())});var a=this;e.on(["disconnected","closed","failed"],function(t){a.deactivateTransport(e,this.event,t)}),this.emit("transport.pending",e)},/**
     * Called when an upgrade transport is connected,
     * to schedule the activation of that transport.
     * @param error
     * @param transport
     * @param connectionId
     * @param connectionDetails
     */n.prototype.scheduleTransportActivation=function(e,t,n,r){var a=this,s=this.activeProtocol&&this.activeProtocol.getTransport(),u=function(){t.disconnect(),i.arrDeleteValue(a.pendingTransports,t)};if(this.state!==this.states.connected&&this.state!==this.states.connecting){/* This is most likely to happen for the delayed XHRs, when XHRs and ws are scheduled in parallel*/f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Current connection state ("+this.state.state+(this.state===this.states.synchronizing?", but with an upgrade already in progress":"")+") is not valid to upgrade in; abandoning upgrade to "+t.shortName),u();return}if(s&&!(i.arrIndexOf(l.default.Defaults.transportPreferenceOrder,t.shortName)>i.arrIndexOf(l.default.Defaults.transportPreferenceOrder,s.shortName))){f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Proposed transport "+t.shortName+" is no better than current active transport "+s.shortName+" - abandoning upgrade"),u();return}f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Scheduling transport upgrade; transport = "+t);var c=null;if(!t.isConnected){/* This is only possible if the xhr streaming transport was disconnected during the parallelUpgradeDelay */f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Proposed transport "+t.shortName+"is no longer connected; abandoning upgrade"),u();return}if(this.state===this.states.connected)f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.scheduleTransportActivation()","Currently connected, so temporarily pausing events until the upgrade is complete"),this.state=this.states.synchronizing,c=this.activeProtocol;else if(this.state!==this.states.connecting){/* Note: upgrading from the connecting state is valid if the old active
             * transport was deactivated after the upgrade transport first connected;
             * see logic in deactivateTransport */f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Current connection state ("+this.state.state+(this.state===this.states.synchronizing?", but with an upgrade already in progress":"")+") is not valid to upgrade in; abandoning upgrade to "+t.shortName),u();return}f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Syncing transport; transport = "+t);var d=function(){f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Activating transport; transport = "+t),// Send ACTIVATE to tell the server to make this transport the
// active transport, which suspends channels until we re-attach.
t.send(o.default.fromValues({action:k.ACTIVATE})),a.activateTransport(e,t,n,r),a.state===a.states.synchronizing?(f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.scheduleTransportActivation()","Pre-upgrade protocol idle, sending queued messages on upgraded transport; transport = "+t),a.state=a.states.connected):f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.scheduleTransportActivation()","Pre-upgrade protocol idle, but state is now "+a.state.state+", so leaving unchanged"),a.state.sendEvents&&a.sendQueuedMessages()};c?/* Most of the time this will be already true: the new-transport sync will have given
             * enough time for in-flight messages on the old transport to complete. */c.onceIdle(d):d()},/**
     * Called when a transport is connected, and the connectionmanager decides that
     * it will now be the active transport. Returns whether or not it activated
     * the transport (if the connection is closing/closed it will choose not to).
     * @param transport the transport instance
     * @param connectionId the id of the new active connection
     * @param connectionDetails the details of the new active connection
     */n.prototype.activateTransport=function(e,t,n,r){var o=this;f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.activateTransport()","transport = "+t),e&&f.default.logAction(f.default.LOG_ERROR,"ConnectionManager.activateTransport()","error = "+e),n&&f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.activateTransport()","connectionId =  "+n),r&&f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.activateTransport()","connectionDetails =  "+JSON.stringify(r)),this.persistTransportPreference(t);/* if the connectionmanager moved to the closing/closed state before this
         * connection event, then we won't activate this transport */var s=this.state,u=this.states.connected.state;if(f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.activateTransport()","current state = "+s.state),s.state==this.states.closing.state||s.state==this.states.closed.state||s.state==this.states.failed.state)return f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.activateTransport()","Disconnecting transport and abandoning"),t.disconnect(),!1;/* if the transport is not connected then don't activate it */if(/* remove this transport from pending transports */i.arrDeleteValue(this.pendingTransports,t),!t.isConnected)return f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.activateTransport()","Declining to activate transport "+t+" since it appears to no longer be connected"),!1;/* the given transport is connected; this will immediately
         * take over as the active transport */var c=this.activeProtocol;this.activeProtocol=new a.default(t),this.host=t.params.host;var p=r.connectionKey;/* Gracefully terminate existing protocol */if(p&&this.connectionKey!=p&&this.setConnection(n,r,!!e),/* Rebroadcast any new connectionDetails from the active transport, which
         * can come at any time (eg following a reauth), and emit an RTN24 UPDATE
         * event. (Listener added on nextTick because we're in a transport.on('connected')
         * callback at the moment; if we add it now we'll be adding it to the end
         * of the listeners array and it'll be called immediately) */this.onConnectionDetailsUpdate(r,t),l.default.Config.nextTick(function(){t.on("connected",function(e,n,r){o.onConnectionDetailsUpdate(r,t),o.emit("update",new d.default(u,u,null,e))})}),s.state===this.states.connected.state?e&&(/* if upgrading without error, leave any existing errorReason alone */this.errorReason=this.realtime.connection.errorReason=e,/* Only bother emitting an upgrade if there's an error; otherwise it's
                 * just a transport upgrade, so auth details won't have changed */this.emit("update",new d.default(u,u,null,e))):(this.notifyState({state:"connected",error:e}),this.errorReason=this.realtime.connection.errorReason=e||null),/* Send after the connection state update, as Channels hooks into this to
         * resend attaches on a new transport if necessary */this.emit("transport.active",t),c){if(c.messageQueue.count()>0&&/* We could just requeue pending messages on the new transport, but
                 * actually this should never happen: transports should only take over
                 * from other active transports when upgrading, and upgrading waits for
                 * the old transport to be idle. So log an error. */f.default.logAction(f.default.LOG_ERROR,"ConnectionManager.activateTransport()","Previous active protocol (for transport "+c.transport.shortName+", new one is "+t.shortName+") finishing with "+c.messageQueue.count()+" messages still pending"),c.transport===t){var h="Assumption violated: activating a transport that was also the transport for the previous active protocol; transport = "+t.shortName+"; stack = "+Error().stack;f.default.logAction(f.default.LOG_ERROR,"ConnectionManager.activateTransport()",h)}else c.finish()}return(/* Terminate any other pending transport(s), and
         * abort any not-yet-pending transport attempts */i.safeArrForEach(this.pendingTransports,function(e){if(e===t){var n="Assumption violated: activating a transport that is still marked as a pending transport; transport = "+t.shortName+"; stack = "+Error().stack;f.default.logAction(f.default.LOG_ERROR,"ConnectionManager.activateTransport()",n),i.arrDeleteValue(o.pendingTransports,t)}else e.disconnect()}),i.safeArrForEach(this.proposedTransports,function(e){e===t?(f.default.logAction(f.default.LOG_ERROR,"ConnectionManager.activateTransport()","Assumption violated: activating a transport that is still marked as a proposed transport; transport = "+t.shortName+"; stack = "+Error().stack),i.arrDeleteValue(o.proposedTransports,t)):e.dispose()}),!0)},/**
     * Called when a transport is no longer the active transport. This can occur
     * in any transport connection state.
     * @param transport
     */n.prototype.deactivateTransport=function(e,t,n){var r=this.activeProtocol,o=r&&r.getTransport()===e,a=i.arrDeleteValue(this.pendingTransports,e),s=i.arrDeleteValue(this.proposedTransports,e),u=this.noTransportsScheduledForActivation();/* this transport state change is a state change for the connectionmanager if
         * - the transport was the active transport and there are no transports
         *   which are connected and scheduled for activation, just waiting for the
         *   active transport to finish what its doing; or
         * - the transport was the active transport and the error was fatal (so
         *   unhealable by another transport); or
         * - there is no active transport, and this is the last remaining
         *   pending transport (so we were in the connecting state)
         */if(f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.deactivateTransport()","transport = "+e),f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.deactivateTransport()","state = "+t+(o?"; was active":a?"; was pending":s?"; was proposed":"")+(u?"":"; another transport is scheduled for activation")),n&&n.message&&f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.deactivateTransport()","reason =  "+n.message),o&&(f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.deactivateTransport()","Getting, clearing, and requeuing "+this.activeProtocol.messageQueue.count()+" pending messages"),this.queuePendingMessages(r.getPendingMessages()),/* Clear any messages we requeue to allow the protocol to become idle.
             * In case of an upgrade, this will trigger an immediate activation of
             * the upgrade transport, so delay a tick so this transport can finish
             * deactivating */l.default.Config.nextTick(function(){r.clearPendingMessages()}),this.activeProtocol=this.host=null),this.emit("transport.inactive",e),o&&u||o&&"failed"===t||"closed"===t||null===r&&a&&0===this.pendingTransports.length){/* If we're disconnected with a 5xx we need to try fallback hosts
             * (RTN14d), but (a) due to how the upgrade sequence works, the
             * host/transport selection sequence only cares about getting to
             * `preconnect` (eg establishing a websocket) getting a `disconnected`
             * protocol message afterwards is too late; and (b) host retry only
             * applies to connectBase unless the stored preference transport doesn't
             * work. We solve this by unpersisting the transport preference and
             * setting an instance variable to force fallback hosts to be used (if
             * any) here. Bit of a kludge, but no real better alternatives without
             * rewriting the entire thing */if("disconnected"===t&&n&&n.statusCode>500&&this.httpHosts.length>1){this.unpersistTransportPreference(),this.forceFallbackHost=!0,/* and try to connect again to try a fallback host without waiting for the usual 15s disconnectedRetryTimeout */this.notifyState({state:t,error:n,retryImmediately:!0});return}/* TODO remove below line once realtime sends token errors as DISCONNECTEDs */var c="failed"===t&&g.default.isTokenErr(n)?"disconnected":t;this.notifyState({state:c,error:n});return}o&&"disconnected"===t&&this.state!==this.states.synchronizing&&(/* If we were active but there is another transport scheduled for
             * activation, go into to the connecting state until that transport
             * activates and sets us back to connected. (manually starting the
             * transition timers in case that never happens). (If we were in the
             * synchronizing state, then that's fine, the old transport just got its
             * disconnected before the new one got the sync -- ignore it and keep
             * waiting for the sync. If it fails we have a separate sync timer that
             * will expire). */f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.deactivateTransport()","wasActive but another transport is connected and scheduled for activation, so going into the connecting state until it activates"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),this.notifyState({state:"connecting",error:n}))},/* Helper that returns true if there are no transports which are pending,
     * have been connected, and are just waiting for onceNoPending to fire before
     * being activated */n.prototype.noTransportsScheduledForActivation=function(){return i.isEmpty(this.pendingTransports)||this.pendingTransports.every(function(e){return!e.isConnected})},n.prototype.setConnection=function(e,t,n){/* if connectionKey changes but connectionId stays the same, then just a
         * transport change on the same connection. If connectionId changes, we're
         * on a new connection, with implications for msgSerial and channel state *//* If no previous connectionId, don't reset the msgSerial as it may have
         * been set by recover data (unless the recover failed) */var r=this.connectionId;(r&&r!==e||!r&&n)&&(f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.setConnection()","Resetting msgSerial"),this.msgSerial=0,// RTN19a2: In the event of a new connectionId, previous msgSerials are
// meaningless.
this.queuedMessages.resetSendAttempted()),this.connectionId!==e&&f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.setConnection()","New connectionId; reattaching any attached channels"),this.realtime.connection.id=this.connectionId=e,this.realtime.connection.key=this.connectionKey=t.connectionKey},n.prototype.clearConnection=function(){this.realtime.connection.id=this.connectionId=void 0,this.realtime.connection.key=this.connectionKey=void 0,this.msgSerial=0,this.unpersistConnection()},n.prototype.createRecoveryKey=function(){return(// RTN16g2.
this.connectionKey?JSON.stringify({connectionKey:this.connectionKey,msgSerial:this.msgSerial,channelSerials:this.realtime.channels.channelSerials()}):null)},n.prototype.checkConnectionStateFreshness=function(){if(this.lastActivity&&this.connectionId){var e=i.now()-this.lastActivity;e>this.connectionStateTtl+this.maxIdleInterval&&(f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.checkConnectionStateFreshness()","Last known activity from realtime was "+e+"ms ago; discarding connection state"),this.clearConnection(),this.states.connecting.failState="suspended")}},/**
     * Called when the connectionmanager wants to persist transport
     * state for later recovery. Only applicable in the browser context.
     */n.prototype.persistConnection=function(){if(S()){var t,n,r,o=this.createRecoveryKey();o&&(t={recoveryKey:o,disconnectedAt:i.now(),location:e.location,clientId:this.realtime.auth.clientId},S()&&(null===(r=null===(n=l.default.WebStorage)||void 0===n?void 0:n.setSession)||void 0===r||r.call(n,E,t)))}},/**
     * Called when the connectionmanager wants to persist transport
     * state for later recovery. Only applicable in the browser context.
     */n.prototype.unpersistConnection=function(){var e,t;S()&&(null===(t=null===(e=l.default.WebStorage)||void 0===e?void 0:e.removeSession)||void 0===t||t.call(e,E))},/*********************
     * state management
     *********************/n.prototype.getError=function(){return this.errorReason||this.getStateError()},n.prototype.getStateError=function(){var e,t;return null===(t=(e=p.default)[this.state.state])||void 0===t?void 0:t.call(e)},n.prototype.activeState=function(){return this.state.queueEvents||this.state.sendEvents},n.prototype.enactStateChange=function(e){var t="failed"===e.current?f.default.LOG_ERROR:f.default.LOG_MAJOR;f.default.logAction(t,"Connection state",e.current+(e.reason?"; reason: "+e.reason:"")),f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.enactStateChange","setting new state: "+e.current+"; reason = "+(e.reason&&e.reason.message));var n=this.state=this.states[e.current];e.reason&&(this.errorReason=e.reason,this.realtime.connection.errorReason=e.reason),(n.terminal||"suspended"===n.state)&&/* suspended is nonterminal, but once in the suspended state, realtime
             * will have discarded our connection state, so futher connection
             * attempts should start from scratch */this.clearConnection(),this.emit("connectionstate",e)},/****************************************
     * ConnectionManager connection lifecycle
     ****************************************/n.prototype.startTransitionTimer=function(e){var t=this;f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.startTransitionTimer()","transitionState: "+e.state),this.transitionTimer&&(f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.startTransitionTimer()","clearing already-running timer"),clearTimeout(this.transitionTimer)),this.transitionTimer=setTimeout(function(){t.transitionTimer&&(t.transitionTimer=null,f.default.logAction(f.default.LOG_MINOR,"ConnectionManager "+e.state+" timer expired","requesting new state: "+e.failState),t.notifyState({state:e.failState}))},e.retryDelay)},n.prototype.cancelTransitionTimer=function(){f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.cancelTransitionTimer()",""),this.transitionTimer&&(clearTimeout(this.transitionTimer),this.transitionTimer=null)},n.prototype.startSuspendTimer=function(){var e=this;this.suspendTimer||(this.suspendTimer=setTimeout(function(){e.suspendTimer&&(e.suspendTimer=null,f.default.logAction(f.default.LOG_MINOR,"ConnectionManager suspend timer expired","requesting new state: suspended"),e.states.connecting.failState="suspended",e.notifyState({state:"suspended"}))},this.connectionStateTtl))},n.prototype.checkSuspendTimer=function(e){"disconnected"!==e&&"suspended"!==e&&"connecting"!==e&&this.cancelSuspendTimer()},n.prototype.cancelSuspendTimer=function(){this.states.connecting.failState="disconnected",this.suspendTimer&&(clearTimeout(this.suspendTimer),this.suspendTimer=null)},n.prototype.startRetryTimer=function(e){var t=this;this.retryTimer=setTimeout(function(){f.default.logAction(f.default.LOG_MINOR,"ConnectionManager retry timer expired","retrying"),t.retryTimer=null,t.requestState({state:"connecting"})},e)},n.prototype.cancelRetryTimer=function(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)},n.prototype.notifyState=function(e){var t,n,r=this,o=e.state,a="disconnected"===o&&(this.state===this.states.connected||this.state===this.states.synchronizing||e.retryImmediately||this.state===this.states.connecting&&e.error&&g.default.isTokenErr(e.error)&&!(this.errorReason&&g.default.isTokenErr(this.errorReason)));/* do nothing if we're already in the indicated state */if(f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.notifyState()","new state: "+o+(a?"; will retry connection immediately":"")),o!=this.state.state&&(/* kill timers (possibly excepting suspend timer depending on the notified
         * state), as these are superseded by this notification */this.cancelTransitionTimer(),this.cancelRetryTimer(),this.checkSuspendTimer(e.state),("suspended"===o||"connected"===o)&&(this.disconnectedRetryCount=0),!this.state.terminal)){/* process new state */var s=this.states[e.state],u=s.retryDelay;"disconnected"===s.state&&(this.disconnectedRetryCount++,u=i.getRetryTime(s.retryDelay,this.disconnectedRetryCount));var c=new d.default(this.state.state,s.state,u,e.error||(null===(n=(t=p.default)[s.state])||void 0===n?void 0:n.call(t)));if(a){var h=function(){r.state===r.states.disconnected&&(r.lastAutoReconnectAttempt=i.now(),r.requestState({state:"connecting"}))},m=this.lastAutoReconnectAttempt&&i.now()-this.lastAutoReconnectAttempt+1;m&&m<1e3?(f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.notifyState()","Last reconnect attempt was only "+m+"ms ago, waiting another "+(1e3-m)+"ms before trying again"),setTimeout(h,1e3-m)):l.default.Config.nextTick(h)}else("disconnected"===o||"suspended"===o)&&this.startRetryTimer(u);("disconnected"===o&&!a||"suspended"===o||s.terminal)&&/* Wait till the next tick so the connection state change is enacted,
             * so aborting transports doesn't trigger redundant state changes */l.default.Config.nextTick(function(){r.disconnectAllTransports()}),"connected"!=o||this.activeProtocol||f.default.logAction(f.default.LOG_ERROR,"ConnectionManager.notifyState()","Broken invariant: attempted to go into connected state, but there is no active protocol"),/* implement the change and notify */this.enactStateChange(c),this.state.sendEvents?this.sendQueuedMessages():this.state.queueEvents||(this.realtime.channels.propogateConnectionInterruption(o,c.reason),this.failQueuedMessages(c.reason))}},n.prototype.requestState=function(e){var t,n,r=this,o=e.state;if(f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.requestState()","requested state: "+o+"; current state: "+this.state.state),o!=this.state.state&&(/* kill running timers, as this request supersedes them */this.cancelTransitionTimer(),this.cancelRetryTimer(),/* for suspend timer check rather than cancel -- eg requesting a connecting
         * state should not reset the suspend timer */this.checkSuspendTimer(o),("connecting"!=o||"connected"!=this.state.state)&&("closing"!=o||"closed"!=this.state.state))){var i=this.states[o],a=new d.default(this.state.state,i.state,null,e.error||(null===(n=(t=p.default)[i.state])||void 0===n?void 0:n.call(t)));this.enactStateChange(a),"connecting"==o&&l.default.Config.nextTick(function(){r.startConnect()}),"closing"==o&&this.closeImpl()}/* silently do nothing */},n.prototype.startConnect=function(){var e=this;if(this.state!==this.states.connecting){f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.startConnect()","Must be in connecting state to connect, but was "+this.state.state);return}var t=this.realtime.auth,n=++this.connectCounter,r=function(){e.checkConnectionStateFreshness(),e.getTransportParams(function(t){if("recover"===t.mode&&t.options.recover){var r=R(t.options.recover);r&&e.realtime.channels.recoverChannels(r.channelSerials)}n===e.connectCounter&&e.connectImpl(t,n)})};if(f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.startConnect()","starting connection"),this.startSuspendTimer(),this.startTransitionTimer(this.states.connecting),"basic"===t.method)r();else{var o=function(t){n===e.connectCounter&&(t?e.actOnErrorFromAuthorize(t):r())};this.errorReason&&g.default.isTokenErr(this.errorReason)?/* Force a refetch of a new token */t._forceNewToken(null,null,o):t._ensureValidAuthCredentials(!1,o)}},/**
     * There are three stages in connecting:
     * - preference: if there is a cached transport preference, we try to connect
     *   on that. If that fails or times out we abort the attempt, remove the
     *   preference and fall back to base. If it succeeds, we try upgrading it if
     *   needed (will only be in the case where the preference is xhrs and the
     *   browser supports ws).
     * - base: we try to connect with the best transport that we think will
     *   never fail for this browser (usually this is xhr_polling; for very old
     *   browsers will be jsonp, for node will be comet). If it doesn't work, we
     *   try fallback hosts.
     * - upgrade: given a connected transport, we see if there are any better
     *   ones, and if so, try to upgrade to them.
     *
     * connectImpl works out what stage you're at (which is purely a function of
     * the current connection state and whether there are any stored preferences),
     * and dispatches accordingly. After a transport has been set pending,
     * tryATransport calls connectImpl to see if there's another stage to be done.
     * */n.prototype.connectImpl=function(e,t){var n=this.state.state;n!==this.states.connecting.state&&n!==this.states.connected.state?/* Only keep trying as long as in the 'connecting' state (or 'connected'
             * for upgrading). Any operation can put us into 'disconnected' to cancel
             * connection attempts and wait before retrying, or 'failed' to fail. */f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.connectImpl()","Must be in connecting state to connect (or connected to upgrade), but was "+n):this.pendingTransports.length?f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.connectImpl()","Transports "+this.pendingTransports[0].toString()+" currently pending; taking no action"):n==this.states.connected.state?this.upgradeIfNeeded(e):this.transports.length>1&&this.getTransportPreference()?this.connectPreference(e,t):this.connectBase(e,t)},n.prototype.connectPreference=function(e,t){var n=this,r=this.getTransportPreference(),o=!1;i.arrIn(this.transports,r)||(this.unpersistTransportPreference(),this.connectImpl(e,t)),f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.connectPreference()","Trying to connect with stored transport preference "+r);var a=setTimeout(function(){o=!0,n.state.state!==n.states.connected.state&&(f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.connectPreference()","Shortcircuit connection attempt with "+r+" failed; clearing preference and trying from scratch"),/* Abort all connection attempts. (This also disconnects the active
                 * protocol, but none exists if we're not in the connected state) */n.disconnectAllTransports(),/* Be quite agressive about clearing the stored preference if ever it doesn't work */n.unpersistTransportPreference()),n.connectImpl(e,t)},this.options.timeouts.preferenceConnectTimeout);/* For connectPreference, just use the main host. If host fallback is needed, do it in connectBase.
         * The wstransport it will substitute the httphost for an appropriate wshost */e.host=this.httpHosts[0],this.tryATransport(e,r,function(r,s){clearTimeout(a),o&&s?(/* Viable, but too late - connectImpl() will already be trying
                 * connectBase, and we weren't in upgrade mode. Just remove the
                 * onconnected listener and get rid of it */s.off(),s.disconnect(),i.arrDeleteValue(n.pendingTransports,s)):s||r||(/* Preference failed in a transport-specific way. Try more */n.unpersistTransportPreference(),n.connectImpl(e,t));/* If suceeded, or failed fatally, nothing to do */})},/**
     * Try to establish a transport on the base transport (the best transport
     * such that if it doesn't work, nothing will work) as determined through
     * static feature detection, checking for network connectivity and trying
     * fallback hosts if applicable.
     * @param transportParams
     */n.prototype.connectBase=function(e,t){var n=this,r=function(e){n.notifyState({state:n.states.connecting.failState,error:e})},o=this.httpHosts.slice(),a=function(e,r){t!==n.connectCounter||r||e||l()};f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.connectBase()","Trying to connect with base transport "+this.baseTransport);/* first try to establish a connection with the priority host with http transport */var s=o.shift();if(!s){r(new h.default("Unable to connect (no available host)",80003,404));return}e.host=s;/* this is what we'll be doing if the attempt for the main host fails */var l=function(){/* if there aren't any fallback hosts, fail */if(!o.length){r(new h.default("Unable to connect (and no more fallback hosts to try)",80003,404));return}/* before trying any fallback (or any remaining fallback) we decide if
             * there is a problem with the ably host, or there is a general connectivity
             * problem */if(!n.realtime.http.checkConnectivity){r(new h.PartialErrorInfo("Internal error: Http.checkConnectivity not set",null,500));return}n.realtime.http.checkConnectivity(function(s,l){if(t===n.connectCounter){/* we know err won't happen but handle it here anyway */if(s){r(s);return}if(!l){/* the internet isn't reachable, so don't try the fallback hosts */r(new h.default("Unable to connect (network unreachable)",80003,404));return}/* the network is there, so there's a problem with the main host, or
                 * its dns. Try the fallback hosts. We could try them simultaneously but
                 * that would potentially cause a huge spike in load on the load balancer */e.host=i.arrPopRandomElement(o),n.tryATransport(e,n.baseTransport,a)}})};if(this.forceFallbackHost&&o.length){this.forceFallbackHost=!1,l();return}this.tryATransport(e,this.baseTransport,a)},n.prototype.getUpgradePossibilities=function(){/* returns the subset of upgradeTransports to the right of the current
         * transport in upgradeTransports (if it's in there - if not, currentSerial
         * will be -1, so return upgradeTransports.slice(0) == upgradeTransports */var e=this.activeProtocol.getTransport().shortName,t=i.arrIndexOf(this.upgradeTransports,e);return this.upgradeTransports.slice(t+1)},n.prototype.upgradeIfNeeded=function(e){var t=this,n=this.getUpgradePossibilities();f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.upgradeIfNeeded()","upgrade possibilities: "+l.default.Config.inspect(n)),n.length&&i.arrForEach(n,function(n){/* Note: the transport may mutate the params, so give each transport a fresh one */var r=t.createTransportParams(e.host,"upgrade");t.tryATransport(r,n,C)})},n.prototype.closeImpl=function(){f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.closeImpl()","closing connection"),this.cancelSuspendTimer(),this.startTransitionTimer(this.states.closing),i.safeArrForEach(this.pendingTransports,function(e){f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.closeImpl()","Closing pending transport: "+e),e&&e.close()}),i.safeArrForEach(this.proposedTransports,function(e){f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.closeImpl()","Disposing of proposed transport: "+e),e&&e.dispose()}),this.activeProtocol&&(f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.closeImpl()","Closing active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().close()),/* If there was an active transport, this will probably be
         * preempted by the notifyState call in deactivateTransport */this.notifyState({state:"closed"})},n.prototype.onAuthUpdated=function(e,t){var n,r=this;switch(this.state.state){case"connected":/* If there are any proposed/pending transports (eg an upgrade that
                 * isn't yet scheduled for activation) that hasn't yet started syncing,
                 * just to get rid of them & restart the upgrade with the new token, to
                 * avoid a race condition. (If it has started syncing, the AUTH will be
                 * queued until the upgrade is complete, so everything's fine) */if(f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Sending AUTH message on active transport"),(this.pendingTransports.length||this.proposedTransports.length)&&this.state!==this.states.synchronizing){this.disconnectAllTransports(/* exceptActive: */!0);var i=this.activeProtocol.getTransport().params;l.default.Config.nextTick(function(){"connected"===r.state.state&&r.upgradeIfNeeded(i)})}/* Do any transport-specific new-token action */var a=null===(n=this.activeProtocol)||void 0===n?void 0:n.getTransport();a&&a.onAuthUpdated&&a.onAuthUpdated(e);var s=o.default.fromValues({action:k.AUTH,auth:{accessToken:e.token}});this.send(s);/* The answer will come back as either a connectiondetails event
                 * (realtime sends a CONNECTED to acknowledge the reauth) or a
                 * statechange to failed */var u=function(){r.off(c),t(null,e)},c=function(e){"failed"===e.current&&(r.off(u),r.off(c),t(e.reason||r.getStateError()))};this.once("connectiondetails",u),this.on("connectionstate",c);break;case"connecting":f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Aborting current connection attempts in order to start again with the new auth details"),this.disconnectAllTransports();/* fallthrough to add statechange listener */default:f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.onAuthUpdated()","Connection state is "+this.state.state+"; waiting until either connected or failed");var d=function(n){switch(n.current){case"connected":r.off(d),t(null,e);break;case"failed":case"closed":case"suspended":r.off(d),t(n.reason||r.getStateError())}};this.on("connectionstate",d),"connecting"===this.state.state?/* can happen if in the connecting state but no transport was pending
                     * yet, so disconnectAllTransports did not trigger a disconnected state */this.startConnect():this.requestState({state:"connecting"})}},n.prototype.disconnectAllTransports=function(e){f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.disconnectAllTransports()","Disconnecting all transports"+(e?" except the active transport":"")),/* This will prevent any connection procedure in an async part of one of its early stages from continuing */this.connectCounter++,i.safeArrForEach(this.pendingTransports,function(e){f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting pending transport: "+e),e&&e.disconnect()}),this.pendingTransports=[],i.safeArrForEach(this.proposedTransports,function(e){f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disposing of proposed transport: "+e),e&&e.dispose()}),this.proposedTransports=[],this.activeProtocol&&!e&&(f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.disconnectAllTransports()","Disconnecting active transport: "+this.activeProtocol.getTransport()),this.activeProtocol.getTransport().disconnect());/* No need to notify state disconnected; disconnecting the active transport
         * will have that effect */},/******************
     * event queueing
     ******************/n.prototype.send=function(e,t,n){n=n||C;var r=this.state;if(r.sendEvents){f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.send()","sending event"),this.sendImpl(new a.PendingMessage(e,n));return}if(!(t&&r.queueEvents||r.forceQueueEvents)){var i="rejecting event, queueEvent was "+t+", state was "+r.state;f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.send()",i),n(this.errorReason||new h.default(i,9e4,400));return}f.default.shouldLog(f.default.LOG_MICRO)&&f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.send()","queueing msg; "+o.default.stringify(e)),this.queue(e,n)},n.prototype.sendImpl=function(e){var t=e.message;e.ackRequired&&!e.sendAttempted&&(t.msgSerial=this.msgSerial++);try{this.activeProtocol.send(e)}catch(e){f.default.logAction(f.default.LOG_ERROR,"ConnectionManager.sendImpl()","Unexpected exception in transport.send(): "+e.stack)}},n.prototype.queue=function(e,t){f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.queue()","queueing event");var n=this.queuedMessages.last(),r=this.options.maxMessageSize;n&&!n.sendAttempted&&function(e,t,n){if(e.channel!==t.channel||(r=e.action)!==k.PRESENCE&&r!==k.MESSAGE||r!==t.action)/* RTL6d3 */return!1;var r,o=r===k.PRESENCE?"presence":"messages",a=e[o].concat(t[o]);return!!(!(m.default.getMessagesSize(a)>n)&&i.allSame(a,"clientId")&&i.arrEvery(a,function(e){return!e.id}))&&(/* we're good to go! */e[o]=a,!0)}(n.message,e,r)?(n.merged||(n.callback=y.default.create([n.callback]),n.merged=!0),n.callback.push(t)):this.queuedMessages.push(new a.PendingMessage(e,t))},n.prototype.sendQueuedMessages=function(){var e;for(f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.sendQueuedMessages()","sending "+this.queuedMessages.count()+" queued messages");e=this.queuedMessages.shift();)this.sendImpl(e)},n.prototype.queuePendingMessages=function(e){e&&e.length&&(f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.queuePendingMessages()","queueing "+e.length+" pending messages"),this.queuedMessages.prepend(e))},n.prototype.failQueuedMessages=function(e){var t=this.queuedMessages.count();t>0&&(f.default.logAction(f.default.LOG_ERROR,"ConnectionManager.failQueuedMessages()","failing "+t+" queued messages, err = "+i.inspectError(e)),this.queuedMessages.completeAllMessages(e))},n.prototype.onChannelMessage=function(e,t){var n=this.activeProtocol&&t===this.activeProtocol.getTransport(),r=i.arrIn(this.pendingTransports,t)&&this.state==this.states.synchronizing;n||r?this.realtime.channels.onChannelMessage(e):i.arrIndexOf([k.ACK,k.NACK,k.ERROR],e.action)>-1?this.realtime.channels.onChannelMessage(e):f.default.logAction(f.default.LOG_MICRO,"ConnectionManager.onChannelMessage()","received message "+JSON.stringify(e)+"on defunct transport; discarding")},n.prototype.ping=function(e,t){var n=this;/* if transport is specified, try that */if(e){f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.ping()","transport = "+e);var r=i.now(),o=i.cheapRandStr(),a=function(n){n===o&&(e.off("heartbeat",a),clearTimeout(s),t(null,i.now()-r))},s=setTimeout(function(){e.off("heartbeat",a),t(new h.default("Timeout waiting for heartbeat response",5e4,500))},this.options.timeouts.realtimeRequestTimeout);e.on("heartbeat",a),e.ping(o);return}/* if we're not connected, don't attempt */if("connected"!==this.state.state){t(new h.default("Unable to ping service; not connected",4e4,400));return}/* no transport was specified, so use the current (connected) one
         * but ensure that we retry if the transport is superseded before we complete */var u=!1,c=function(){u||(/* ensure that no callback happens for the currently outstanding operation */u=!0,/* repeat but picking up the new transport */l.default.Config.nextTick(function(){n.ping(null,t)}))};this.on("transport.active",c),this.ping(this.activeProtocol.getTransport(),function(e,r){n.off("transport.active",c),u||(u=!0,t(e,r))})},n.prototype.abort=function(e){this.activeProtocol.getTransport().fail(e)},n.prototype.registerProposedTransport=function(e){this.proposedTransports.push(e)},n.prototype.getTransportPreference=function(){var e,t;return this.transportPreference||w()&&(null===(t=null===(e=l.default.WebStorage)||void 0===e?void 0:e.get)||void 0===t?void 0:t.call(e,O))},n.prototype.persistTransportPreference=function(e){var t,n;i.arrIn(s.default.upgradeTransports,e.shortName)&&(this.transportPreference=e.shortName,w()&&(null===(n=null===(t=l.default.WebStorage)||void 0===t?void 0:t.set)||void 0===n||n.call(t,O,e.shortName)))},n.prototype.unpersistTransportPreference=function(){var e,t;this.transportPreference=null,w()&&(null===(t=null===(e=l.default.WebStorage)||void 0===e?void 0:e.remove)||void 0===t||t.call(e,O))},/* This method is only used during connection attempts, so implements RSA4c1, RSA4c2,
     * and RSA4d. It is generally not invoked for serverside-triggered reauths or manual
     * reauths, so RSA4c3 does not apply, except (per per RSA4d1) in the case that the auth
     * server returns 403. */n.prototype.actOnErrorFromAuthorize=function(e){if(40171===e.code)/* No way to reauth */this.notifyState({state:"failed",error:e});else if(40102===e.code)this.notifyState({state:"failed",error:e});else if(e.statusCode===_.default.Forbidden){var t="Client configured authentication provider returned 403; failing the connection";f.default.logAction(f.default.LOG_ERROR,"ConnectionManager.actOnErrorFromAuthorize()",t),this.notifyState({state:"failed",error:new h.default(t,80019,403,e)})}else{var t="Client configured authentication provider request failed";f.default.logAction(f.default.LOG_MINOR,"ConnectionManager.actOnErrorFromAuthorize",t),this.notifyState({state:this.state.failState,error:new h.default(t,80019,401,e)})}},n.prototype.onConnectionDetailsUpdate=function(e,t){if(e){this.connectionDetails=e,e.maxMessageSize&&(this.options.maxMessageSize=e.maxMessageSize);var n=e.clientId;if(n){var r=this.realtime.auth._uncheckedSetClientId(n);if(r){f.default.logAction(f.default.LOG_ERROR,"ConnectionManager.onConnectionDetailsUpdate()",r.message),/* Errors setting the clientId are fatal to the connection */t.fail(r);return}}var o=e.connectionStateTtl;o&&(this.connectionStateTtl=o),this.maxIdleInterval=e.maxIdleInterval,this.emit("connectiondetails",e)}},/*********************
     * transport management
     *********************/n.supportedTransports={},n}(u.default);t.default=x;/* WEBPACK VAR INJECTION */}).call(this,n(13));/***/},/* 36 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(7)),i=r.__importDefault(n(2)),a=/** @class */function(e){function t(){var t=e.call(this)||this;return t.messages=[],t}return r.__extends(t,e),t.prototype.count=function(){return this.messages.length},t.prototype.push=function(e){this.messages.push(e)},t.prototype.shift=function(){return this.messages.shift()},t.prototype.last=function(){return this.messages[this.messages.length-1]},t.prototype.copyAll=function(){return this.messages.slice()},t.prototype.append=function(e){this.messages.push.apply(this.messages,e)},t.prototype.prepend=function(e){this.messages.unshift.apply(this.messages,e)},t.prototype.completeMessages=function(e,t,n){i.default.logAction(i.default.LOG_MICRO,"MessageQueue.completeMessages()","serial = "+e+"; count = "+t),n=n||null;var r=this.messages;if(0===r.length)throw Error("MessageQueue.completeMessages(): completeMessages called on any empty MessageQueue");var o=r[0];if(o){var a=o.message.msgSerial,s=e+t;if(s>a)for(var l=r.splice(0,s-a),u=0;u<l.length;u++)l[u].callback(n);0==r.length&&this.emit("idle")}},t.prototype.completeAllMessages=function(e){this.completeMessages(0,Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,e)},t.prototype.resetSendAttempted=function(){for(var e=0,t=this.messages;e<t.length;e++)t[e].sendAttempted=!1},t.prototype.clear=function(){i.default.logAction(i.default.LOG_MICRO,"MessageQueue.clear()","clearing "+this.messages.length+" messages"),this.messages=[],this.emit("idle")},t}(o.default);t.default=a;/***/},/* 37 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){this.previous=e,this.current=t,n&&(this.retryIn=n),r&&(this.reason=r)};/***/},/* 38 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(10)),i=r.__importDefault(n(7)),a=r.__importStar(n(1)),s=r.__importDefault(n(33)),l=r.__importDefault(n(2)),u=r.__importDefault(n(54)),c=r.__importDefault(n(9)),f=r.__importDefault(n(39)),d=r.__importStar(n(4)),p=r.__importDefault(n(15)),h=r.__importDefault(n(20)),g=o.default.Action,m=function(){},y=/** @class */function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;return o.retryCount=0,o.history=function(e,t){/* params and callback are optional; see if params contains the callback */if(l.default.logAction(l.default.LOG_MICRO,"RealtimeChannel.history()","channel = "+this.name),void 0===t){if("function"==typeof e)t=e,e=null;else{if(this.rest.options.promises)return a.promisify(this,"history",arguments);t=m}}if(e&&e.untilAttach){if("attached"!==this.state){t(new d.default("option untilAttach requires the channel to be attached",4e4,400));return}if(!this.properties.attachSerial){t(new d.default("untilAttach was specified and channel is attached, but attachSerial is not defined",4e4,400));return}delete e.untilAttach,e.from_serial=this.properties.attachSerial}s.default.prototype._history.call(this,e,t)},o.whenState=function(e,t){return i.default.prototype.whenState.call(o,e,o.state,t)},l.default.logAction(l.default.LOG_MINOR,"RealtimeChannel()","started; name = "+n),o.realtime=t,o.presence=new u.default(o),o.connectionManager=t.connection.connectionManager,o.state="initialized",o.subscriptions=new i.default,o.syncChannelSerial=void 0,o.properties={attachSerial:void 0,channelSerial:void 0},o.setOptions(r),o.errorReason=null,o._requestedFlags=null,o._mode=null,o._attachResume=!1,o._decodingContext={channelOptions:o.channelOptions,plugins:t.options.plugins||{},baseEncodedPreviousPayload:void 0},o._lastPayload={messageId:null,protocolMessageChannelSerial:null,decodeFailureRecoveryInProgress:null},/* Only differences between this and the public event emitter is that this emits an
         * update event for all ATTACHEDs, whether resumed or not */o._allChannelChanges=new i.default,o}return r.__extends(t,e),t.prototype.invalidStateError=function(){return new d.default("Channel operation failed as channel state is "+this.state,90001,400,this.errorReason||void 0)},t.processListenerArgs=function(e){return"function"==typeof/* [event], listener, [callback] */(e=Array.prototype.slice.call(e))[0]&&e.unshift(null),void 0==e[e.length-1]&&e.pop(),e},t.prototype.setOptions=function(e,t){if(!t&&this.rest.options.promises)return a.promisify(this,"setOptions",arguments);var n=t||function(e){e&&l.default.logAction(l.default.LOG_ERROR,"RealtimeChannel.setOptions()","Set options failed: "+e.toString())},r=function(e){if(e&&"params"in e&&!a.isObject(e.params))return new d.default("options.params must be an object",4e4,400);if(e&&"modes"in e){if(!a.isArray(e.modes))return new d.default("options.modes must be an array",4e4,400);for(var t=0;t<e.modes.length;t++){var n=e.modes[t];if(!n||"string"!=typeof n||!a.arrIn(o.default.channelModes,String.prototype.toUpperCase.call(n)))return new d.default("Invalid channel mode: "+n,4e4,400)}}}(e);if(r){n(r);return}s.default.prototype.setOptions.call(this,e),this._decodingContext&&(this._decodingContext.channelOptions=this.channelOptions),this._shouldReattachToSetOptions(e)?(/* This does not just do _attach(true, null, callback) because that would put us
             * into the 'attaching' state until we receive the new attached, which is
             * conceptually incorrect: we are still attached, we just have a pending request to
             * change some channel params. Per RTL17 going into the attaching state would mean
             * rejecting messages until we have confirmation that the options have changed,
             * which would unnecessarily lose message continuity. */this.attachImpl(),// Ignore 'attaching' -- could be just due to to a resume & reattach, should not
// call back setOptions until we're definitely attached with the new options (or
// else in a terminal state)
this._allChannelChanges.once(["attached","update","detached","failed"],function(e){switch(this.event){case"update":case"attached":null==n||n(null);return;default:null==n||n(e.reason);return}})):n()},t.prototype._shouldReattachToSetOptions=function(e){return("attached"===this.state||"attaching"===this.state)&&((null==e?void 0:e.params)||(null==e?void 0:e.modes))},t.prototype.publish=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],o=t.length,i=t[o-1];if("function"!=typeof i){if(this.realtime.options.promises)return a.promisify(this,"publish",arguments);i=m,++o}if(!this.connectionManager.activeState()){i(this.connectionManager.getError());return}if(2==o){if(a.isObject(r))r=[c.default.fromValues(r)];else if(a.isArray(r))r=c.default.fromValuesArray(r);else throw new d.default("The single-argument form of publish() expects a message object or an array of message objects",40013,400)}else r=[c.default.fromValues({name:t[0],data:t[1]})];var s=this.realtime.options.maxMessageSize;c.default.encodeArray(r,this.channelOptions,function(t){if(t){i(t);return}/* RSL1i */var n=c.default.getMessagesSize(r);if(n>s){i(new d.default("Maximum size of messages that can be published at once exceeded ( was "+n+" bytes; limit is "+s+" bytes)",40009,400));return}e.__publish(r,i)})},// Double underscore used to prevent type conflict with underlying Channel._publish method
t.prototype.__publish=function(e,t){l.default.logAction(l.default.LOG_MICRO,"RealtimeChannel.publish()","message count = "+e.length);var n=this.state;switch(n){case"failed":case"suspended":t(d.default.fromValues(this.invalidStateError()));break;default:l.default.logAction(l.default.LOG_MICRO,"RealtimeChannel.publish()","sending message; channel state is "+n);var r=new o.default;r.action=g.MESSAGE,r.channel=this.name,r.messages=e,this.sendMessage(r,t)}},t.prototype.onEvent=function(e){l.default.logAction(l.default.LOG_MICRO,"RealtimeChannel.onEvent()","received message");for(var t=this.subscriptions,n=0;n<e.length;n++){var r=e[n];t.emit(r.name,r)}},t.prototype.attach=function(e,t){var n;if("function"==typeof e?(t=e,n=null):n=e,!t){if(this.realtime.options.promises)return a.promisify(this,"attach",arguments);t=function(e){e&&l.default.logAction(l.default.LOG_MAJOR,"RealtimeChannel.attach()","Channel attach failed: "+e.toString())}}if(n)l.default.deprecated("channel.attach() with flags","channel.setOptions() with channelOptions.params"),/* If flags requested, always do a re-attach. TODO only do this if
             * current mode differs from requested mode */this._requestedFlags=n;else if("attached"===this.state){t(null,null);return}this._attach(!1,null,t)},t.prototype._attach=function(e,t,n){n||(n=function(e){e&&l.default.logAction(l.default.LOG_ERROR,"RealtimeChannel._attach()","Channel attach failed: "+e.toString())});var r=this.connectionManager;if(!r.activeState()){n(r.getError());return}("attaching"!==this.state||e)&&this.requestState("attaching",t),this.once(function(e){switch(this.event){case"attached":null==n||n(null,e);break;case"detached":case"suspended":case"failed":null==n||n(e.reason||r.getError()||new d.default("Unable to attach; reason unknown; state = "+this.event,9e4,500));break;case"detaching":null==n||n(new d.default("Attach request superseded by a subsequent detach request",9e4,409))}})},t.prototype.attachImpl=function(){l.default.logAction(l.default.LOG_MICRO,"RealtimeChannel.attachImpl()","sending ATTACH message");var e=o.default.fromValues({action:g.ATTACH,channel:this.name,params:this.channelOptions.params,// RTL4c1: Includes the channel serial to resume from a previous message
// or attachment.
channelSerial:this.properties.channelSerial});this._requestedFlags?e.encodeModesToFlags(this._requestedFlags):this.channelOptions.modes&&e.encodeModesToFlags(a.allToUpperCase(this.channelOptions.modes)),this._attachResume&&e.setFlag("ATTACH_RESUME"),this._lastPayload.decodeFailureRecoveryInProgress&&(e.channelSerial=this._lastPayload.protocolMessageChannelSerial),this.sendMessage(e,m)},t.prototype.detach=function(e){if(!e){if(this.realtime.options.promises)return a.promisify(this,"detach",arguments);e=m}var t=this.connectionManager;if(!t.activeState()){e(t.getError());return}switch(this.state){case"suspended":this.notifyState("detached"),e();break;case"detached":e();break;case"failed":e(new d.default("Unable to detach; channel state = failed",90001,400));break;default:this.requestState("detaching");// eslint-disable-next-line no-fallthrough
case"detaching":this.once(function(n){switch(this.event){case"detached":e();break;case"attached":case"suspended":case"failed":e(n.reason||t.getError()||new d.default("Unable to detach; reason unknown; state = "+this.event,9e4,500));break;case"attaching":e(new d.default("Detach request superseded by a subsequent attach request",9e4,409))}})}},t.prototype.detachImpl=function(e){l.default.logAction(l.default.LOG_MICRO,"RealtimeChannel.detach()","sending DETACH message");var t=o.default.fromValues({action:g.DETACH,channel:this.name});this.sendMessage(t,e||m)},t.prototype.subscribe=function(){for(var e=[],n=0/* [event], listener, [callback] */;n<arguments.length/* [event], listener, [callback] */;n++)e[n]=arguments[n];/* [event], listener, [callback] */var r=t.processListenerArgs(e),o=r[0],i=r[1],s=r[2];/* [event], listener, [callback] */if(!s&&this.realtime.options.promises)return a.promisify(this,"subscribe",[o,i]);if("failed"===this.state){null==s||s(d.default.fromValues(this.invalidStateError()));return}return o&&"object"==typeof o&&!Array.isArray(o)?this._subscribeFilter(o,i):this.subscriptions.on(o,i),this.attach(s||m)},t.prototype._subscribeFilter=function(e,t){var n=function(n){var r,o,i,a,s,l,u={name:n.name,refTimeserial:null===(o=null===(r=n.extras)||void 0===r?void 0:r.ref)||void 0===o?void 0:o.timeserial,refType:null===(a=null===(i=n.extras)||void 0===i?void 0:i.ref)||void 0===a?void 0:a.type,isRef:!!(null===(l=null===(s=n.extras)||void 0===s?void 0:s.ref)||void 0===l?void 0:l.timeserial),clientId:n.clientId};Object.entries(e).find(function(e){var t=e[0],n=e[1];return void 0!==n&&u[t]!==n})||t(n)};this._addFilteredSubscription(e,t,n),this.subscriptions.on(n)},// Adds a new filtered subscription
t.prototype._addFilteredSubscription=function(e,t,n){var r;if(this.filteredSubscriptions||(this.filteredSubscriptions=new Map),this.filteredSubscriptions.has(t)){var o=this.filteredSubscriptions.get(t);// Add the filtered listener to the map, or append to the array if this filter has already been used
o.set(e,(null===(r=null==o?void 0:o.get(e))||void 0===r?void 0:r.concat(n))||[n])}else this.filteredSubscriptions.set(t,new Map([[e,[n]]]))},t.prototype._getAndDeleteFilteredSubscriptions=function(e,t){var n=this;// No filtered subscriptions map means there has been no filtered subscriptions yet, so return nothing
if(!this.filteredSubscriptions)return[];// Only a filter is passed in with no specific listener
if(!t&&e)return Array.from(this.filteredSubscriptions.entries()).map(function(t){var r,o=t[0],i=t[1],a=i.get(e);return i.delete(e),0===i.size&&(null===(r=n.filteredSubscriptions)||void 0===r||r.delete(o)),a}).reduce(function(e,t){return t?e.concat.apply(e,t):e},[]);// No subscriptions for this listener
if(!t||!this.filteredSubscriptions.has(t))return[];var r=this.filteredSubscriptions.get(t);// If no filter is specified return all listeners using that function
if(!e){// array.flat is not available unless we support es2019 or higher
var o=Array.from(r.values()).reduce(function(e,t){return e.concat.apply(e,t)},[]);return(// remove the listener from the map
this.filteredSubscriptions.delete(t),o)}var i=r.get(e);return r.delete(e),i||[]},t.prototype.unsubscribe=function(){for(var e,n=this,r=[],o=0/* [event], listener */;o<arguments.length/* [event], listener */;o++)r[o]=arguments[o];/* [event], listener */var i=t.processListenerArgs(r),a=i[0],s=i[1];// If we either have a filtered listener, a filter or both we need to do additional processing to find the original function(s)
if("object"==typeof a&&!s||(null===(e=this.filteredSubscriptions)||void 0===e?void 0:e.has(s))){this._getAndDeleteFilteredSubscriptions(a,s).forEach(function(e){return n.subscriptions.off(e)});return}this.subscriptions.off(a,s)},t.prototype.sync=function(){/* check preconditions */switch(this.state){case"initialized":case"detaching":case"detached":throw new d.PartialErrorInfo("Unable to sync to channel; not attached",4e4)}var e=this.connectionManager;if(!e.activeState())throw e.getError();/* send sync request */var t=o.default.fromValues({action:g.SYNC,channel:this.name});this.syncChannelSerial&&(t.channelSerial=this.syncChannelSerial),e.send(t)},t.prototype.sendMessage=function(e,t){this.connectionManager.send(e,this.realtime.options.queueMessages,t)},t.prototype.sendPresence=function(e,t){var n=o.default.fromValues({action:g.PRESENCE,channel:this.name,presence:a.isArray(e)?p.default.fromValuesArray(e):[p.default.fromValues(e)]});this.sendMessage(n,t)},t.prototype.onMessage=function(e){(e.action===g.ATTACHED||e.action===g.MESSAGE||e.action===g.PRESENCE)&&this.setChannelSerial(e.channelSerial);var t,n=!1;switch(e.action){case g.ATTACHED:this.properties.attachSerial=e.channelSerial,this._mode=e.getMode(),this.params=e.params||{};var r=e.decodeModesFromFlags();this.modes=r&&a.allToLowerCase(r)||void 0;var o=e.hasFlag("RESUMED"),i=e.hasFlag("HAS_PRESENCE"),s=e.hasFlag("HAS_BACKLOG");if("attached"===this.state){o||/* On a loss of continuity, the presence set needs to be re-synced */this.presence.onAttached(i);var u=new f.default(this.state,this.state,o,s,e.error);this._allChannelChanges.emit("update",u),(!o||this.channelOptions.updateOnAttached)&&this.emit("update",u)}else"detaching"===this.state?/* RTL5i: re-send DETACH and remain in the 'detaching' state */this.checkPendingState():this.notifyState("attached",e.error,o,i,s);break;case g.DETACHED:var m=e.error?d.default.fromValues(e.error):new d.default("Channel detached",90001,404);"detaching"===this.state?this.notifyState("detached",m):"attaching"===this.state?/* Only retry immediately if we were previously attached. If we were
                     * attaching, go into suspended, fail messages, and wait a few seconds
                     * before retrying */this.notifyState("suspended",m):this.requestState("attaching",m);break;case g.SYNC:/* syncs can happen on channels with no presence data as part of connection
                 * resuming, in which case protocol message has no presence property */if(/* syncs can have channelSerials, but might not if the sync is one page long */n=!0,t=this.syncChannelSerial=e.channelSerial,!e.presence)break;// eslint-disable-next-line no-fallthrough
case g.PRESENCE:for(var y=e.presence,v=e.id,b=e.connectionId,_=e.timestamp,w=this.channelOptions,S=void 0,k=0;k<y.length;k++)try{S=y[k],p.default.decode(S,w),S.connectionId||(S.connectionId=b),S.timestamp||(S.timestamp=_),S.id||(S.id=v+":"+k)}catch(e){l.default.logAction(l.default.LOG_ERROR,"RealtimeChannel.onMessage()",e.toString())}this.presence.setPresence(y,n,t);break;case g.MESSAGE://RTL17
if("attached"!==this.state){l.default.logAction(l.default.LOG_MAJOR,"RealtimeChannel.onMessage()",'Message "'+e.id+'" skipped as this channel "'+this.name+'" state is not "attached" (state is "'+this.state+'").');return}var C=e.messages,O=C[0],E=C[C.length-1],v=e.id,b=e.connectionId,_=e.timestamp;if(O.extras&&O.extras.delta&&O.extras.delta.from!==this._lastPayload.messageId){var R='Delta message decode failure - previous message not available for message "'+e.id+'" on this channel "'+this.name+'".';l.default.logAction(l.default.LOG_ERROR,"RealtimeChannel.onMessage()",R),this._startDecodeFailureRecovery(new d.default(R,40018,400));break}for(var k=0;k<C.length;k++){var R=C[k];try{c.default.decode(R,this._decodingContext)}catch(e){switch(/* decrypt failed .. the most likely cause is that we have the wrong key */l.default.logAction(l.default.LOG_ERROR,"RealtimeChannel.onMessage()",e.toString()),e.code){case 40018:/* decode failure */this._startDecodeFailureRecovery(e);return;case 40019:/* No vcdiff plugin passed in - no point recovering, give up */// eslint-disable-next-line no-fallthrough
case 40021:/* Browser does not support deltas, similarly no point recovering */this.notifyState("failed",e);return}}R.connectionId||(R.connectionId=b),R.timestamp||(R.timestamp=_),R.id||(R.id=v+":"+k)}this._lastPayload.messageId=E.id,this._lastPayload.protocolMessageChannelSerial=e.channelSerial,this.onEvent(C);break;case g.ERROR:/* there was a channel-specific error */var A=e.error;A&&80016==A.code?/* attach/detach operation attempted on superseded transport handle */this.checkPendingState():this.notifyState("failed",d.default.fromValues(A));break;default:l.default.logAction(l.default.LOG_ERROR,"RealtimeChannel.onMessage()","Fatal protocol error: unrecognised action ("+e.action+")"),this.connectionManager.abort(h.default.unknownChannelErr())}},t.prototype._startDecodeFailureRecovery=function(e){var t=this;this._lastPayload.decodeFailureRecoveryInProgress||(l.default.logAction(l.default.LOG_MAJOR,"RealtimeChannel.onMessage()","Starting decode failure recovery process."),this._lastPayload.decodeFailureRecoveryInProgress=!0,this._attach(!0,e,function(){t._lastPayload.decodeFailureRecoveryInProgress=!1}))},t.prototype.onAttached=function(){l.default.logAction(l.default.LOG_MINOR,"RealtimeChannel.onAttached","activating channel; name = "+this.name)},t.prototype.notifyState=function(e,t,n,r,o){if(l.default.logAction(l.default.LOG_MICRO,"RealtimeChannel.notifyState","name = "+this.name+", current state = "+this.state+", notifying state "+e),this.clearStateTimer(),a.arrIn(["detached","suspended","failed"],e)&&(this.properties.channelSerial=null),e!==this.state){this.presence.actOnChannelState(e,r,t),"suspended"===e&&this.connectionManager.state.sendEvents?this.startRetryTimer():this.cancelRetryTimer(),t&&(this.errorReason=t);var i=new f.default(this.state,e,n,o,t),s="failed"===e?l.default.LOG_ERROR:l.default.LOG_MAJOR;l.default.logAction(s,'Channel state for channel "'+this.name+'"',e+(t?"; reason: "+t:"")),"attaching"!==e&&"suspended"!==e&&(this.retryCount=0),"attached"===e&&this.onAttached(),"attached"===e?this._attachResume=!0:("detaching"===e||"failed"===e)&&(this._attachResume=!1),this.state=e,this._allChannelChanges.emit(e,i),this.emit(e,i)}},t.prototype.requestState=function(e,t){l.default.logAction(l.default.LOG_MINOR,"RealtimeChannel.requestState","name = "+this.name+", state = "+e),this.notifyState(e,t),/* send the event and await response */this.checkPendingState()},t.prototype.checkPendingState=function(){/* if can't send events, do nothing */var e=this.connectionManager.state;/* Allow attach messages to queue up when synchronizing, since this will be
         * the state we'll be in when upgrade transport.active triggers a checkpendingstate */if(!(e.sendEvents||e.forceQueueEvents)){l.default.logAction(l.default.LOG_MINOR,"RealtimeChannel.checkPendingState","sendEvents is false; state is "+this.connectionManager.state.state);return}/* Only start the state timer running when actually sending the event */switch(l.default.logAction(l.default.LOG_MINOR,"RealtimeChannel.checkPendingState","name = "+this.name+", state = "+this.state),this.state){case"attaching":this.startStateTimerIfNotRunning(),this.attachImpl();break;case"detaching":this.startStateTimerIfNotRunning(),this.detachImpl();break;case"attached":/* resume any sync operation that was in progress */this.sync()}},t.prototype.timeoutPendingState=function(){switch(this.state){case"attaching":var e=new d.default("Channel attach timed out",90007,408);this.notifyState("suspended",e);break;case"detaching":var e=new d.default("Channel detach timed out",90007,408);this.notifyState("attached",e);break;default:this.checkPendingState()}},t.prototype.startStateTimerIfNotRunning=function(){var e=this;this.stateTimer||(this.stateTimer=setTimeout(function(){l.default.logAction(l.default.LOG_MINOR,"RealtimeChannel.startStateTimerIfNotRunning","timer expired"),e.stateTimer=null,e.timeoutPendingState()},this.realtime.options.timeouts.realtimeRequestTimeout))},t.prototype.clearStateTimer=function(){var e=this.stateTimer;e&&(clearTimeout(e),this.stateTimer=null)},t.prototype.startRetryTimer=function(){var e=this;if(!this.retryTimer){this.retryCount++;var t=a.getRetryTime(this.realtime.options.timeouts.channelRetryTimeout,this.retryCount);this.retryTimer=setTimeout(function(){"suspended"===e.state&&e.connectionManager.state.sendEvents&&(e.retryTimer=null,l.default.logAction(l.default.LOG_MINOR,"RealtimeChannel retry timer expired","attempting a new attach"),e.requestState("attaching"))},t)}},t.prototype.cancelRetryTimer=function(){this.retryTimer&&(clearTimeout(this.retryTimer),this.retryTimer=null)},/* @returns null (if can safely be released) | ErrorInfo (if cannot) */t.prototype.getReleaseErr=function(){var e=this.state;return"initialized"===e||"detached"===e||"failed"===e?null:new d.default("Can only release a channel in a state where there is no possibility of further updates from the server being received (initialized, detached, or failed); was "+e,90001,400)},t.prototype.setChannelSerial=function(e){l.default.logAction(l.default.LOG_MICRO,"RealtimeChannel.setChannelSerial()","Updating channel serial; serial = "+e+"; previous = "+this.properties.channelSerial),e&&(this.properties.channelSerial=e)},t}(s.default);t.default=y;/***/},/* 39 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,o){this.previous=e,this.current=t,"attached"===t&&(this.resumed=n,this.hasBacklog=r),o&&(this.reason=o)};/***/},/* 40 *//***/function(e,t,n){var r,o,i,a,s,l,u;// CommonJS
e.exports=(i=(o=(r=n(6)).lib).WordArray,a=o.Hasher,s=r.algo,l=[],u=s.SHA1=a.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){// Computation
for(var n=this._hash.words,r=n[0],o=n[1],i=n[2],a=n[3],s=n[4],u=0;u<80;u++){if(u<16)l[u]=0|e[t+u];else{var c=l[u-3]^l[u-8]^l[u-14]^l[u-16];l[u]=c<<1|c>>>31}var f=(r<<5|r>>>27)+s+l[u];u<20?f+=(o&i|~o&a)+1518500249:u<40?f+=(o^i^a)+1859775393:u<60?f+=(o&i|o&a|i&a)-1894007588:f+=(o^i^a)-899497514,s=a,a=i,i=o<<30|o>>>2,o=r,r=f}// Intermediate hash value
n[0]=n[0]+r|0,n[1]=n[1]+o|0,n[2]=n[2]+i|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0},_doFinalize:function(){// Shortcuts
var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;// Return final computed hash
return(// Add padding
t[r>>>5]|=128<<24-r%32,t[(r+64>>>9<<4)+14]=Math.floor(n/4294967296),t[(r+64>>>9<<4)+15]=n,e.sigBytes=4*t.length,// Hash final blocks
this._process(),this._hash)},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}}),/**
	     * Shortcut function to the hasher's object interface.
	     *
	     * @param {WordArray|string} message The message to hash.
	     *
	     * @return {WordArray} The hash.
	     *
	     * @static
	     *
	     * @example
	     *
	     *     var hash = CryptoJS.SHA1('message');
	     *     var hash = CryptoJS.SHA1(wordArray);
	     */r.SHA1=a._createHelper(u),/**
	     * Shortcut function to the HMAC's object interface.
	     *
	     * @param {WordArray|string} message The message to hash.
	     * @param {WordArray|string} key The secret key.
	     *
	     * @return {WordArray} The HMAC.
	     *
	     * @static
	     *
	     * @example
	     *
	     *     var hmac = CryptoJS.HmacSHA1(message, key);
	     */r.HmacSHA1=a._createHmacHelper(u),r.SHA1);/***/},/* 41 *//***/function(e,t,n){// Encode string as utf8 into dataview at offset
function r(e,t,n){for(var r=0,o=n.length;r<o;r++){var i=n.charCodeAt(r);// One byte of UTF-8
if(i<128){e.setUint8(t++,i>>>0&127|0);continue}// Two bytes of UTF-8
if(i<2048){e.setUint8(t++,i>>>6&31|192),e.setUint8(t++,i>>>0&63|128);continue}// Three bytes of UTF-8.
if(i<65536){e.setUint8(t++,i>>>12&15|224),e.setUint8(t++,i>>>6&63|128),e.setUint8(t++,i>>>0&63|128);continue}// Four bytes of UTF-8
if(i<1114112){e.setUint8(t++,i>>>18&7|240),e.setUint8(t++,i>>>12&63|128),e.setUint8(t++,i>>>6&63|128),e.setUint8(t++,i>>>0&63|128);continue}throw Error("bad codepoint "+i)}}function o(e,t,n){for(var r="",o=t,i=t+n;o<i;o++){var a=e.getUint8(o);// One byte character
if((128&a)==0){r+=String.fromCharCode(a);continue}// Two byte character
if((224&a)==192){r+=String.fromCharCode((15&a)<<6|63&e.getUint8(++o));continue}// Three byte character
if((240&a)==224){r+=String.fromCharCode((15&a)<<12|(63&e.getUint8(++o))<<6|(63&e.getUint8(++o))<<0);continue}// Four byte character
if((248&a)==240){r+=String.fromCharCode((7&a)<<18|(63&e.getUint8(++o))<<12|(63&e.getUint8(++o))<<6|(63&e.getUint8(++o))<<0);continue}throw Error("Invalid byte "+a.toString(16))}return r}function i(e){for(var t=0,n=0,r=e.length;n<r;n++){var o=e.charCodeAt(n);if(o<128){t+=1;continue}if(o<2048){t+=2;continue}if(o<65536){t+=3;continue}if(o<1114112){t+=4;continue}throw Error("bad codepoint "+o)}return t}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t){var n=this;this.map=function(e){for(var t={},r=0;r<e;r++)t[n.parse()]=n.parse();return t},this.bin=function(e){var t=new ArrayBuffer(e);return new Uint8Array(t).set(new Uint8Array(n.view.buffer,n.offset,e),0),n.offset+=e,t},this.buf=this.bin,this.str=function(e){var t=o(n.view,n.offset,e);return n.offset+=e,t},this.array=function(e){for(var t=Array(e),r=0;r<e;r++)t[r]=n.parse();return t},this.ext=function(e){return n.offset+=e,{type:n.view.getInt8(n.offset),data:n.buf(e)}},this.parse=function(){var e,t,r,o,i,a,s=n.view.getUint8(n.offset);// Positive FixInt - 0xxxxxxx
if((128&s)==0)return n.offset++,s;// FixMap - 1000xxxx
if((240&s)==128)return a=15&s,n.offset++,n.map(a);// FixArray - 1001xxxx
if((240&s)==144)return a=15&s,n.offset++,n.array(a);// FixStr - 101xxxxx
if((224&s)==160)return a=31&s,n.offset++,n.str(a);// Negative FixInt - 111xxxxx
if((224&s)==224)return i=n.view.getInt8(n.offset),n.offset++,i;switch(s){// nil
case 192:return n.offset++,null;// 0xc1 never used - use for undefined (NON-STANDARD)
case 193:n.offset++;return;// false
case 194:return n.offset++,!1;// true
case 195:return n.offset++,!0;// bin 8
case 196:return a=n.view.getUint8(n.offset+1),n.offset+=2,n.bin(a);// bin 16
case 197:return a=n.view.getUint16(n.offset+1),n.offset+=3,n.bin(a);// bin 32
case 198:return a=n.view.getUint32(n.offset+1),n.offset+=5,n.bin(a);// ext 8
case 199:return a=n.view.getUint8(n.offset+1),n.offset+=2,n.ext(a);// ext 16
case 200:return a=n.view.getUint16(n.offset+1),n.offset+=3,n.ext(a);// ext 32
case 201:return a=n.view.getUint32(n.offset+1),n.offset+=5,n.ext(a);// float 32
case 202:return i=n.view.getFloat32(n.offset+1),n.offset+=5,i;// float 64
case 203:return i=n.view.getFloat64(n.offset+1),n.offset+=9,i;// uint8
case 204:return i=n.view.getUint8(n.offset+1),n.offset+=2,i;// uint 16
case 205:return i=n.view.getUint16(n.offset+1),n.offset+=3,i;// uint 32
case 206:return i=n.view.getUint32(n.offset+1),n.offset+=5,i;// uint 64
case 207:return e=n.view,t=(t=n.offset+1)||0,i=4294967296*e.getUint32(t)+e.getUint32(t+4),n.offset+=9,i;// int 8
case 208:return i=n.view.getInt8(n.offset+1),n.offset+=2,i;// int 16
case 209:return i=n.view.getInt16(n.offset+1),n.offset+=3,i;// int 32
case 210:return i=n.view.getInt32(n.offset+1),n.offset+=5,i;// int 64
case 211:return r=n.view,o=(o=n.offset+1)||0,i=4294967296*r.getInt32(o)+r.getUint32(o+4),n.offset+=9,i;// fixext 1
case 212:return a=1,n.offset++,n.ext(a);// fixext 2
case 213:return a=2,n.offset++,n.ext(a);// fixext 4
case 214:return a=4,n.offset++,n.ext(a);// fixext 8
case 215:return a=8,n.offset++,n.ext(a);// fixext 16
case 216:return a=16,n.offset++,n.ext(a);// str8
case 217:return a=n.view.getUint8(n.offset+1),n.offset+=2,n.str(a);// str 16
case 218:return a=n.view.getUint16(n.offset+1),n.offset+=3,n.str(a);// str 32
case 219:return a=n.view.getUint32(n.offset+1),n.offset+=5,n.str(a);// array 16
case 220:return a=n.view.getUint16(n.offset+1),n.offset+=3,n.array(a);// array 32
case 221:return a=n.view.getUint32(n.offset+1),n.offset+=5,n.array(a);// map 16
case 222:return a=n.view.getUint16(n.offset+1),n.offset+=3,n.map(a);// map 32
case 223:return a=n.view.getUint32(n.offset+1),n.offset+=5,n.map(a)}throw Error("Unknown type 0x"+s.toString(16))},this.offset=t||0,this.view=e};function s(e,t){return Object.keys(e).filter(function(n){var r=e[n];return(!t||null!=r)&&("function"!=typeof r||!!r.toJSON)})}t.default={encode:function(e,t){var n=function e(t,n){var r=typeof t;// fixstr or str8 or str16 or str32
if("string"===r){var o=i(t);if(o<32)return 1+o;if(o<256)return 2+o;if(o<65536)return 3+o;if(o<4294967296)return 5+o}// bin8 or bin16 or bin32
if(ArrayBuffer.isView&&ArrayBuffer.isView(t)&&(t=t.buffer),t instanceof ArrayBuffer){var a=t.byteLength;if(a<256)return 2+a;if(a<65536)return 3+a;if(a<4294967296)return 5+a}if("number"==typeof t){// Floating Point (32 bits)
// double
if(Math.floor(t)!==t)return 9;// Integers
if(t>=0){// positive fixint
if(t<128)return 1;// uint 8
if(t<256)return 2;// uint 16
if(t<65536)return 3;// uint 32
if(t<4294967296)return 5;// uint 64
if(t<18446744073709552e3)return 9;// Too big
throw Error("Number too big 0x"+t.toString(16))}// negative fixint
if(t>=-32)return 1;// int 8
if(t>=-128)return 2;// int 16
if(t>=-32768)return 3;// int 32
if(t>=-2147483648)return 5;// int 64
if(t>=-0x8000000000000000)return 9;// Too small
throw Error("Number too small -0x"+t.toString(16).substr(1))}// Boolean
if("boolean"===r)return 1;// undefined, null
if(null===t)return n?0:1;if(void 0===t)return n?0:3;if("function"==typeof t.toJSON)return e(t.toJSON(),n);// Container Types
if("object"===r){var l,u=0;if(Array.isArray(t)){l=t.length;for(var c=0;c<l;c++)u+=e(t[c],n)}else{var f=s(t,n);l=f.length;for(var c=0;c<l;c++){var d=f[c];u+=e(d)+e(t[d],n)}}if(l<16)return 1+u;if(l<65536)return 3+u;if(l<4294967296)return 5+u;throw Error("Array or object too long 0x"+l.toString(16))}if("function"===r)return 0;throw Error("Unknown type "+r)}(e,t);if(0!==n){var o=new ArrayBuffer(n);return function e(t,n,o,a){var l=typeof t;// Strings Bytes
// There are four string types: fixstr/str8/str16/str32
if("string"==typeof t){var u=i(t);// fixstr
if(u<32)return n.setUint8(o,160|u),r(n,o+1,t),1+u;// str8
if(u<256)return n.setUint8(o,217),n.setUint8(o+1,u),r(n,o+2,t),2+u;// str16
if(u<65536)return n.setUint8(o,218),n.setUint16(o+1,u),r(n,o+3,t),3+u;// str32
if(u<4294967296)return n.setUint8(o,219),n.setUint32(o+1,u),r(n,o+5,t),5+u}// There are three bin types: bin8/bin16/bin32
if(ArrayBuffer.isView&&ArrayBuffer.isView(t)&&(t=t.buffer),t instanceof ArrayBuffer){var c=t.byteLength;// bin8
if(c<256)return n.setUint8(o,196),n.setUint8(o+1,c),new Uint8Array(n.buffer).set(new Uint8Array(t),o+2),2+c;// bin16
if(c<65536)return n.setUint8(o,197),n.setUint16(o+1,c),new Uint8Array(n.buffer).set(new Uint8Array(t),o+3),3+c;// bin 32
if(c<4294967296)return n.setUint8(o,198),n.setUint32(o+1,c),new Uint8Array(n.buffer).set(new Uint8Array(t),o+5),5+c}if("number"==typeof t){// Floating Point
// NOTE: We're always using float64
if(Math.floor(t)!==t)return n.setUint8(o,203),n.setFloat64(o+1,t),9;// Integers
if(t>=0){// positive fixnum
if(t<128)return n.setUint8(o,t),1;// uint 8
if(t<256)return n.setUint8(o,204),n.setUint8(o+1,t),2;// uint 16
if(t<65536)return n.setUint8(o,205),n.setUint16(o+1,t),3;// uint 32
if(t<4294967296)return n.setUint8(o,206),n.setUint32(o+1,t),5;// uint 64
if(t<18446744073709552e3)return n.setUint8(o,207),f=o+1,(d=t)<18446744073709552e3?(n.setUint32(f,Math.floor(23283064365386963e-26*d)),n.setInt32(f+4,-1&d)):(n.setUint32(f,4294967295),n.setUint32(f+4,4294967295)),9;throw Error("Number too big 0x"+t.toString(16))}// negative fixnum
if(t>=-32)return n.setInt8(o,t),1;// int 8
if(t>=-128)return n.setUint8(o,208),n.setInt8(o+1,t),2;// int 16
if(t>=-32768)return n.setUint8(o,209),n.setInt16(o+1,t),3;// int 32
if(t>=-2147483648)return n.setUint8(o,210),n.setInt32(o+1,t),5;// int 64
if(t>=-0x8000000000000000)return n.setUint8(o,211),p=o+1,(h=t)<0x7fffffffffffffff?(n.setInt32(p,Math.floor(23283064365386963e-26*h)),n.setInt32(p+4,-1&h)):(n.setUint32(p,2147483647),n.setUint32(p+4,2147483647)),9;throw Error("Number too small -0x"+(-t).toString(16).substr(1))}// undefined - use d4 (NON-STANDARD)
if("undefined"===l)return a?0:(n.setUint8(o,212),n.setUint8(o+1,0),n.setUint8(o+2,0),3);// null
if(null===t)return a?0:(n.setUint8(o,192),1);// Boolean
if("boolean"===l)return n.setUint8(o,t?195:194),1;if("function"==typeof t.toJSON)return e(t.toJSON(),n,o,a);// Container Types
if("object"===l){var f,d,p,h,g,m=0,y=void 0,v=Array.isArray(t);if((g=v?t.length:(y=s(t,a)).length)<16?(n.setUint8(o,g|(v?144:128)),m=1):g<65536?(n.setUint8(o,v?220:222),n.setUint16(o+1,g),m=3):g<4294967296&&(n.setUint8(o,v?221:223),n.setUint32(o+1,g),m=5),v)for(var b=0;b<g;b++)m+=e(t[b],n,o+m,a);else if(y)for(var b=0;b<g;b++){var _=y[b];m+=e(_,n,o+m),m+=e(t[_],n,o+m,a)}return m}if("function"===l)return 0;throw Error("Unknown type "+l)}(e,new DataView(o),0,t),o}},decode:function(e){var t=new DataView(e),n=new a(t),r=n.parse();if(n.offset!==e.byteLength)throw Error(e.byteLength-n.offset+" trailing bytes");return r},inspect:function(e){if(void 0===e)return"undefined";if(e instanceof ArrayBuffer?(n="ArrayBuffer",t=new DataView(e)):e instanceof DataView&&(n="DataView",t=e),!t)return JSON.stringify(e);for(var t,n,r=[],o=0;o<e.byteLength;o++){if(o>20){r.push("...");break}var i=t.getUint8(o).toString(16);1===i.length&&(i="0"+i),r.push(i)}return"<"+n+" "+r.join(" ")+">"},utf8Write:r,utf8Read:o,utf8ByteCount:i};/***/},/* 42 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(30)),i=r.__importDefault(n(50)),a=r.__importDefault(n(3)),s=r.__importDefault(n(4)),l=r.__importDefault(n(55)),u=r.__importDefault(n(57)),c=r.__importDefault(n(62)),f=r.__importDefault(n(64)),d=r.__importDefault(n(68)),p=r.__importDefault(n(2)),h=n(8),g=r.__importDefault(n(65)),m=r.__importDefault(n(66)),y=r.__importDefault(n(41)),v=(0,u.default)(f.default,l.default);a.default.Crypto=v,a.default.BufferUtils=l.default,a.default.Http=c.default,a.default.Config=f.default,a.default.Transports=d.default,a.default.WebStorage=g.default,o.default.Crypto=v,i.default.Crypto=v,p.default.initLogHandlers(),a.default.Defaults=(0,h.getDefaults)(m.default),a.default.Config.agent&&(a.default.Defaults.agent+=" "+a.default.Config.agent),a.default.Config.noUpgrade&&(a.default.Defaults.upgradeTransports=[]),t.default={ErrorInfo:s.default,Rest:o.default,Realtime:i.default,msgpack:y.default};/***/},/* 43 *//***/function(e){e.exports=JSON.parse('{"name":"ably","description":"Realtime client library for Ably, the realtime messaging service","version":"1.2.44","license":"Apache-2.0","bugs":{"url":"https://github.com/ably/ably-js/issues","email":"support@ably.com"},"main":"./build/ably-node.js","typings":"./ably.d.ts","react-native":{"./build/ably-node.js":"./build/ably-reactnative.js"},"browser":{"./build/ably-node.js":"./build/ably-commonjs.js"},"files":["build/**","ably.d.ts","callbacks.d.ts","callbacks.js","promises.d.ts","promises.js","resources/**","src/**","react/**"],"dependencies":{"@ably/msgpack-js":"^0.4.0","got":"^11.8.5","ws":"^5.1"},"peerDependencies":{"react":">=16.8.0","react-dom":">=16.8.0"},"peerDependenciesMeta":{"react":{"optional":true},"react-dom":{"optional":true}},"devDependencies":{"@ably/vcdiff-decoder":"1.0.4","@testing-library/react":"^13.3.0","@types/crypto-js":"^4.0.1","@types/node":"^15.0.0","@types/request":"^2.48.7","@types/ws":"^8.2.0","@typescript-eslint/eslint-plugin":"^5.14.0","@typescript-eslint/parser":"^5.14.0","@vitejs/plugin-react":"^1.3.2","async":"ably-forks/async#requirejs","aws-sdk":"^2.1413.0","chai":"^4.2.0","copy-webpack-plugin":"^6.4.1","cors":"^2.8.5","crypto-js":"ably-forks/crypto-js#crypto-lite","eslint":"^7.13.0","eslint-plugin-import":"^2.28.0","eslint-plugin-jsdoc":"^40.0.0","eslint-plugin-react":"^7.32.2","eslint-plugin-react-hooks":"^4.6.0","eslint-plugin-security":"^1.4.0","express":"^4.17.1","glob":"~4.4","google-closure-compiler":"^20180610.0.1","grunt":"^1.6.1","grunt-bump":"^0.3.1","grunt-cli":"~1.2.0","grunt-closure-tools":"^1.0.0","grunt-contrib-concat":"~0.5","grunt-shell":"~1.1","grunt-webpack":"^4.0.2","hexy":"~0.2","jsdom":"^20.0.0","kexec":"ably-forks/node-kexec#update-for-node-12","minimist":"^1.2.5","mocha":"^8.1.3","null-loader":"^4.0.1","playwright":"^1.10.0","prettier":"^2.5.1","react":">=18.1.0","react-dom":">=18.1.0","requirejs":"~2.1","shelljs":"~0.8","source-map-explorer":"^2.5.2","ts-loader":"^8.2.0","tsconfig-paths-webpack-plugin":"^4.0.1","tslib":"^2.3.1","typedoc":"^0.23.8","typescript":"^4.6.4","vite":"^4.4.9","vitest":"^0.18.0","webpack":"^4.44.2","webpack-cli":"^4.2.0"},"engines":{"node":">=5.10.x"},"repository":"ably/ably-js","jspm":{"registry":"npm","directories":{"lib":"build"},"main":"ably"},"scripts":{"start:react":"npx vite serve","grunt":"grunt","test":"grunt test","test:node":"grunt test:node","test:node:skip-build":"grunt mocha","test:webserver":"grunt test:webserver","test:playwright":"node test/support/runPlaywrightTests.js","test:react":"vitest run","concat":"grunt concat","build":"grunt build:all && npm run build:react","build:node":"grunt build:node","build:browser":"grunt build:browser","build:react":"npm run build:react:mjs && npm run build:react:cjs && cp src/platform/react-hooks/res/package.react.json react/package.json","build:react:mjs":"tsc --project src/platform/react-hooks/tsconfig.mjs.json && cp src/platform/react-hooks/res/package.mjs.json react/mjs/package.json","build:react:cjs":"tsc --project src/platform/react-hooks/tsconfig.cjs.json && cp src/platform/react-hooks/res/package.cjs.json react/cjs/package.json","requirejs":"grunt requirejs","lint":"eslint .","lint:fix":"eslint --fix .","check-closure-compiler":"grunt check-closure-compiler","prepare":"npm run build","format":"prettier --write --ignore-path .gitignore --ignore-path .prettierignore src test ably.d.ts webpack.config.js Gruntfile.js scripts/cdn_deploy.js docs/chrome-mv3.md","format:check":"prettier --check --ignore-path .gitignore --ignore-path .prettierignore src test ably.d.ts webpack.config.js Gruntfile.js scripts/cdn_deploy.js","sourcemap":"source-map-explorer build/ably.min.js","sourcemap:noencryption":"source-map-explorer build/ably.noencryption.min.js","docs":"typedoc --entryPoints ably.d.ts --out docs/generated/default --readme docs/landing-pages/default.md && typedoc --entryPoints promises.d.ts --out docs/generated/promises --name \\"ably (Promise-based)\\" --readme docs/landing-pages/promises.md && cp docs/landing-pages/choose-library.html docs/generated/index.html"}}');/***/},/* 44 *//***/function(e,t){/***/},/* 45 *//***/function(e,t,n){var r;// CommonJS
e.exports=(r=n(6),n(32),n(24),r.HmacSHA256);/***/},/* 46 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(47)),a=r.__importDefault(n(14)),s=r.__importDefault(n(19)),l=r.__importDefault(n(4)),u=r.__importDefault(n(48)),c=function(){},f=/** @class */function(){function e(e){this.rest=e,this.deviceRegistrations=new d(e),this.channelSubscriptions=new p(e)}return e.prototype.publish=function(e,t,n){var r=this.rest,i=r.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,s=o.defaultPostHeaders(r.options,i),l={},u=o.mixin({recipient:e},t);if("function"!=typeof n){if(this.rest.options.promises)return o.promisify(this,"publish",arguments);n=c}r.options.headers&&o.mixin(s,r.options.headers),r.options.pushFullWait&&o.mixin(l,{fullWait:"true"});var f=o.encodeBody(u,i);a.default.post(r,"/push/publish",f,s,l,null,function(e){return n(e)})},e}(),d=/** @class */function(){function e(e){this.rest=e}return e.prototype.save=function(e,t){var n=this.rest,r=i.default.fromValues(e),s=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,l=o.defaultPostHeaders(n.options,s),u={};if("function"!=typeof t){if(this.rest.options.promises)return o.promisify(this,"save",arguments);t=c}n.options.headers&&o.mixin(l,n.options.headers),n.options.pushFullWait&&o.mixin(u,{fullWait:"true"});var f=o.encodeBody(r,s);a.default.put(n,"/push/deviceRegistrations/"+encodeURIComponent(e.id),f,l,u,null,function(e,n,r,o){t(e,e?void 0:i.default.fromResponseBody(n,o?void 0:s))})},e.prototype.get=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,s=o.defaultGetHeaders(n.options,r),u=e.id||e;if("function"!=typeof t){if(this.rest.options.promises)return o.promisify(this,"get",arguments);t=c}if("string"!=typeof u||!u.length){t(new l.default("First argument to DeviceRegistrations#get must be a deviceId string or DeviceDetails",4e4,400));return}n.options.headers&&o.mixin(s,n.options.headers),a.default.get(n,"/push/deviceRegistrations/"+encodeURIComponent(u),s,{},null,function(e,n,o,a){t(e,e?void 0:i.default.fromResponseBody(n,a?void 0:r))})},e.prototype.list=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,a=this.rest.http.supportsLinkHeaders?void 0:r,l=o.defaultGetHeaders(n.options,r);if("function"!=typeof t){if(this.rest.options.promises)return o.promisify(this,"list",arguments);t=c}n.options.headers&&o.mixin(l,n.options.headers),new s.default(n,"/push/deviceRegistrations",l,a,function(e,t,n){return i.default.fromResponseBody(e,n?void 0:r)}).get(e,t)},e.prototype.remove=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,i=o.defaultGetHeaders(n.options,r),s={},u=e.id||e;if("function"!=typeof t){if(this.rest.options.promises)return o.promisify(this,"remove",arguments);t=c}if("string"!=typeof u||!u.length){t(new l.default("First argument to DeviceRegistrations#remove must be a deviceId string or DeviceDetails",4e4,400));return}n.options.headers&&o.mixin(i,n.options.headers),n.options.pushFullWait&&o.mixin(s,{fullWait:"true"}),a.default.delete(n,"/push/deviceRegistrations/"+encodeURIComponent(u),i,s,null,function(e){return t(e)})},e.prototype.removeWhere=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,i=o.defaultGetHeaders(n.options,r);if("function"!=typeof t){if(this.rest.options.promises)return o.promisify(this,"removeWhere",arguments);t=c}n.options.headers&&o.mixin(i,n.options.headers),n.options.pushFullWait&&o.mixin(e,{fullWait:"true"}),a.default.delete(n,"/push/deviceRegistrations",i,e,null,function(e){return t(e)})},e}(),p=/** @class */function(){function e(t){/* ChannelSubscriptions have no unique id; removing one is equivalent to removeWhere by its properties */this.remove=e.prototype.removeWhere,this.rest=t}return e.prototype.save=function(e,t){var n=this.rest,r=u.default.fromValues(e),i=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,s=o.defaultPostHeaders(n.options,i),l={};if("function"!=typeof t){if(this.rest.options.promises)return o.promisify(this,"save",arguments);t=c}n.options.headers&&o.mixin(s,n.options.headers),n.options.pushFullWait&&o.mixin(l,{fullWait:"true"});var f=o.encodeBody(r,i);a.default.post(n,"/push/channelSubscriptions",f,s,l,null,function(e,n,r,o){t(e,!e&&u.default.fromResponseBody(n,o?void 0:i))})},e.prototype.list=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,i=this.rest.http.supportsLinkHeaders?void 0:r,a=o.defaultGetHeaders(n.options,r);if("function"!=typeof t){if(this.rest.options.promises)return o.promisify(this,"list",arguments);t=c}n.options.headers&&o.mixin(a,n.options.headers),new s.default(n,"/push/channelSubscriptions",a,i,function(e,t,n){return u.default.fromResponseBody(e,n?void 0:r)}).get(e,t)},e.prototype.removeWhere=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,i=o.defaultGetHeaders(n.options,r);if("function"!=typeof t){if(this.rest.options.promises)return o.promisify(this,"removeWhere",arguments);t=c}n.options.headers&&o.mixin(i,n.options.headers),n.options.pushFullWait&&o.mixin(e,{fullWait:"true"}),a.default.delete(n,"/push/channelSubscriptions",i,e,null,function(e){return t(e)})},e.prototype.listChannels=function(e,t){var n=this.rest,r=n.options.useBinaryProtocol?o.Format.msgpack:o.Format.json,i=this.rest.http.supportsLinkHeaders?void 0:r,a=o.defaultGetHeaders(n.options,r);if("function"!=typeof t){if(this.rest.options.promises)return o.promisify(this,"listChannels",arguments);t=c}n.options.headers&&o.mixin(a,n.options.headers),n.options.pushFullWait&&o.mixin(e,{fullWait:"true"}),new s.default(n,"/push/channels",a,i,function(e,t,n){for(var i=!n&&r?o.decodeBody(e,r):e,a=0;a<i.length;a++)i[a]=String(i[a]);return i}).get(e,t)},e}();t.default=function(e){this.rest=e,this.admin=new f(e)};/***/},/* 47 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,o,i,a,s=n(0),l=s.__importStar(n(1)),u=s.__importDefault(n(4));(r=i||(i={})).Phone="phone",r.Tablet="tablet",r.Desktop="desktop",r.TV="tv",r.Watch="watch",r.Car="car",r.Embedded="embedded",r.Other="other",(o=a||(a={})).Android="android",o.IOS="ios",o.Browser="browser";var c=/** @class */function(){function e(){}return e.prototype.toJSON=function(){var e,t,n;return{id:this.id,deviceSecret:this.deviceSecret,platform:this.platform,formFactor:this.formFactor,clientId:this.clientId,metadata:this.metadata,deviceIdentityToken:this.deviceIdentityToken,push:{recipient:null===(e=this.push)||void 0===e?void 0:e.recipient,state:null===(t=this.push)||void 0===t?void 0:t.state,error:null===(n=this.push)||void 0===n?void 0:n.error}}},e.prototype.toString=function(){var e,t,n,r,o="[DeviceDetails";return this.id&&(o+="; id="+this.id),this.platform&&(o+="; platform="+this.platform),this.formFactor&&(o+="; formFactor="+this.formFactor),this.clientId&&(o+="; clientId="+this.clientId),this.metadata&&(o+="; metadata="+this.metadata),this.deviceIdentityToken&&(o+="; deviceIdentityToken="+JSON.stringify(this.deviceIdentityToken)),(null===(e=this.push)||void 0===e?void 0:e.recipient)&&(o+="; push.recipient="+JSON.stringify(this.push.recipient)),(null===(t=this.push)||void 0===t?void 0:t.state)&&(o+="; push.state="+this.push.state),(null===(n=this.push)||void 0===n?void 0:n.error)&&(o+="; push.error="+JSON.stringify(this.push.error)),(null===(r=this.push)||void 0===r?void 0:r.metadata)&&(o+="; push.metadata="+this.push.metadata),o+="]"},e.fromResponseBody=function(t,n){return(n&&(t=l.decodeBody(t,n)),l.isArray(t))?e.fromValuesArray(t):e.fromValues(t)},e.fromValues=function(t){return t.error=t.error&&u.default.fromValues(t.error),Object.assign(new e,t)},e.fromValuesArray=function(t){for(var n=t.length,r=Array(n),o=0;o<n;o++)r[o]=e.fromValues(t[o]);return r},e.toRequestBody=l.encodeBody,e}();t.default=c;/***/},/* 48 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__importStar(n(1)),o=/** @class */function(){function e(){}return(/**
     * Overload toJSON() to intercept JSON.stringify()
     * @return {*}
     */e.prototype.toJSON=function(){return{channel:this.channel,deviceId:this.deviceId,clientId:this.clientId}},e.prototype.toString=function(){var e="[PushChannelSubscription";return this.channel&&(e+="; channel="+this.channel),this.deviceId&&(e+="; deviceId="+this.deviceId),this.clientId&&(e+="; clientId="+this.clientId),e+="]"},e.fromResponseBody=function(t,n){return(n&&(t=r.decodeBody(t,n)),r.isArray(t))?e.fromValuesArray(t):e.fromValues(t)},e.fromValues=function(t){return Object.assign(new e,t)},e.fromValuesArray=function(t){for(var n=t.length,r=Array(n),o=0;o<n;o++)r[o]=e.fromValues(t[o]);return r},e.toRequestBody=r.encodeBody,e)}();t.default=o;/***/},/* 49 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=function(e){this.count=e&&e.count||0,this.data=e&&e.data||0,this.uncompressedData=e&&e.uncompressedData||0,this.failed=e&&e.failed||0,this.refused=e&&e.refused||0},a=/** @class */function(e){function t(t){var n=e.call(this,t)||this;return t&&t.category&&(n.category={},o.forInOwnNonNullProperties(t.category,function(e){n.category[e]=new i(t.category[e])})),n}return r.__extends(t,e),t}(i),s=function(e){this.peak=e&&e.peak||0,this.min=e&&e.min||0,this.mean=e&&e.mean||0,this.opened=e&&e.opened||0,this.refused=e&&e.refused||0},l=function(e){this.succeeded=e&&e.succeeded||0,this.failed=e&&e.failed||0,this.refused=e&&e.refused||0},u=function(e){this.plain=new s(e&&e.plain),this.tls=new s(e&&e.tls),this.all=new s(e&&e.all)},c=function(e){this.messages=new a(e&&e.messages),this.presence=new a(e&&e.presence),this.all=new a(e&&e.all)},f=function(e){this.realtime=new c(e&&e.realtime),this.rest=new c(e&&e.rest),this.webhook=new c(e&&e.webhook),this.sharedQueue=new c(e&&e.sharedQueue),this.externalQueue=new c(e&&e.externalQueue),this.httpEvent=new c(e&&e.httpEvent),this.push=new c(e&&e.push),this.all=new c(e&&e.all)},d=function(e){this.all=new c(e&&e.all),this.inbound=new f(e&&e.inbound),this.outbound=new f(e&&e.outbound)},p=function(e){this.all=new c(e&&e.all),this.producerPaid=new d(e&&e.producerPaid),this.consumerPaid=new d(e&&e.consumerPaid)},h=function(e){this.messages=e&&e.messages||0;var t=e&&e.notifications;this.notifications={invalid:t&&t.invalid||0,attempted:t&&t.attempted||0,successful:t&&t.successful||0,failed:t&&t.failed||0},this.directPublishes=e&&e.directPublishes||0},g=function(e){this.succeeded=e&&e.succeeded||0,this.skipped=e&&e.skipped||0,this.failed=e&&e.failed||0},m=function(e){var t=this;this.delta=void 0,e&&e.delta&&(this.delta={},o.forInOwnNonNullProperties(e.delta,function(n){t.delta[n]=new g(e.delta[n])}))},y=/** @class */function(e){function t(t){var n=e.call(this,t)||this;return n.persisted=new c(t&&t.persisted),n.connections=new u(t&&t.connections),n.channels=new s(t&&t.channels),n.apiRequests=new l(t&&t.apiRequests),n.tokenRequests=new l(t&&t.tokenRequests),n.xchgProducer=new p(t&&t.xchgProducer),n.xchgConsumer=new p(t&&t.xchgConsumer),n.push=new h(t&&t.pushStats),n.processed=new m(t&&t.processed),n.inProgress=t&&t.inProgress||void 0,n.unit=t&&t.unit||void 0,n.intervalId=t&&t.intervalId||void 0,n}return r.__extends(t,e),t.fromValues=function(e){return new t(e)},t}(d);t.default=y;/***/},/* 50 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(30)),a=r.__importDefault(n(7)),s=r.__importDefault(n(2)),l=r.__importDefault(n(51)),u=r.__importDefault(n(38)),c=r.__importDefault(n(8)),f=r.__importDefault(n(4)),d=r.__importDefault(n(10)),p=r.__importDefault(n(35)),h=r.__importDefault(n(3)),g=r.__importDefault(n(9)),m=/** @class */function(e){function t(t){var n=e.call(this,t)||this;return s.default.logAction(s.default.LOG_MINOR,"Realtime()",""),n.connection=new l.default(n,n.options),n.channels=new y(n),!1!==t.autoConnect&&n.connect(),n}return r.__extends(t,e),t.prototype.connect=function(){s.default.logAction(s.default.LOG_MINOR,"Realtime.connect()",""),this.connection.connect()},t.prototype.close=function(){s.default.logAction(s.default.LOG_MINOR,"Realtime.close()",""),this.connection.close()},t.Promise=function(e){return(e=c.default.objectifyOptions(e)).promises=!0,new t(e)},t.Callbacks=t,t.Utils=o,t.ConnectionManager=p.default,t.Platform=h.default,t.ProtocolMessage=d.default,t.Message=g.default,t}(i.default),y=/** @class */function(e){function t(t){var n=e.call(this)||this;return n.realtime=t,n.all=Object.create(null),t.connection.connectionManager.on("transport.active",function(){n.onTransportActive()}),n}return r.__extends(t,e),t.prototype.channelSerials=function(){for(var e={},t=0,n=o.keysArray(this.all,!0);t<n.length;t++){var r=n[t],i=this.all[r];i.properties.channelSerial&&(e[r]=i.properties.channelSerial)}return e},// recoverChannels gets the given channels and sets their channel serials.
t.prototype.recoverChannels=function(e){for(var t=0,n=o.keysArray(e,!0);t<n.length;t++){var r=n[t];this.get(r).properties.channelSerial=e[r]}},t.prototype.onChannelMessage=function(e){var t=e.channel;if(void 0===t){s.default.logAction(s.default.LOG_ERROR,"Channels.onChannelMessage()","received event unspecified channel, action = "+e.action);return}var n=this.all[t];if(!n){s.default.logAction(s.default.LOG_ERROR,"Channels.onChannelMessage()","received event for non-existent channel: "+t);return}n.onMessage(e)},/* called when a transport becomes connected; reattempt attach/detach
     * for channels that are attaching or detaching. */t.prototype.onTransportActive=function(){for(var e in this.all){var t=this.all[e];"attaching"===t.state||"detaching"===t.state?t.checkPendingState():"suspended"===t.state?t._attach(!1,null):"attached"===t.state&&// as its already attached.
t.requestState("attaching")}},/* Connection interruptions (ie when the connection will no longer queue
     * events) imply connection state changes for any channel which is either
     * attached, pending, or will attempt to become attached in the future */t.prototype.propogateConnectionInterruption=function(e,t){var n=["attaching","attached","detaching","suspended"],r={closing:"detached",closed:"detached",failed:"failed",suspended:"suspended"}[e];for(var i in this.all){var a=this.all[i];o.arrIn(n,a.state)&&a.notifyState(r,t)}},t.prototype.get=function(e,t){e=String(e);var n=this.all[e];if(n){if(t){if(n._shouldReattachToSetOptions(t))throw new f.default("Channels.get() cannot be used to set channel options that would cause the channel to reattach. Please, use RealtimeChannel.setOptions() instead.",4e4,400);n.setOptions(t)}}else n=this.all[e]=new u.default(this.realtime,e,t);return n},t.prototype.getDerived=function(e,t,n){if(t.filter){var r=o.toBase64(t.filter),i=o.matchDerivedChannel(e);e="[filter=".concat(r).concat(i.qualifierParam,"]").concat(i.channelName)}return this.get(e,n)},/* Included to support certain niche use-cases; most users should ignore this.
     * Please do not use this unless you know what you're doing */t.prototype.release=function(e){e=String(e);var t=this.all[e];if(t){var n=t.getReleaseErr();if(n)throw n;delete this.all[e]}},t}(a.default);t.default=m;/***/},/* 51 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(7)),a=r.__importDefault(n(35)),s=r.__importDefault(n(2)),l=r.__importDefault(n(37)),u=r.__importDefault(n(3));function c(){}var f=/** @class */function(e){function t(t,n){var r=e.call(this)||this;return r.whenState=function(e,t){return i.default.prototype.whenState.call(r,e,r.state,t,new l.default(void 0,e))},r.ably=t,r.connectionManager=new a.default(t,n),r.state=r.connectionManager.state.state,r.key=void 0,r.id=void 0,r.errorReason=null,r.connectionManager.on("connectionstate",function(e){var t=r.state=e.current;u.default.Config.nextTick(function(){r.emit(t,e)})}),r.connectionManager.on("update",function(e){u.default.Config.nextTick(function(){r.emit("update",e)})}),r}return r.__extends(t,e),t.prototype.connect=function(){s.default.logAction(s.default.LOG_MINOR,"Connection.connect()",""),this.connectionManager.requestState({state:"connecting"})},t.prototype.ping=function(e){if(s.default.logAction(s.default.LOG_MINOR,"Connection.ping()",""),!e){if(this.ably.options.promises)return o.promisify(this,"ping",arguments);e=c}this.connectionManager.ping(null,e)},t.prototype.close=function(){s.default.logAction(s.default.LOG_MINOR,"Connection.close()","connectionKey = "+this.key),this.connectionManager.requestState({state:"closing"})},Object.defineProperty(t.prototype,"recoveryKey",{get:function(){return this.createRecoveryKey()},enumerable:!1,configurable:!0}),t.prototype.createRecoveryKey=function(){return this.connectionManager.createRecoveryKey()},t}(i.default);t.default=f;/***/},/* 52 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PendingMessage=void 0;var r=n(0),o=r.__importDefault(n(10)),i=r.__importStar(n(1)),a=r.__importDefault(n(7)),s=r.__importDefault(n(2)),l=r.__importDefault(n(36)),u=r.__importDefault(n(4)),c=o.default.Action;t.PendingMessage=function(e,t){this.message=e,this.callback=t,this.merged=!1;var n=e.action;this.sendAttempted=!1,this.ackRequired=n==c.MESSAGE||n==c.PRESENCE};var f=/** @class */function(e){function t(t){var n=e.call(this)||this;return n.transport=t,n.messageQueue=new l.default,t.on("ack",function(e,t){n.onAck(e,t)}),t.on("nack",function(e,t,r){n.onNack(e,t,r)}),n}return r.__extends(t,e),t.prototype.onAck=function(e,t){s.default.logAction(s.default.LOG_MICRO,"Protocol.onAck()","serial = "+e+"; count = "+t),this.messageQueue.completeMessages(e,t)},t.prototype.onNack=function(e,t,n){s.default.logAction(s.default.LOG_ERROR,"Protocol.onNack()","serial = "+e+"; count = "+t+"; err = "+i.inspectError(n)),n||(n=new u.default("Unable to send message; channel not responding",50001,500)),this.messageQueue.completeMessages(e,t,n)},t.prototype.onceIdle=function(e){var t=this.messageQueue;if(0===t.count()){e();return}t.once("idle",e)},t.prototype.send=function(e){e.ackRequired&&this.messageQueue.push(e),s.default.shouldLog(s.default.LOG_MICRO)&&s.default.logAction(s.default.LOG_MICRO,"Protocol.send()","sending msg; "+o.default.stringify(e.message)),e.sendAttempted=!0,this.transport.send(e.message)},t.prototype.getTransport=function(){return this.transport},t.prototype.getPendingMessages=function(){return this.messageQueue.copyAll()},t.prototype.clearPendingMessages=function(){return this.messageQueue.clear()},t.prototype.finish=function(){var e=this.transport;this.onceIdle(function(){e.disconnect()})},t}(a.default);t.default=f;/***/},/* 53 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importDefault(n(3)),i=r.__importStar(n(1)),a=r.__importDefault(n(26)),s=r.__importDefault(n(8)),l=r.__importDefault(n(2)),u=r.__importDefault(n(10)),c=r.__importDefault(n(4)),f="web_socket",d=/** @class */function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.shortName=f,/* If is a browser, can't detect pings, so request protocol heartbeats */r.heartbeats=o.default.Config.useProtocolHeartbeats,i.wsHost=s.default.getHost(r.options,r.host,!0),i}return r.__extends(t,e),t.isAvailable=function(){return!!o.default.Config.WebSocket},t.prototype.createWebSocket=function(e,t){return this.uri=e+i.toQueryString(t),new o.default.Config.WebSocket(this.uri)},t.prototype.toString=function(){return"WebSocketTransport; uri="+this.uri},t.prototype.connect=function(){l.default.logAction(l.default.LOG_MINOR,"WebSocketTransport.connect()","starting"),a.default.prototype.connect.call(this);var e=this,t=this.params,n=t.options,r=(n.tls?"wss://":"ws://")+this.wsHost+":"+s.default.getPort(n)+"/";l.default.logAction(l.default.LOG_MINOR,"WebSocketTransport.connect()","uri: "+r),this.auth.getAuthParams(function(n,i){if(!e.isDisposed){var a="";for(var s in i)a+=" "+s+": "+i[s]+";";if(l.default.logAction(l.default.LOG_MINOR,"WebSocketTransport.connect()","authParams:"+a+" err: "+n),n){e.disconnect(n);return}var u=t.getConnectParams(i);try{var c=e.wsConnection=e.createWebSocket(r,u);c.binaryType=o.default.Config.binaryType,c.onopen=function(){e.onWsOpen()},c.onclose=function(t){e.onWsClose(t)},c.onmessage=function(t){e.onWsData(t.data)},c.onerror=function(t){e.onWsError(t)},c.on&&/* node; browsers currently don't have a general eventemitter and can't detect
                     * pings. Also, no need to reply with a pong explicitly, ws lib handles that */c.on("ping",function(){e.onActivity()})}catch(t){l.default.logAction(l.default.LOG_ERROR,"WebSocketTransport.connect()","Unexpected exception creating websocket: err = "+(t.stack||t.message)),e.disconnect(t)}}})},t.prototype.send=function(e){var t=this.wsConnection;if(!t){l.default.logAction(l.default.LOG_ERROR,"WebSocketTransport.send()","No socket connection");return}try{t.send(u.default.serialize(e,this.params.format))}catch(e){var n="Exception from ws connection when trying to send: "+i.inspectError(e);l.default.logAction(l.default.LOG_ERROR,"WebSocketTransport.send()",n),/* Don't try to request a disconnect, that'll just involve sending data
             * down the websocket again. Just finish the transport. */this.finish("disconnected",new c.default(n,5e4,500))}},t.prototype.onWsData=function(e){l.default.logAction(l.default.LOG_MICRO,"WebSocketTransport.onWsData()","data received; length = "+e.length+"; type = "+typeof e);try{this.onProtocolMessage(u.default.deserialize(e,this.format))}catch(e){l.default.logAction(l.default.LOG_ERROR,"WebSocketTransport.onWsData()","Unexpected exception handing channel message: "+e.stack)}},t.prototype.onWsOpen=function(){l.default.logAction(l.default.LOG_MINOR,"WebSocketTransport.onWsOpen()","opened WebSocket"),this.emit("preconnect")},t.prototype.onWsClose=function(e){var t,n;if("object"==typeof e?(/* W3C spec-compatible */n=e.code,// ev.wasClean is undefined in reactnative
t=e.wasClean||1e3===n):t=1e3==/* ws in node */(n=e),delete this.wsConnection,t){l.default.logAction(l.default.LOG_MINOR,"WebSocketTransport.onWsClose()","Cleanly closed WebSocket");var r=new c.default("Websocket closed",80003,400);this.finish("disconnected",r)}else{var o="Unclean disconnection of WebSocket ; code = "+n,r=new c.default(o,80003,400);l.default.logAction(l.default.LOG_MINOR,"WebSocketTransport.onWsClose()",o),this.finish("disconnected",r)}this.emit("disposed")},t.prototype.onWsError=function(e){var t=this;l.default.logAction(l.default.LOG_MINOR,"WebSocketTransport.onError()","Error from WebSocket: "+e.message),/* Wait a tick before aborting: if the websocket was connected, this event
         * will be immediately followed by an onclose event with a close code. Allow
         * that to close it (so we see the close code) rather than anticipating it */o.default.Config.nextTick(function(){t.disconnect(Error(e.message))})},t.prototype.dispose=function(){l.default.logAction(l.default.LOG_MINOR,"WebSocketTransport.dispose()",""),this.isDisposed=!0;var e=this.wsConnection;e&&(/* Ignore any messages that come through after dispose() is called but before
             * websocket is actually closed. (mostly would be harmless, but if it's a
             * CONNECTED, it'll re-tick isConnected and cause all sorts of havoc) */e.onmessage=function(){},delete this.wsConnection,/* defer until the next event loop cycle before closing the socket,
             * giving some implementations the opportunity to send any outstanding close message */o.default.Config.nextTick(function(){if(l.default.logAction(l.default.LOG_MICRO,"WebSocketTransport.dispose()","closing websocket"),!e)throw Error("WebSocketTransport.dispose(): wsConnection is not defined");e.close()}))},t}(a.default);t.default=function(e){return d.isAvailable()&&(e.supportedTransports[f]=d),d};/***/},/* 54 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(1)),i=r.__importDefault(n(34)),a=r.__importDefault(n(7)),s=r.__importDefault(n(2)),l=r.__importDefault(n(15)),u=r.__importStar(n(4)),c=r.__importDefault(n(38)),f=r.__importDefault(n(23)),d=r.__importDefault(n(39)),p=function(){};function h(e){var t=e.channel.realtime,n=t.auth.clientId;return(!n||"*"===n)&&"connected"===t.connection.state}function g(e,t){/* RTP2b1: if either is synthesised, compare by timestamp */if(e.isSynthesized()||t.isSynthesized())return e.timestamp>=t.timestamp;/* RTP2b2 */var n=e.parseId(),r=t.parseId();return n.msgSerial===r.msgSerial?n.index>r.index:n.msgSerial>r.msgSerial}var m=/** @class */function(e){function t(t){var n=e.call(this,t)||this;return n.channel=t,n.syncComplete=!1,n.members=new y(n,function(e){return e.clientId+":"+e.connectionId}),// RTP17h: Store own members by clientId only.
n._myMembers=new y(n,function(e){return e.clientId}),n.subscriptions=new a.default,n.pendingPresence=[],n}return r.__extends(t,e),t.prototype.enter=function(e,t){if(h(this))throw new u.default("clientId must be specified to enter a presence channel",40012,400);return this._enterOrUpdateClient(void 0,void 0,e,"enter",t)},t.prototype.update=function(e,t){if(h(this))throw new u.default("clientId must be specified to update presence data",40012,400);return this._enterOrUpdateClient(void 0,void 0,e,"update",t)},t.prototype.enterClient=function(e,t,n){return this._enterOrUpdateClient(void 0,e,t,"enter",n)},t.prototype.updateClient=function(e,t,n){return this._enterOrUpdateClient(void 0,e,t,"update",n)},t.prototype._enterOrUpdateClient=function(e,t,n,r,i){var a=this;if(!i){if("function"==typeof n)i=n,n=null;else{if(this.channel.realtime.options.promises)return o.promisify(this,"_enterOrUpdateClient",[e,t,n,r]);i=p}}var c=this.channel;if(!c.connectionManager.activeState()){i(c.connectionManager.getError());return}s.default.logAction(s.default.LOG_MICRO,"RealtimePresence."+r+"Client()","channel = "+c.name+", id = "+e+", client = "+(t||"(implicit) "+this.channel.realtime.auth.clientId));var f=l.default.fromData(n);f.action=r,e&&(f.id=e),t&&(f.clientId=t),l.default.encode(f,c.channelOptions,function(e){if(e){i(e);return}switch(c.state){case"attached":c.sendPresence(f,i);break;case"initialized":case"detached":c.attach();// eslint-disable-next-line no-fallthrough
case"attaching":a.pendingPresence.push({presence:f,callback:i});break;default:(e=new u.PartialErrorInfo("Unable to "+r+" presence channel while in "+c.state+" state",90001)).code=90001,i(e)}})},t.prototype.leave=function(e,t){if(h(this))throw new u.default("clientId must have been specified to enter or leave a presence channel",40012,400);return this.leaveClient(void 0,e,t)},t.prototype.leaveClient=function(e,t,n){if(!n){if("function"==typeof t)n=t,t=null;else{if(this.channel.realtime.options.promises)return o.promisify(this,"leaveClient",[e,t]);n=p}}var r=this.channel;if(!r.connectionManager.activeState()){null==n||n(r.connectionManager.getError());return}s.default.logAction(s.default.LOG_MICRO,"RealtimePresence.leaveClient()","leaving; channel = "+this.channel.name+", client = "+e);var i=l.default.fromValues({action:"leave",data:t});switch(e&&(i.clientId=e),r.state){case"attached":r.sendPresence(i,n);break;case"attaching":this.pendingPresence.push({presence:i,callback:n});break;case"initialized":case"failed":/* we're not attached; therefore we let any entered status
                 * timeout by itself instead of attaching just in order to leave */var a=new u.PartialErrorInfo("Unable to leave presence channel (incompatible state)",90001);null==n||n(a);break;default:null==n||n(r.invalidStateError())}},// Return type is any to avoid conflict with base Presence class
t.prototype.get=function(e,t){var n=this,r=Array.prototype.slice.call(arguments);1==r.length&&"function"==typeof r[0]&&r.unshift(null),e=r[0],t=r[1];var i=!e||!("waitForSync"in e)||e.waitForSync;if(!t){if(this.channel.realtime.options.promises)return o.promisify(this,"get",r);t=p}function a(n){t(null,e?n.list(e):n.values())}/* Special-case the suspended state: can still get (stale) presence set if waitForSync is false */if("suspended"===this.channel.state){i?t(u.default.fromValues({statusCode:400,code:91005,message:"Presence state is out of sync due to channel being in the SUSPENDED state"})):a(this.members);return}!/* Callback is called only in the event of an error */function(e,t,n){switch(e.state){case"attached":case"suspended":n();break;case"initialized":case"detached":case"detaching":case"attaching":e.attach(function(e){e?t(e):n()});break;default:t(u.default.fromValues(e.invalidStateError()))}}(this.channel,t,function(){var e=n.members;i?e.waitSync(function(){a(e)}):a(e)})},t.prototype.history=function(e,t){/* params and callback are optional; see if params contains the callback */if(s.default.logAction(s.default.LOG_MICRO,"RealtimePresence.history()","channel = "+this.name),void 0===t){if("function"==typeof e)t=e,e=null;else{if(this.channel.realtime.options.promises)return o.promisify(this,"history",arguments);t=p}}e&&e.untilAttach&&("attached"===this.channel.state?(delete e.untilAttach,e.from_serial=this.channel.properties.attachSerial):t(new u.default("option untilAttach requires the channel to be attached, was: "+this.channel.state,4e4,400))),i.default.prototype._history.call(this,e,t)},t.prototype.setPresence=function(e,t,n){s.default.logAction(s.default.LOG_MICRO,"RealtimePresence.setPresence()","received presence for "+e.length+" participants; syncChannelSerial = "+n);var r,o,i=this.members,a=this._myMembers,u=[],c=this.channel.connectionManager.connectionId;t&&(this.members.startSync(),n&&(o=n.match(/^[\w-]+:(.*)$/))&&(r=o[1]));for(var f=0;f<e.length;f++){var d=l.default.fromValues(e[f]);switch(d.action){case"leave":i.remove(d)&&u.push(d),d.connectionId!==c||d.isSynthesized()||a.remove(d);break;case"enter":case"present":case"update":i.put(d)&&u.push(d),d.connectionId===c&&a.put(d)}}t&&!r&&(i.endSync(),this.channel.syncChannelSerial=null);/* broadcast to listeners */for(var f=0;f<u.length;f++){var d=u[f];this.subscriptions.emit(d.action,d)}},t.prototype.onAttached=function(e){s.default.logAction(s.default.LOG_MINOR,"RealtimePresence.onAttached()","channel = "+this.channel.name+", hasPresence = "+e),e?this.members.startSync():(this._synthesizeLeaves(this.members.values()),this.members.clear()),// RTP17f: Re-enter own members when moving into the attached state.
this._ensureMyMembersPresent();/* NB this must be after the _ensureMyMembersPresent call, which may add items to pendingPresence */var t=this.pendingPresence,n=t.length;if(n){this.pendingPresence=[];var r=[],o=f.default.create();s.default.logAction(s.default.LOG_MICRO,"RealtimePresence.onAttached","sending "+n+" queued presence messages");for(var i=0;i<n;i++){var a=t[i];r.push(a.presence),o.push(a.callback)}this.channel.sendPresence(r,o)}},t.prototype.actOnChannelState=function(e,t,n){switch(e){case"attached":this.onAttached(t);break;case"detached":case"failed":this._clearMyMembers(),this.members.clear();/* falls through */case"suspended":this.failPendingPresence(n)}},t.prototype.failPendingPresence=function(e){if(this.pendingPresence.length){s.default.logAction(s.default.LOG_MINOR,"RealtimeChannel.failPendingPresence","channel; name = "+this.channel.name+", err = "+o.inspectError(e));for(var t=0;t<this.pendingPresence.length;t++)try{this.pendingPresence[t].callback(e);// eslint-disable-next-line no-empty
}catch(e){}this.pendingPresence=[]}},t.prototype._clearMyMembers=function(){this._myMembers.clear()},t.prototype._ensureMyMembersPresent=function(){var e=this,t=this._myMembers,n=function(t){if(t){var n="Presence auto-re-enter failed: "+t.toString(),r=new u.default(n,91004,400);s.default.logAction(s.default.LOG_ERROR,"RealtimePresence._ensureMyMembersPresent()",n);var o=new d.default(e.channel.state,e.channel.state,!0,!1,r);e.channel.emit("update",o)}};for(var r in t.map){var o=t.map[r];s.default.logAction(s.default.LOG_MICRO,"RealtimePresence._ensureMyMembersPresent()",'Auto-reentering clientId "'+o.clientId+'" into the presence set'),// RTP17g: Send ENTER containing the member id, clientId and data
// attributes.
this._enterOrUpdateClient(o.id,o.clientId,o.data,"enter",n)}},t.prototype._synthesizeLeaves=function(e){var t=this.subscriptions;o.arrForEach(e,function(e){var n=l.default.fromValues({action:"leave",connectionId:e.connectionId,clientId:e.clientId,data:e.data,encoding:e.encoding,timestamp:o.now()});t.emit("leave",n)})},/* Deprecated */t.prototype.on=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];s.default.deprecated("presence.on","presence.subscribe"),this.subscribe.apply(this,e)},/* Deprecated */t.prototype.off=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];s.default.deprecated("presence.off","presence.unsubscribe"),this.unsubscribe.apply(this,e)},t.prototype.subscribe=function(){for(var e=[],t=0/* [event], listener, [callback] */;t<arguments.length/* [event], listener, [callback] */;t++)e[t]=arguments[t];/* [event], listener, [callback] */var n=c.default.processListenerArgs(e),r=n[0],i=n[1],a=n[2],s=this.channel;/* [event], listener, [callback] */if(!a){if(this.channel.realtime.options.promises)return o.promisify(this,"subscribe",[r,i]);a=p}if("failed"===s.state){a(u.default.fromValues(s.invalidStateError()));return}this.subscriptions.on(r,i),s.attach(a)},t.prototype.unsubscribe=function(){for(var e=[],t=0/* [event], listener */;t<arguments.length/* [event], listener */;t++)e[t]=arguments[t];/* [event], listener */var n=c.default.processListenerArgs(e),r=n[0],o=n[1];/* [event], listener */this.subscriptions.off(r,o)},t}(i.default),y=/** @class */function(e){function t(t,n){var r=e.call(this)||this;return r.presence=t,r.map=Object.create(null),r.syncInProgress=!1,r.residualMembers=null,r.memberKey=n,r}return r.__extends(t,e),t.prototype.get=function(e){return this.map[e]},t.prototype.getClient=function(e){var t=this.map,n=[];for(var r in t){var o=t[r];o.clientId==e&&"absent"!=o.action&&n.push(o)}return n},t.prototype.list=function(e){var t=this.map,n=e&&e.clientId,r=e&&e.connectionId,o=[];for(var i in t){var a=t[i];"absent"!==a.action&&(!n||n==a.clientId)&&(r&&r!=a.connectionId||o.push(a))}return o},t.prototype.put=function(e){("enter"===e.action||"update"===e.action)&&((e=l.default.fromValues(e)).action="present");var t=this.map,n=this.memberKey(e);this.residualMembers&&delete this.residualMembers[n];/* compare the timestamp of the new item with any existing member (or ABSENT witness) */var r=t[n];return(!r||!!g(e,r))&&(t[n]=e,!0)},t.prototype.values=function(){var e=this.map,t=[];for(var n in e){var r=e[n];"absent"!=r.action&&t.push(r)}return t},t.prototype.remove=function(e){var t=this.map,n=this.memberKey(e),r=t[n];return(!r||!!g(e,r))&&(this.syncInProgress?((e=l.default.fromValues(e)).action="absent",t[n]=e):delete t[n],!0)},t.prototype.startSync=function(){var e=this.map,t=this.syncInProgress;s.default.logAction(s.default.LOG_MINOR,"PresenceMap.startSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+t),this.syncInProgress||(this.residualMembers=o.copy(e),this.setInProgress(!0))},t.prototype.endSync=function(){var e=this.map,t=this.syncInProgress;if(s.default.logAction(s.default.LOG_MINOR,"PresenceMap.endSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+t),t){/* we can now strip out the ABSENT members, as we have
             * received all of the out-of-order sync messages */for(var n in e)"absent"===e[n].action&&delete e[n];for(var n in /* any members that were present at the start of the sync,
             * and have not been seen in sync, can be removed, and leave events emitted */this.presence._synthesizeLeaves(o.valuesArray(this.residualMembers)),this.residualMembers)delete e[n];this.residualMembers=null,/* finish, notifying any waiters */this.setInProgress(!1)}this.emit("sync")},t.prototype.waitSync=function(e){var t=this.syncInProgress;if(s.default.logAction(s.default.LOG_MINOR,"PresenceMap.waitSync()","channel = "+this.presence.channel.name+"; syncInProgress = "+t),!t){e();return}this.once("sync",e)},t.prototype.clear=function(){this.map={},this.setInProgress(!1),this.residualMembers=null},t.prototype.setInProgress=function(e){s.default.logAction(s.default.LOG_MICRO,"PresenceMap.setInProgress()","inProgress = "+e),this.syncInProgress=e,this.presence.syncComplete=!e},t}(a.default);t.default=m;/***/},/* 55 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(56),i=n(31),a=n(11),s=r.__importDefault(n(5)),l=r.__importDefault(n(3)),u=/** @class */function(){function e(){this.base64CharSet="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.hexCharSet="0123456789abcdef"}return e.prototype.isWordArray=function(e){return null!=e&&void 0!==e.sigBytes},e.prototype.isArrayBuffer=function(e){return null!=e&&e.constructor===ArrayBuffer},e.prototype.isTypedArray=function(e){return!!ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e)},// // https://gist.githubusercontent.com/jonleighton/958841/raw/f200e30dfe95212c0165ccf1ae000ca51e9de803/gistfile1.js
e.prototype.uint8ViewToBase64=function(e){// Main loop deals with bytes in chunks of 3
for(var t,n,r,o,i,a="",s=this.base64CharSet,l=e.byteLength,u=l%3,c=l-u,f=0;f<c;f+=3)// Use bitmasks to extract 6-bit segments from the triplet
t=(16515072&// Combine the three bytes into a single integer
(i=e[f]<<16|e[f+1]<<8|e[f+2]))>>18,n=(258048&i)>>12,r=(4032&i)>>6,o=63&i,// Convert the raw binary segments to the appropriate ASCII encoding
a+=s[t]+s[n]+s[r]+s[o];return 1==u?(t=(252&(i=e[c]))>>2,// Set the 4 least significant bits to zero
n=(3&i)<<4,a+=s[t]+s[n]+"=="):2==u&&(t=(64512&(i=e[c]<<8|e[c+1]))>>10,n=(1008&i)>>4,// Set the 2 least significant bits to zero
r=(15&i)<<2,a+=s[t]+s[n]+s[r]+"="),a},e.prototype.base64ToArrayBuffer=function(e){for(var t=null==atob?void 0:atob(e),n=t.length,r=new Uint8Array(n),o=0;o<n;o++){var i=t.charCodeAt(o);r[o]=i}return r.buffer},e.prototype.isBuffer=function(e){return this.isArrayBuffer(e)||this.isWordArray(e)||this.isTypedArray(e)},/* In browsers, returns a Uint8Array */e.prototype.toBuffer=function(e){if(!ArrayBuffer)throw Error("Can't convert to Buffer: browser does not support the necessary types");if(this.isArrayBuffer(e))return new Uint8Array(e);if(this.isTypedArray(e))return new Uint8Array(e.buffer);if(this.isWordArray(e)){for(var t=new ArrayBuffer(e.sigBytes),n=new Uint8Array(t),r=0;r<e.sigBytes;r++)n[r]=e.words[r>>>2]>>>24-r%4*8&255;return n}throw Error("BufferUtils.toBuffer expected an arraybuffer, typed array, or CryptoJS wordarray")},e.prototype.toArrayBuffer=function(e){return this.isArrayBuffer(e)?e:this.toBuffer(e).buffer},e.prototype.toWordArray=function(e){return this.isTypedArray(e)&&(e=e.buffer),this.isWordArray(e)?e:s.default.create(e)},e.prototype.base64Encode=function(e){return this.isWordArray(e)?(0,a.stringify)(e):this.uint8ViewToBase64(this.toBuffer(e))},e.prototype.base64Decode=function(e){return ArrayBuffer&&l.default.Config.atob?this.base64ToArrayBuffer(e):(0,a.parse)(e)},e.prototype.hexEncode=function(e){return(0,o.stringify)(this.toWordArray(e))},e.prototype.hexDecode=function(e){var t=(0,o.parse)(e);return ArrayBuffer?this.toArrayBuffer(t):t},e.prototype.utf8Encode=function(e){return l.default.Config.TextEncoder?new l.default.Config.TextEncoder().encode(e).buffer:(0,i.parse)(e)},/* For utf8 decoding we apply slightly stricter input validation than to
     * hexEncode/base64Encode/etc: in those we accept anything that Buffer.from
     * can take (in particular allowing strings, which are just interpreted as
     * binary); here we ensure that the input is actually a buffer since trying
     * to utf8-decode a string to another string is almost certainly a mistake */e.prototype.utf8Decode=function(e){if(!this.isBuffer(e))throw Error("Expected input of utf8decode to be an arraybuffer, typed array, or CryptoJS wordarray");return TextDecoder&&!this.isWordArray(e)?new TextDecoder().decode(e):(e=this.toWordArray(e),(0,i.stringify)(e))},e.prototype.bufferCompare=function(e,t){if(!e)return -1;if(!t)return 1;var n=this.toWordArray(e),r=this.toWordArray(t);n.clamp(),r.clamp();var o=n.sigBytes-r.sigBytes;if(0!=o)return o;for(var i=n.words,a=r.words,s=0;s<i.length;s++)if(0!=(o=i[s]-a[s]))return o;return 0},e.prototype.byteLength=function(e){return this.isArrayBuffer(e)||this.isTypedArray(e)?e.byteLength:this.isWordArray(e)?e.sigBytes:-1},/* Returns ArrayBuffer on browser and Buffer on Node.js */e.prototype.typedArrayToBuffer=function(e){return e.buffer},e}();t.default=new u;/***/},/* 56 *//***/function(e,t,n){// CommonJS
e.exports=n(6).enc.Hex;/***/},/* 57 *//***/function(e,t,n){n.r(t);/* harmony import */var r=n(5),o=/*#__PURE__*/n.n(r),i=n(11),a=n(22),s=/*#__PURE__*/n.n(a),l=n(2),u=/*#__PURE__*/n.n(l),c=n(4),f=/*#__PURE__*/n.n(c);/* harmony default export */t.default=function(e,t){if(e.getRandomWordArray)n=e.getRandomWordArray;else if("undefined"!=typeof Uint32Array&&e.getRandomValues){var n,r=new Uint32Array(4);n=function(n,o){var i=n/4,a=4==i?r:new Uint32Array(i);e.getRandomValues(a,function(e){void 0!==o&&o(e,t.toWordArray(a))})}}else n=function(e,t){u.a.logAction(u.a.LOG_MAJOR,"Ably.Crypto.generateRandom()","Warning: the browser you are using does not support secure cryptographically secure randomness generation; falling back to insecure Math.random()");for(var n=e/4,r=Array(n),i=0;i<n;i++)/* cryptojs wordarrays use signed ints. When WordArray.create is fed a
         * Uint32Array unsigned are converted to signed automatically, but when
         * fed a normal array they aren't, so need to do so ourselves by
         * subtracting INT32_SUP */r[i]=Math.floor(4294967296*Math.random())-2147483648;t(null,o.a.create(r))};/**
   * Internal: obtain the pkcs5 padding string for a given padded length;
   */var a=[o.a.create([269488144,269488144,269488144,269488144],16),o.a.create([16777216],1),o.a.create([33685504],2),o.a.create([50529024],3),o.a.create([67372036],4),o.a.create([84215045,83886080],5),o.a.create([101058054,101056512],6),o.a.create([117901063,117901056],7),o.a.create([134744072,134744072],8),o.a.create([151587081,151587081,150994944],9),o.a.create([168430090,168430090,168427520],10),o.a.create([185273099,185273099,185273088],11),o.a.create([202116108,202116108,202116108],12),o.a.create([218959117,218959117,218959117,218103808],13),o.a.create([235802126,235802126,235802126,235798528],14),o.a.create([252645135,252645135,252645135,252645135],15),o.a.create([269488144,269488144,269488144,269488144],16)];/**
   * Utility classes and interfaces for message payload encryption.
   *
   * This class supports AES/CBC/PKCS5 with a default keylength of 128 bits
   * but supporting other keylengths. Other algorithms and chaining modes are
   * not supported directly, but supportable by extending/implementing the base
   * classes and interfaces here.
   *-
   * Secure random data for creation of Initialization Vectors (IVs) and keys
   * is obtained from window.crypto.getRandomValues if available, or from
   * Math.random() if not. Clients who do not want to depend on Math.random()
   * should polyfill window.crypto.getRandomValues with a library that seeds
   * a PRNG with real entropy.
   *
   * Each message payload is encrypted with an IV in CBC mode, and the IV is
   * concatenated with the resulting raw ciphertext to construct the "ciphertext"
   * data passed to the recipient.
   */function l(){}/**
   * A class encapsulating the client-specifiable parameters for
   * the cipher.
   *
   * algorithm is the name of the algorithm in the default system provider,
   * or the lower-cased version of it; eg "aes" or "AES".
   *
   * Clients are recommended to not call this directly, but instead to use the
   * Crypto.getDefaultParams helper, which will fill in any fields not supplied
   * with default values and validation the result.
   */function c(){this.algorithm=null,this.keyLength=null,this.mode=null,this.key=null}function d(e,n,r){this.algorithm=e.algorithm+"-"+String(e.keyLength)+"-"+e.mode,this.cjsAlgorithm=e.algorithm.toUpperCase().replace(/-\d+$/,""),this.key=t.toWordArray(e.key),r&&(this.iv=t.toWordArray(r).clone()),this.blockLengthWords=n}return l.CipherParams=c,/**
   * Obtain a complete CipherParams instance from the provided params, filling
   * in any not provided with default values, calculating a keyLength from
   * the supplied key, and validating the result.
   * @param params an object containing at a minimum a `key` key with value the
   * key, as either a binary (ArrayBuffer, Array, WordArray) or a
   * base64-encoded string. May optionally also contain: algorithm (defaults to
   * AES), mode (defaults to 'cbc')
   */l.getDefaultParams=function(e){/* Backward compatibility */if("function"==typeof e||"string"==typeof e){if(u.a.deprecated("Crypto.getDefaultParams(key, callback)","Crypto.getDefaultParams({key: key})"),"function"==typeof e)l.generateRandomKey(function(t){e(null,l.getDefaultParams({key:t}))});else if("function"==typeof arguments[1])arguments[1](null,l.getDefaultParams({key:e}));else throw Error("Invalid arguments for Crypto.getDefaultParams");return}if(!e.key)throw Error("Crypto.getDefaultParams: a key is required");n="string"==typeof e.key?Object(i.parse)(e.key.replace("_","/").replace("-","+")):t.toWordArray(e.key);// Expect key to be an Array, ArrayBuffer, or WordArray at this point
var n,r=new c;if(r.key=n,r.algorithm=e.algorithm||"aes",r.keyLength=32*n.words.length,r.mode=e.mode||"cbc",e.keyLength&&e.keyLength!==r.keyLength)throw Error("Crypto.getDefaultParams: a keyLength of "+e.keyLength+" was specified, but the key actually has length "+r.keyLength);return(/**
   * Internal: checks that the cipherParams are a valid combination. Currently
   * just checks that the calculated keyLength is a valid one for aes-cbc
   */function(e){if("aes"===e.algorithm&&"cbc"===e.mode&&128!==e.keyLength&&256!==e.keyLength)throw Error("Unsupported key length "+e.keyLength+" for aes-cbc encryption. Encryption key must be 128 or 256 bits (16 or 32 ASCII characters)")}(r),r)},/**
   * Generate a random encryption key from the supplied keylength (or the
   * default keyLength if none supplied) as a CryptoJS WordArray
   * @param keyLength (optional) the required keyLength in bits
   * @param callback (optional) (err, key)
   */l.generateRandomKey=function(e,t){1==arguments.length&&"function"==typeof e&&(t=e,e=void 0),n((e||256)/8,function(e,n){void 0!==t&&t(e?f.a.fromValues(e):null,n)})},/**
   * Internal; get a ChannelCipher instance based on the given cipherParams
   * @param params either a CipherParams instance or some subset of its
   * fields that includes a key
   */l.getCipher=function(e){var t=e instanceof c?e:l.getDefaultParams(e);return{cipherParams:t,cipher:new d(t,4,e.iv)}},d.prototype.encrypt=function(e,r){u.a.logAction(u.a.LOG_MICRO,"CBCCipher.encrypt()","");var o=(e=t.toWordArray(e)).sigBytes,i=o+16&-16,l=this,c=function(){l.getIv(function(t,n){if(t){r(t);return}var s=l.encryptCipher.process(e.concat(a[i-o]));r(null,n.concat(s))})};this.encryptCipher?c():this.iv?(this.encryptCipher=s.a.algo[this.cjsAlgorithm].createEncryptor(this.key,{iv:this.iv}),c()):n(16,function(e,t){if(e){r(e);return}l.encryptCipher=s.a.algo[l.cjsAlgorithm].createEncryptor(l.key,{iv:t}),l.iv=t,c()})},d.prototype.decrypt=function(e){u.a.logAction(u.a.LOG_MICRO,"CBCCipher.decrypt()",""),e=t.toWordArray(e);var n=this.blockLengthWords,r=e.words,i=o.a.create(r.slice(0,n)),a=o.a.create(r.slice(n)),l=s.a.algo[this.cjsAlgorithm].createDecryptor(this.key,{iv:i}),c=l.process(a),f=l.finalize();return l.reset(),f&&f.sigBytes&&c.concat(f),c},d.prototype.getIv=function(e){if(this.iv){var t=this.iv;this.iv=null,e(null,t);return}/* Since the iv for a new block is the ciphertext of the last, this
     * sets a new iv (= aes(randomBlock XOR lastCipherText)) as well as
     * returning it */var r=this;n(16,function(t,n){if(t){e(t);return}e(null,r.encryptCipher.process(n))})},l};/***/},/* 58 *//***/function(e,t,n){var r;// CommonJS
e.exports=(r=n(6),function(){var e=r.lib.WordArray,t=r.enc;function n(e){return e<<8&4278255360|e>>>8&16711935}t.Utf16=t.Utf16BE={/**
	         * Converts a word array to a UTF-16 BE string.
	         *
	         * @param {WordArray} wordArray The word array.
	         *
	         * @return {string} The UTF-16 BE string.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var utf16String = CryptoJS.enc.Utf16.stringify(wordArray);
	         */stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o+=2){var i=t[o>>>2]>>>16-o%4*8&65535;r.push(String.fromCharCode(i))}return r.join("")},/**
	         * Converts a UTF-16 BE string to a word array.
	         *
	         * @param {string} utf16Str The UTF-16 BE string.
	         *
	         * @return {WordArray} The word array.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var wordArray = CryptoJS.enc.Utf16.parse(utf16String);
	         */parse:function(t){for(var n=t.length,r=[],o=0;o<n;o++)r[o>>>1]|=t.charCodeAt(o)<<16-o%2*16;return e.create(r,2*n)}},/**
	     * UTF-16 LE encoding strategy.
	     */t.Utf16LE={/**
	         * Converts a word array to a UTF-16 LE string.
	         *
	         * @param {WordArray} wordArray The word array.
	         *
	         * @return {string} The UTF-16 LE string.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var utf16Str = CryptoJS.enc.Utf16LE.stringify(wordArray);
	         */stringify:function(e){for(var t=e.words,r=e.sigBytes,o=[],i=0;i<r;i+=2){var a=n(t[i>>>2]>>>16-i%4*8&65535);o.push(String.fromCharCode(a))}return o.join("")},/**
	         * Converts a UTF-16 LE string to a word array.
	         *
	         * @param {string} utf16Str The UTF-16 LE string.
	         *
	         * @return {WordArray} The word array.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var wordArray = CryptoJS.enc.Utf16LE.parse(utf16Str);
	         */parse:function(t){for(var r=t.length,o=[],i=0;i<r;i++)o[i>>>1]|=n(t.charCodeAt(i)<<16-i%2*16);return e.create(o,2*r)}}}(),r.enc.Utf16);/***/},/* 59 *//***/function(e,t,n){var r,o,i;// CommonJS
e.exports=(r=n(6),n(28),o=r.lib.CipherParams,i=r.enc.Hex,r.format.Hex={/**
	         * Converts the ciphertext of a cipher params object to a hexadecimally encoded string.
	         *
	         * @param {CipherParams} cipherParams The cipher params object.
	         *
	         * @return {string} The hexadecimally encoded string.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var hexString = CryptoJS.format.Hex.stringify(cipherParams);
	         */stringify:function(e){return e.ciphertext.toString(i)},/**
	         * Converts a hexadecimally encoded ciphertext string to a cipher params object.
	         *
	         * @param {string} input The hexadecimally encoded string.
	         *
	         * @return {CipherParams} The cipher params object.
	         *
	         * @static
	         *
	         * @example
	         *
	         *     var cipherParams = CryptoJS.format.Hex.parse(hexString);
	         */parse:function(e){var t=i.parse(e);return o.create({ciphertext:t})}},r.format.Hex);/***/},/* 60 *//***/function(e,t,n){var r,o,i,a,s,l,u,c,f,d,p,h,g,m,y;// CommonJS
e.exports=(r=n(6),n(11),n(61),n(27),n(28),o=r.lib.BlockCipher,i=r.algo,a=[],s=[],l=[],u=[],c=[],f=[],d=[],p=[],h=[],g=[],// Compute lookup tables
function(){for(var e=[],t=0;t<256;t++)t<128?e[t]=t<<1:e[t]=t<<1^283;for(var n=0,r=0,t=0;t<256;t++){// Compute sbox
var o=r^r<<1^r<<2^r<<3^r<<4;o=o>>>8^255&o^99,a[n]=o,s[o]=n;// Compute multiplication
var i=e[n],m=e[i],y=e[m],v=257*e[o]^16843008*o;l[n]=v<<24|v>>>8,u[n]=v<<16|v>>>16,c[n]=v<<8|v>>>24,f[n]=v;// Compute inv sub bytes, inv mix columns tables
var v=16843009*y^65537*m^257*i^16843008*n;d[o]=v<<24|v>>>8,p[o]=v<<16|v>>>16,h[o]=v<<8|v>>>24,g[o]=v,n?(n=i^e[e[e[y^i]]],r^=e[e[r]]):n=r=1}}(),m=[0,1,2,4,8,16,32,64,128,27,54],y=i.AES=o.extend({_doReset:function(){// Skip reset of nRounds has been set before and key did not change
if(!this._nRounds||this._keyPriorReset!==this._key){for(var e,t=this._keyPriorReset=this._key,n=t.words,r=t.sigBytes/4,o=((this._nRounds=r+6)+1)*4,i=this._keySchedule=[],s=0;s<o;s++)s<r?i[s]=n[s]:(e=i[s-1],s%r?r>6&&s%r==4&&(e=a[e>>>24]<<24|a[e>>>16&255]<<16|a[e>>>8&255]<<8|a[255&e]):// Mix Rcon
e=(a[// Rot word
(e=e<<8|e>>>24)>>>24]<<24|a[e>>>16&255]<<16|a[e>>>8&255]<<8|a[255&e])^m[s/r|0]<<24,i[s]=i[s-r]^e);for(var l=this._invKeySchedule=[],u=0;u<o;u++){var s=o-u;if(u%4)var e=i[s];else var e=i[s-4];u<4||s<=4?l[u]=e:l[u]=d[a[e>>>24]]^p[a[e>>>16&255]]^h[a[e>>>8&255]]^g[a[255&e]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,l,u,c,f,a)},decryptBlock:function(e,t){// Swap 2nd and 4th rows
var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,d,p,h,g,s);// Inv swap 2nd and 4th rows
var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,o,i,a,s){// Rounds
for(var l=this._nRounds,u=e[t]^n[0],c=e[t+1]^n[1],f=e[t+2]^n[2],d=e[t+3]^n[3],p=4,h=1;h<l;h++){// Shift rows, sub bytes, mix columns, add round key
var g=r[u>>>24]^o[c>>>16&255]^i[f>>>8&255]^a[255&d]^n[p++],m=r[c>>>24]^o[f>>>16&255]^i[d>>>8&255]^a[255&u]^n[p++],y=r[f>>>24]^o[d>>>16&255]^i[u>>>8&255]^a[255&c]^n[p++],v=r[d>>>24]^o[u>>>16&255]^i[c>>>8&255]^a[255&f]^n[p++];// Update state
u=g,c=m,f=y,d=v}// Shortcut
var g=(s[u>>>24]<<24|s[c>>>16&255]<<16|s[f>>>8&255]<<8|s[255&d])^n[p++],m=(s[c>>>24]<<24|s[f>>>16&255]<<16|s[d>>>8&255]<<8|s[255&u])^n[p++],y=(s[f>>>24]<<24|s[d>>>16&255]<<16|s[u>>>8&255]<<8|s[255&c])^n[p++],v=(s[d>>>24]<<24|s[u>>>16&255]<<16|s[c>>>8&255]<<8|s[255&f])^n[p++];// Set output
e[t]=g,e[t+1]=m,e[t+2]=y,e[t+3]=v},keySize:8}),/**
	     * Shortcut functions to the cipher's object interface.
	     *
	     * @example
	     *
	     *     var ciphertext = CryptoJS.AES.encrypt(message, key, cfg);
	     *     var plaintext  = CryptoJS.AES.decrypt(ciphertext, key, cfg);
	     */r.AES=o._createHelper(y),r.AES);/***/},/* 61 *//***/function(e,t,n){var r;// CommonJS
e.exports=(r=n(6),function(e){var t=r.lib,n=t.WordArray,o=t.Hasher,i=r.algo,a=[];!// Compute constants
function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0}();/**
	     * MD5 hash algorithm.
	     */var s=i.MD5=o.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){// Swap endian
for(var n=0;n<16;n++){// Shortcuts
var r=t+n,o=e[r];e[r]=(o<<8|o>>>24)&16711935|(o<<24|o>>>8)&4278255360}// Shortcuts
var i=this._hash.words,s=e[t+0],d=e[t+1],p=e[t+2],h=e[t+3],g=e[t+4],m=e[t+5],y=e[t+6],v=e[t+7],b=e[t+8],_=e[t+9],w=e[t+10],S=e[t+11],k=e[t+12],C=e[t+13],O=e[t+14],E=e[t+15],R=i[0],A=i[1],x=i[2],T=i[3];// Computation
R=l(R,A,x,T,s,7,a[0]),T=l(T,R,A,x,d,12,a[1]),x=l(x,T,R,A,p,17,a[2]),A=l(A,x,T,R,h,22,a[3]),R=l(R,A,x,T,g,7,a[4]),T=l(T,R,A,x,m,12,a[5]),x=l(x,T,R,A,y,17,a[6]),A=l(A,x,T,R,v,22,a[7]),R=l(R,A,x,T,b,7,a[8]),T=l(T,R,A,x,_,12,a[9]),x=l(x,T,R,A,w,17,a[10]),A=l(A,x,T,R,S,22,a[11]),R=l(R,A,x,T,k,7,a[12]),T=l(T,R,A,x,C,12,a[13]),x=l(x,T,R,A,O,17,a[14]),A=l(A,x,T,R,E,22,a[15]),R=u(R,A,x,T,d,5,a[16]),T=u(T,R,A,x,y,9,a[17]),x=u(x,T,R,A,S,14,a[18]),A=u(A,x,T,R,s,20,a[19]),R=u(R,A,x,T,m,5,a[20]),T=u(T,R,A,x,w,9,a[21]),x=u(x,T,R,A,E,14,a[22]),A=u(A,x,T,R,g,20,a[23]),R=u(R,A,x,T,_,5,a[24]),T=u(T,R,A,x,O,9,a[25]),x=u(x,T,R,A,h,14,a[26]),A=u(A,x,T,R,b,20,a[27]),R=u(R,A,x,T,C,5,a[28]),T=u(T,R,A,x,p,9,a[29]),x=u(x,T,R,A,v,14,a[30]),A=u(A,x,T,R,k,20,a[31]),R=c(R,A,x,T,m,4,a[32]),T=c(T,R,A,x,b,11,a[33]),x=c(x,T,R,A,S,16,a[34]),A=c(A,x,T,R,O,23,a[35]),R=c(R,A,x,T,d,4,a[36]),T=c(T,R,A,x,g,11,a[37]),x=c(x,T,R,A,v,16,a[38]),A=c(A,x,T,R,w,23,a[39]),R=c(R,A,x,T,C,4,a[40]),T=c(T,R,A,x,s,11,a[41]),x=c(x,T,R,A,h,16,a[42]),A=c(A,x,T,R,y,23,a[43]),R=c(R,A,x,T,_,4,a[44]),T=c(T,R,A,x,k,11,a[45]),x=c(x,T,R,A,E,16,a[46]),A=c(A,x,T,R,p,23,a[47]),R=f(R,A,x,T,s,6,a[48]),T=f(T,R,A,x,v,10,a[49]),x=f(x,T,R,A,O,15,a[50]),A=f(A,x,T,R,m,21,a[51]),R=f(R,A,x,T,k,6,a[52]),T=f(T,R,A,x,h,10,a[53]),x=f(x,T,R,A,w,15,a[54]),A=f(A,x,T,R,d,21,a[55]),R=f(R,A,x,T,b,6,a[56]),T=f(T,R,A,x,E,10,a[57]),x=f(x,T,R,A,y,15,a[58]),A=f(A,x,T,R,C,21,a[59]),R=f(R,A,x,T,g,6,a[60]),T=f(T,R,A,x,S,10,a[61]),x=f(x,T,R,A,p,15,a[62]),A=f(A,x,T,R,_,21,a[63]),// Intermediate hash value
i[0]=i[0]+R|0,i[1]=i[1]+A|0,i[2]=i[2]+x|0,i[3]=i[3]+T|0},_doFinalize:function(){// Shortcuts
var t=this._data,n=t.words,r=8*this._nDataBytes,o=8*t.sigBytes;// Add padding
n[o>>>5]|=128<<24-o%32;var i=e.floor(r/4294967296);n[(o+64>>>9<<4)+15]=(i<<8|i>>>24)&16711935|(i<<24|i>>>8)&4278255360,n[(o+64>>>9<<4)+14]=(r<<8|r>>>24)&16711935|(r<<24|r>>>8)&4278255360,t.sigBytes=(n.length+1)*4,// Hash final blocks
this._process();// Swap endian
for(var a=this._hash,s=a.words,l=0;l<4;l++){// Shortcut
var u=s[l];s[l]=(u<<8|u>>>24)&16711935|(u<<24|u>>>8)&4278255360}// Return final computed hash
return a},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,n,r,o,i,a){var s=e+(t&n|~t&r)+o+a;return(s<<i|s>>>32-i)+t}function u(e,t,n,r,o,i,a){var s=e+(t&r|n&~r)+o+a;return(s<<i|s>>>32-i)+t}function c(e,t,n,r,o,i,a){var s=e+(t^n^r)+o+a;return(s<<i|s>>>32-i)+t}function f(e,t,n,r,o,i,a){var s=e+(n^(t|~r))+o+a;return(s<<i|s>>>32-i)+t}/**
	     * Shortcut function to the hasher's object interface.
	     *
	     * @param {WordArray|string} message The message to hash.
	     *
	     * @return {WordArray} The hash.
	     *
	     * @static
	     *
	     * @example
	     *
	     *     var hash = CryptoJS.MD5('message');
	     *     var hash = CryptoJS.MD5(wordArray);
	     */r.MD5=o._createHelper(s),/**
	     * Shortcut function to the HMAC's object interface.
	     *
	     * @param {WordArray|string} message The message to hash.
	     * @param {WordArray|string} key The secret key.
	     *
	     * @return {WordArray} The HMAC.
	     *
	     * @static
	     *
	     * @example
	     *
	     *     var hmac = CryptoJS.HmacMD5(message, key);
	     */r.HmacMD5=o._createHmacHelper(s)}(Math),r.MD5);/***/},/* 62 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(0),i=o.__importDefault(n(3)),a=o.__importStar(n(1)),s=o.__importDefault(n(8)),l=n(4),u=o.__importDefault(n(18)),c=o.__importDefault(n(16)),f=o.__importDefault(n(21)),d=o.__importDefault(n(2)),p=n(29),h=o.__importDefault(n(63)),g=n(25);function m(e){var t=e.statusCode;/* 400 + no code = a generic xhr onerror. Browser doesn't give us enough
     * detail to know whether it's fallback-fixable, but it may be (eg if a
     * network issue), so try just in case */return 408===t&&!e.code||400===t&&!e.code||t>=500&&t<=504}function y(e){/* If we're a connected realtime client, try the endpoint we're connected
     * to first -- but still have fallbacks, being connected is not an absolute
     * guarantee that a datacenter has free capacity to service REST requests. */var t=e.connection,n=t&&t.connectionManager.host;return n?[n].concat(s.default.getFallbackHosts(e.options)):s.default.getHosts(e.options)}var v=((r=/** @class */function(){function e(e){this.checksInProgress=null,this.checkConnectivity=void 0,this.supportsAuthHeaders=!1,this.supportsLinkHeaders=!1,this._getHosts=y,this.options=e||{};var t=this.options.connectivityCheckUrl||s.default.connectivityCheckUrl,n=this.options.connectivityCheckParams,r=!this.options.connectivityCheckUrl;i.default.Config.xhrSupported?(this.supportsAuthHeaders=!0,this.Request=function(e,t,n,r,o,i,a){var s=c.default.createRequest(n,r,o,i,f.default.REQ_SEND,t&&t.options.timeouts,e);return s.once("complete",a),s.exec(),s},this.options.disableConnectivityCheck?this.checkConnectivity=function(e){e(null,!0)}:this.checkConnectivity=function(e){d.default.logAction(d.default.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Sending; "+t),this.doUri(u.default.Get,null,t,null,null,n,function(t,n,o,i,a){var s=!1;s=r?!t&&(null==n?void 0:n.replace(/\n/,""))=="yes":!t&&(0,g.isSuccessCode)(a),d.default.logAction(d.default.LOG_MICRO,"(XHRRequest)Http.checkConnectivity()","Result: "+s),e(null,s)})}):i.default.Config.jsonpSupported?(this.Request=function(e,t,n,r,o,a,s){var l=(0,p.createRequest)(n,r,o,a,f.default.REQ_SEND,t&&t.options.timeouts,e);return l.once("complete",s),i.default.Config.nextTick(function(){l.exec()}),l},this.options.disableConnectivityCheck?this.checkConnectivity=function(e){e(null,!0)}:this.checkConnectivity=function(e){var t=this,n=s.default.jsonpInternetUpUrl;if(this.checksInProgress){this.checksInProgress.push(e);return}this.checksInProgress=[e],d.default.logAction(d.default.LOG_MICRO,"(JSONP)Http.checkConnectivity()","Sending; "+n);var r=new p.Request("isTheInternetUp",n,null,null,null,f.default.REQ_SEND,s.default.TIMEOUTS);r.once("complete",function(e,n){var r=!e&&n;d.default.logAction(d.default.LOG_MICRO,"(JSONP)Http.checkConnectivity()","Result: "+r);for(var o=0;o<t.checksInProgress.length;o++)t.checksInProgress[o](null,r);t.checksInProgress=null}),i.default.Config.nextTick(function(){r.exec()})}):i.default.Config.fetchSupported?(this.supportsAuthHeaders=!0,this.Request=h.default,this.checkConnectivity=function(e){d.default.logAction(d.default.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Sending; "+t),this.doUri(u.default.Get,null,t,null,null,null,function(t,n){var r=!t&&(null==n?void 0:n.replace(/\n/,""))=="yes";d.default.logAction(d.default.LOG_MICRO,"(Fetch)Http.checkConnectivity()","Result: "+r),e(null,r)})}):this.Request=function(e,t,n,r,o,i,a){a(new l.PartialErrorInfo("no supported HTTP transports available",null,400),null)}}return(/* Unlike for doUri, the 'rest' param here is mandatory, as it's used to generate the hosts */e.prototype.do=function(e,t,n,r,i,s,u){var c=this,f="function"==typeof n?n:function(e){return t.baseUri(e)+n},d=t._currentFallback;if(d){if(d.validUntil>a.now()){/* Use stored fallback */if(!this.Request){null==u||u(new l.PartialErrorInfo("Request invoked before assigned to",null,500));return}this.Request(e,t,f(d.host),r,s,i,function(a){for(var l=[],f=1;f<arguments.length;f++)l[f-1]=arguments[f];// This typecast is safe because ErrnoExceptions are only thrown in NodeJS
if(a&&m(a)){/* unstore the fallback and start from the top with the default sequence */t._currentFallback=null,c.do(e,t,n,r,i,s,u);return}null==u||u.apply(void 0,o.__spreadArray([a],l,!1))});return}/* Fallback expired; remove it and fallthrough to normal sequence */t._currentFallback=null}var p=y(t);/* if there is only one host do it */if(1===p.length){this.doUri(e,t,f(p[0]),r,i,s,u);return}/* hosts is an array with preferred host plus at least one fallback */var h=function(n,l){var d=n.shift();c.doUri(e,t,f(d),r,i,s,function(e){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];// This typecast is safe because ErrnoExceptions are only thrown in NodeJS
if(e&&m(e)&&n.length){h(n,!0);return}l&&/* RSC15f */(t._currentFallback={host:d,validUntil:a.now()+t.options.timeouts.fallbackRetryTimeout}),null==u||u.apply(void 0,o.__spreadArray([e],r,!1))})};h(p)},e.prototype.doUri=function(e,t,n,r,o,i,a){if(!this.Request){a(new l.PartialErrorInfo("Request invoked before assigned to",null,500));return}this.Request(e,t,n,r,i,o,a)},e)}()).methods=[u.default.Get,u.default.Delete,u.default.Post,u.default.Put,u.default.Patch],r.methodsWithoutBody=[u.default.Get,u.default.Delete],r.methodsWithBody=[u.default.Post,u.default.Put,u.default.Patch],r);t.default=v;/***/},/* 63 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=r.__importStar(n(4)),i=r.__importDefault(n(3)),a=r.__importDefault(n(8)),s=r.__importStar(n(1)),l=n(1);t.default=function(e,t,n,r,u,c,f){var d=new Headers(r||{}),p=e?e.toUpperCase():s.isEmptyArg(c)?"GET":"POST",h=new AbortController,g=setTimeout(function(){h.abort(),f(new o.PartialErrorInfo("Request timed out",null,408))},t?t.options.timeouts.httpRequestTimeout:a.default.TIMEOUTS.httpRequestTimeout),m={method:p,headers:d,body:c};i.default.Config.isWebworker||(m.credentials=d.has("authorization")?"include":"same-origin"),(0,l.getGlobalObject)().fetch(n+"?"+new URLSearchParams(u||{}),m).then(function(e){clearTimeout(g);var t=e.headers.get("Content-Type");(t&&t.indexOf("application/x-msgpack")>-1?e.arrayBuffer():t&&t.indexOf("application/json")>-1?e.json():e.text()).then(function(n){var r=!!t&&-1===t.indexOf("application/x-msgpack");e.ok?f(null,n,e.headers,r,e.status):f(function(e,t){if(t.get("x-ably-errorcode"))return e.error&&o.default.fromValues(e.error)}(n,e.headers)||new o.PartialErrorInfo("Error response received from server: "+e.status+" body was: "+i.default.Config.inspect(n),null,e.status),n,e.headers,r,e.status)})}).catch(function(e){clearTimeout(g),f(e)})};/***/},/* 64 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(0),i=o.__importDefault(n(41)),a=o.__importStar(n(1)).getGlobalObject();"undefined"==typeof Window&&"undefined"==typeof WorkerGlobalScope&&console.log("Warning: this distribution of Ably is intended for browsers. On nodejs, please use the 'ably' package on npm");var s=a.navigator&&a.navigator.userAgent.toString(),l={agent:"browser",logTimestamps:!0,userAgent:s,currentUrl:a.location&&a.location.href,noUpgrade:s&&!!s.match(/MSIE\s8\.0/),binaryType:"arraybuffer",WebSocket:a.WebSocket,fetchSupported:!!a.fetch,xhrSupported:a.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,jsonpSupported:"undefined"!=typeof document,allowComet:(r=a.location,!a.WebSocket||!r||!r.origin||r.origin.indexOf("http")>-1),streamingSupported:!0,useProtocolHeartbeats:!0,createHmac:null,msgpack:i.default,supportsBinary:!!a.TextDecoder,preferBinary:!1,ArrayBuffer:a.ArrayBuffer,atob:a.atob,nextTick:void 0!==a.setImmediate?a.setImmediate.bind(a):function(e){setTimeout(e,0)},addEventListener:a.addEventListener,inspect:JSON.stringify,stringByteSize:function(e){/* str.length will be an underestimate for non-ascii strings. But if we're
         * in a browser too old to support TextDecoder, not much we can do. Better
         * to underestimate, so if we do go over-size, the server will reject the
         * message */return a.TextDecoder&&new a.TextEncoder().encode(e).length||e.length},TextEncoder:a.TextEncoder,TextDecoder:a.TextDecoder,Promise:a.Promise,getRandomValues:function(e){if(void 0!==e)return function(t,n){e.getRandomValues(t),n&&n(null)}}(a.crypto||msCrypto)};t.default=l;/***/},/* 65 *//***/function(e,t,n){/* WEBPACK VAR INJECTION */(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__importStar(n(1)),o="ablyjs-storage-test",i=/** @class */function(){function t(){/* Even just accessing the session/localStorage object can throw a
         * security exception in some circumstances with some browsers. In
         * others, calling setItem will throw. So have to check in this
         * somewhat roundabout way. (If unsupported or no global object,
         * will throw on accessing a property of undefined) */try{e.sessionStorage.setItem(o,o),e.sessionStorage.removeItem(o),this.sessionSupported=!0}catch(e){this.sessionSupported=!1}try{e.localStorage.setItem(o,o),e.localStorage.removeItem(o),this.localSupported=!0}catch(e){this.localSupported=!1}}return t.prototype.get=function(e){return this._get(e,!1)},t.prototype.getSession=function(e){return this._get(e,!0)},t.prototype.remove=function(e){return this._remove(e,!1)},t.prototype.removeSession=function(e){return this._remove(e,!0)},t.prototype.set=function(e,t,n){return this._set(e,t,n,!1)},t.prototype.setSession=function(e,t,n){return this._set(e,t,n,!0)},t.prototype._set=function(e,t,n,o){var i={value:t};return n&&(i.expires=r.now()+n),this.storageInterface(o).setItem(e,JSON.stringify(i))},t.prototype._get=function(e,t){if(t&&!this.sessionSupported)throw Error("Session Storage not supported");if(!t&&!this.localSupported)throw Error("Local Storage not supported");var n=this.storageInterface(t).getItem(e);if(!n)return null;var o=JSON.parse(n);return o.expires&&o.expires<r.now()?(this.storageInterface(t).removeItem(e),null):o.value},t.prototype._remove=function(e,t){return this.storageInterface(t).removeItem(e)},t.prototype.storageInterface=function(t){return t?e.sessionStorage:e.localStorage},t}();t.default=new i;/* WEBPACK VAR INJECTION */}).call(this,n(13));/***/},/* 66 *//***/function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(0).__importDefault(n(67)),o={connectivityCheckUrl:"https://internet-up.ably-realtime.com/is-the-internet-up.txt",jsonpInternetUpUrl:"https://internet-up.ably-realtime.com/is-the-internet-up-0-9.js",/* Order matters here: the base transport is the leftmost one in the
     * intersection of baseTransportOrder and the transports clientOption that's
     * supported.  This is not quite the same as the preference order -- e.g.
     * xhr_polling is preferred to jsonp, but for browsers that support it we want
     * the base transport to be xhr_polling, not jsonp */defaultTransports:[r.default.XhrPolling,r.default.XhrStreaming,r.default.JsonP,r.default.WebSocket],baseTransportOrder:[r.default.XhrPolling,r.default.XhrStreaming,r.default.JsonP,r.default.WebSocket],transportPreferenceOrder:[r.default.JsonP,r.default.XhrPolling,r.default.XhrStreaming,r.default.WebSocket],upgradeTransports:[r.default.XhrStreaming,r.default.WebSocket]};t.default=o;/***/},/* 67 *//***/function(e,t,n){var r,o;Object.defineProperty(t,"__esModule",{value:!0}),(o=r||(r={})).WebSocket="web_socket",o.Comet="comet",o.XhrStreaming="xhr_streaming",o.XhrPolling="xhr_polling",o.JsonP="jsonp",t.default=r;/***/},/* 68 *//***/function(e,t,n){// ESM COMPAT FLAG
n.r(t);// EXTERNAL MODULE: ./src/platform/web/lib/transport/jsonptransport.ts
var r=n(29),o=/*#__PURE__*/n.n(r),i=n(1),a=n(3),s=/*#__PURE__*/n.n(a),l=n(12),u=/*#__PURE__*/n.n(l),c=n(16),f=/*#__PURE__*/n.n(c);t.default=[o.a,function(e){var t="xhr_polling";function n(e,n,r){r.stream=!1,u.a.call(this,e,n,r),this.shortName=t}return i.inherits(n,u.a),n.isAvailable=function(){return s.a.Config.xhrSupported&&s.a.Config.allowComet},n.prototype.toString=function(){return"XHRPollingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected},n.prototype.createRequest=function(e,t,n,r,o){return f.a.createRequest(e,t,n,r,o,this.timeouts)},void 0!==e&&n.isAvailable()&&(e.supportedTransports[t]=n),n},function(e){var t="xhr_streaming";/* public constructor */function n(e,n,r){u.a.call(this,e,n,r),this.shortName=t}return i.inherits(n,u.a),n.isAvailable=function(){return s.a.Config.xhrSupported&&s.a.Config.streamingSupported&&s.a.Config.allowComet},n.prototype.toString=function(){return"XHRStreamingTransport; uri="+this.baseUri+"; isConnected="+this.isConnected},n.prototype.createRequest=function(e,t,n,r,o){return f.a.createRequest(e,t,n,r,o,this.timeouts)},void 0!==e&&n.isAvailable()&&(e.supportedTransports[t]=n),n}];/***/}]).default;let ei=null;class ea extends /*@__PURE__*/t(m).Realtime.Promise{constructor(e){"string"==typeof e&&(e={key:e}),e.agents={"react-hooks":"2.1.1"},super(e)}}function es(e){return ei||(ei=new ea(e))}function el(){if(!ei)throw Error('Ably not configured - please call configureAbly({ key: "your-api-key", clientId: "someid" });');return ei}var eu={};e(eu,"useChannel",()=>ef);var d=c("fYo6y"),ec=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function ef(e,...t){let n="string"==typeof e?el():e.realtime||el(),r="string"==typeof e?e:e.channelName,o="string"==typeof e?n.channels.get(r):n.channels.get(r,e.options),i=()=>ec(this,void 0,void 0,function*(){yield o.subscribe.apply(o,t)}),a=()=>ec(this,void 0,void 0,function*(){yield o.unsubscribe.apply(o,t),setTimeout(()=>ec(this,void 0,void 0,function*(){0===o.listeners.length&&(yield o.detach())}),2500)});return(0,d.useEffect)(()=>(i(),()=>{a()}),[r]),[o,n]}var ed={};e(ed,"usePresence",()=>eh);var d=c("fYo6y"),ep=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})};function eh(e,t,n){let r="string"==typeof e?el():e.realtime||el(),o="string"==typeof e?e:e.channelName,i="string"==typeof e?r.channels.get(o):r.channels.get(o,e.options),[a,s]=(0,d.useState)([]),l=e=>ep(this,void 0,void 0,function*(){let t=yield i.presence.get();s(t),null==n||n.call(this,e)}),u=()=>ep(this,void 0,void 0,function*(){i.presence.subscribe("enter",l),i.presence.subscribe("leave",l),i.presence.subscribe("update",l),yield i.presence.enter(t);let e=yield i.presence.get();s(e)}),c=()=>{"attached"==i.state&&i.presence.leave(),i.presence.unsubscribe("enter"),i.presence.unsubscribe("leave"),i.presence.unsubscribe("update")};(0,d.useEffect)(()=>(u(),()=>{c()}),[]);let f=(0,d.useCallback)(e=>{i.presence.update(e)},[i]);return[a,f]}n(g,eu),n(g,ed);const eg=/*@__PURE__*/t(h).get("publisherId")||"";let em=/*@__PURE__*/t(h).get("publisherName")||"";const ey=/*@__PURE__*/t(h).get("clientId")||"";let ev=/*@__PURE__*/t(h).get("clientName")||"";eg&&em&&ey||(window.location.href="/subscribe404.html"),es({clientId:ey,authUrl:"/api/subscribeTokenRequest",echoMessages:!1});const eb=`${eg}:whisper`;let e_=!1,ew=!0;const eS={live:"This is where live text will appear",past:"This is where past text will appear.\nThe newest lines will appear on top."};function ek(e){let[n,r]=(0,d.useState)(e.name);return/*#__PURE__*/(0,f.jsxs)(f.Fragment,{children:[/*#__PURE__*/(0,f.jsx)("h2",{children:"Please provide your name to the whisperer:"}),/*#__PURE__*/(0,f.jsx)("input",{name:"listenerName",id:"listenerName",type:"text",value:n.valueOf(),onChange:function(e){r(ev=e.target.value)}}),/*#__PURE__*/(0,f.jsx)("button",{id:"updateButton",type:"button",onClick:function(){e.setName(ev),/*@__PURE__*/t(h).set("clientName",ev,{expires:365})},children:"Update"})]})}function eC(){let[e,t]=(0,d.useState)(`Connecting to ${em}...`),[n,r]=(0,d.useState)(eS),[o]=(0,eu.useChannel)(eb,e=>(function(e,t,n,r){if(e.name.toUpperCase()===ey.toUpperCase()){console.log(`Received chunk directed here: ${e.data}`);let[o,i]=e.data.split("|",1);"-21"===o&&i.toUpperCase()===ey.toUpperCase()?(console.log("Whisperer is dropping this client"),t.detach(),n(`Dropped by ${em}, please close the window`),r(eS)):eA(e.data,r)}else"all"===e.name?eA(e.data,r):e.clientId.toUpperCase()!=eg.toUpperCase()?console.log(`Ignoring chunk from non-listener ${e.clientId}, topic ${e.name}: ${e.data}`):console.log(`Ignoring chunk with topic ${e.name}: ${e.data}`)})(e,o,t,r)),[i]=(0,ed.usePresence)(eb,ev,e=>eR(e,o,t,r));if(ew){ew=!1,console.log(`Processing ${i.length} past presence messages`);for(let e=0;e<i.length;e++)eR(i[e],o,t,r)}return/*#__PURE__*/(0,f.jsxs)(f.Fragment,{children:[/*#__PURE__*/(0,f.jsx)(eO,{whisperer:e}),/*#__PURE__*/(0,f.jsx)("form",{children:/*#__PURE__*/(0,f.jsx)(eE,{text:n})})]})}function eO(e){return/*#__PURE__*/(0,f.jsx)("h1",{children:e.whisperer})}function eE(e){return/*#__PURE__*/(0,f.jsxs)(f.Fragment,{children:[/*#__PURE__*/(0,f.jsx)("textarea",{id:"liveText",rows:10,value:e.text.live}),/*#__PURE__*/(0,f.jsx)("textarea",{id:"pastText",rows:30,readOnly:!0,value:e.text.past})]})}function eR(e,t,n,r){e.clientId.toUpperCase()==ey.toUpperCase()?console.log(`Ignoring self presence message: ${e.action}, ${e.data}`):e.clientId.toUpperCase()===eg.toUpperCase()?(console.log(`Received presence from Whisperer: ${e.action}, ${e.data}`),["present","enter","update"].includes(e.action)?(n(`Connected to ${em=e.data}`),e_||(console.log("Requesting resend of live text..."),e_=!0,// request the whisperer to send all the text
t.publish(eg,"-20|live"))):["leave","absent"].includes(e.action)&&(n(`Disconnected from ${em=e.data}, please close the window`),r(eS))):console.log(`Ignoring presence message: ${e.clientId}, ${e.data}, ${e.action}`)}function eA(e,t){function n(e){return e.startsWith("-1")||!e.startsWith("-")}if(e.startsWith("-9|"))console.log("Received request to play sound");else if(e_)e.startsWith("-4|")?(console.log("Received reset acknowledgement from whisperer, resetting live text"),t(e=>({live:"",past:e.past}))):n(e)?console.log("Ignoring diff chunk because a read is in progress"):e.startsWith("-1|")||e.startsWith("-2|")?console.log("Received unexpected past line chunk, ignoring it"):e.startsWith("-3|")&&(console.log("Receive live text chunk, update is over"),t(t=>({live:e.substring(3),past:t.past})),e_=!1);else if(n(e)){if(e.startsWith("0|"))t(t=>({live:e.substring(2),past:t.past}));else if(e.startsWith("-1|"))console.log("Prepending live text to past line"),t(e=>({live:"",past:e.live+"\n"+e.past}));else{let[n,r]=e.split("|",2),o=parseInt(n);t(e=>({live:e.live.substring(0,o)+r,past:e.past}))}}else console.log("Ignoring non-diff chunk because no read in progress")}// @ts-ignore
const ex=r(document.getElementById("root"));ex.render(/*#__PURE__*/(0,f.jsx)(d.StrictMode,{children:/*#__PURE__*/(0,f.jsx)(function(){let[e,t]=(0,d.useState)(ev);return e?/*#__PURE__*/(0,f.jsx)(eC,{}):/*#__PURE__*/(0,f.jsx)(ek,{name:e,setName:t})},{})}));